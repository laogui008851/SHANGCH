(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-76ed0f00"],{5287:function(t,e,a){a.r(e);var i=a("60d7"),r=(a("247d"),a("8a4a"),a("6eef")),s=a("3191"),o={name:"EsFilter",data(){return{currentFilterValue:"",categoryList:[],openList:!1,categoryId:"",parCategoryId:"",scrollTop:0}},computed:{},activated(){this.getCategoryList();let t=this.$router.currentRoute;window.addEventListener("scroll",this.windowScroll),setTimeout(()=>{var e;this.categoryList.length&&(t.query.parentId?(e=this.categoryList.findIndex(e=>e.categoryId===t.query.parentId),this.currentFilterValue=e,this.parCategoryId=t.query.parentId,this.categoryId=t.query.id,this.openList=!0):t.query.id?(this.openList=!1,localStorage.setItem("category_id",t.query.id),this.$emit("filterChange",this.categoryList.find(e=>e.categoryId===t.query.id).categoryId),(e=this.categoryList.findIndex(e=>e.categoryId===t.query.id))&&(this.currentFilterValue=e)):this.currentFilterValue="explme")},1e3)},created(){},methods:{...Object(r.b)("home",["requestCategoryList"]),async getCategoryList(){var t=await Object(s.b)();this.categoryList=t.data},changeFilter(t,e,a){var i=this.$router.currentRoute;sessionStorage.setItem("CommodityScrollTop",this.scrollTop),this.categoryId="",a?(this.categoryId=a.categoryId,i.query.id!==a.categoryId&&(this.$router.replace({path:"/commodity",query:{id:a.categoryId}}),localStorage.setItem("category_id",t.categoryId))):(this.parCategoryId=t.categoryId,this.currentFilterValue=e,i.query.id!==t.categoryId&&(this.$router.replace({path:"/commodity",query:{id:t.categoryId}}),localStorage.setItem("category_id",t.categoryId))),this.$parent.changepage(),this.$emit("filterChange",t.categoryId)}}},l=(a("9780"),a("cea0")),n=(o=Object(l.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"filter commodity-filter"},[e("h2",[t._v(t._s(this.$t("message.home.classification")))]),e("ul",[e("li",{staticClass:"first-item",class:{"commodity-filter-item":!0,"commodity-filter-item-active":"explme"===t.currentFilterValue},on:{click:function(e){return t.changeFilter("explme","explme")}}},[t._v(" "+t._s(t.$t("message.home.AllProducts"))+" ")]),t._l(t.categoryList,(function(a,i){return e("li",{key:i,class:{"commodity-filter-item":!0,"commodity-filter-item-active":t.currentFilterValue===i},on:{click:function(e){return t.changeFilter(a,i)}}},[e("div",{staticClass:"list",on:{click:function(e){t.openList=!t.openList}}},[t._v(" "+t._s(a.name)+" "),a.subList.length?e("i",{class:t.openList&&t.parCategoryId==a.categoryId?"el-icon-arrow-down":"el-icon-arrow-right",staticStyle:{"margin-left":"5px"}}):t._e()]),t.openList&&t.parCategoryId==a.categoryId?e("div",{staticClass:"list-item"},[a.subList.length?e("ul",t._l(a.subList,(function(i,r){return e("li",{key:r,class:i.categoryId==t.categoryId?"active":"",on:{click:function(e){return e.stopPropagation(),t.changeFilter(a,r,i)}}},[t._v(" "+t._s(i.name)+" ")])})),0):t._e()]):t._e()])}))],2)])}),[],!1,null,null,null).exports,a("8209"));i={name:"EsCommodity",components:{EsProductView:i.a,EsSortView:n.a,EsFilterView:o},data(){return{loading:!1,pageNum:1,isRenew:!1,pageSize:20,total:0,beforeSortParams:{},sort:[],scrollTop:0}},computed:{...Object(r.c)("home",["sellerGoodsList","categoryList"])},activated(){this.requestData()},methods:{...Object(r.b)("home",["requestSellerGoodsList","requestCategoryList"]),changeFilter(t,e){this.currentFilterValue=e},changepage(){this.pageNum=1,this.requestData()},async requestData(t={}){try{var e,a=this.$router.currentRoute.query.id||t.categoryId;!a&&this.beforeSortParams?(this.loading=!0,await this.requestSellerGoodsList({pageNum:this.pageNum,pageSize:this.pageSize,...this.beforeSortParams}).then(t=>{this.total=t.pageInfo.totalElements,this.sellerGoodsList.length&&this.$Gsap.fromTo(this.$refs.activeScoll,{delay:0,duration:1.5,y:"100",autoAlpha:0,ease:"back.out(1.7)"},{delay:0,duration:1,y:"0",autoAlpha:1,ease:"back.out(1.7)"})})):(e=Object.prototype.hasOwnProperty.call(t,"categoryId")?this.beforeSortParams:{},this.loading=!0,await this.requestSellerGoodsList({...e,...t,categoryId:a,pageNum:this.pageNum,pageSize:this.pageSize}).then(t=>{this.total=t.pageInfo.totalElements,this.sellerGoodsList.length&&this.$Gsap.fromTo(this.$refs.activeScoll,{delay:0,duration:1.5,y:"100",autoAlpha:0,ease:"back.out(1.7)"},{delay:0,duration:1,y:"0",autoAlpha:1,ease:"back.out(1.7)"})}))}finally{this.loading=!1}},currentChange(t){this.pageNum=t,document.documentElement.scrollTop=0,this.requestData(this.sort)},filterChange(t){this.requestData({categoryId:t}),this.isRenew=!0},sortEvent(t){this.sort=t,this.pageNum=1,this.beforeSortParams=t,this.requestData(t)}}},a("b3dc"),n=Object(l.a)(i,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"commodity"},[e("EsHeaderView"),e("div",{staticClass:"app-container app-center"},[e("div",{staticClass:"commodity-wrap flex-start"},[e("EsFilterView",{on:{filterChange:t.filterChange}}),e("div",{staticClass:"commodity-content"},[e("EsSortView",{attrs:{isRenew:t.isRenew},on:{sort:t.sortEvent}}),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[e("div",{ref:"activeScoll",staticClass:"commodity-content-list"},t._l(t.sellerGoodsList,(function(t,a){return e("EsProductView",{key:a,attrs:{item:t}})})),1),t.sellerGoodsList.length?t._e():e("div",{staticClass:"no-data"},[e("el-empty",{attrs:{description:t.$t("message.home.noData")}})],1),t.sellerGoodsList.length?e("div",{staticClass:"common-pagination"},[e("el-pagination",{staticClass:"es-pagination",attrs:{background:"",layout:"prev, pager, next","page-size":t.pageSize,"current-page":t.pageNum,total:t.total},on:{"current-change":t.currentChange}})],1):t._e()])],1)],1)]),e("EsFooterView")],1)}),[],!1,null,null,null);e.default=n.exports},9780:function(t,e,a){a("b656")},b3dc:function(t,e,a){a("d195")},b656:function(t,e,a){},d195:function(t,e,a){}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-9b460aa0"],{"6dac":function(e,t,a){a("fdeb")},7968:function(e,t,a){a.r(t),a("318b");let s=a("8209"),i=a("60d7"),r=a("6eef"),o=[void 0,null,""],h={name:"EsSearchResult",components:{EsSortView:s.a,EsProductView:i.a},props:{type:{type:String,default:"product"}},data(){return{httpLoading:!1,pageNum:1,pageSize:12,total:0,searchListInfo:[],beforeSortParams:{},dataType:""}},watch:{goodsList(e){this.serachResultList=e},route:"requestData"},computed:{...Object(r.c)({storeSearchValue:"home/storeSearchValue",serachResultList:"user/serachResultList"}),isStoreView(){return"store"===this.type},goodsList(){return JSON.parse(localStorage.getItem("ES_SEARCH_RESULT")||"[]")}},activated(){this.$nextTick(()=>{var e=this.$route.query.k;e&&this.pageInit(e)})},methods:{...Object(r.b)({requestSearchResultList:"user/requestSearchResultList"}),...Object(r.d)({updateSerachResultList:"user/updateSerachResultList"}),pageInit(e){},async requestData(e={}){var t=this.storeSearchValue;if(e){var a=Object.prototype.hasOwnProperty.call(e,"keyword"),s=a?this.beforeSortParams:{};await this.requestSearchResultList({keyword:a?e.categoryId:t,...s,...e,pageNum:this.pageNum,pageSize:this.pageSize}).then(e=>{this.total=1!==this.pageNum||e.pageList.length?e.pageList.length<this.pageSize?e.pageInfo.pageNum*this.pageSize:e.pageInfo.pageNum*this.pageSize+1:0})}else try{o.includes(t)||(this.httpLoading=!0,await this.requestSearchResultList({...beforeSortParams,keyword:t,pageNum:this.pageNum,pageSize:this.pageSize}).then(e=>{this.total=1!==this.pageNum||e.pageList.length?e.pageList.length<this.pageSize?e.pageInfo.pageNum*this.pageSize:e.pageInfo.pageNum*this.pageSize+1:0,this.httpLoading=!1}).catch(()=>{this.httpLoading=!1}))}finally{this.httpLoading=!1}},currentChange(e){this.pageNum=e,this.requestData()},searchValueChange(e){o.includes(e)||(this.pageNum=1,this.requestData({keyword:e}))},sortEvent(e){this.beforeSortParams=e,this.storeSearchValue?(this.pageNum=1,this.requestData(e)):this.updateSerachResultList({pageList:[]})}},beforeDestroy(){}},u=h,n=(a("6dac"),a("cea0")),p=Object(n.a)(u,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"serach-result"},[t("EsHeaderView",{on:{searchValueChange:e.searchValueChange}}),t("div",{staticClass:"serach-result-wrap app-container app-center"},[t("EsLoadingView",{attrs:{loading:e.httpLoading}},[t("div",{staticClass:"serach-result-product"},[t("EsSortView",{on:{sort:e.sortEvent}}),e.serachResultList.length?t("div",{staticClass:"product-list"},e._l(e.serachResultList,(function(e,a){return t("EsProductView",{key:a,attrs:{item:e}})})),1):e._e(),e.serachResultList.length||e.total?t("div",{staticClass:"common-pagination"},[t("el-pagination",{staticClass:"es-pagination",attrs:{background:"",layout:"prev, pager, next","page-size":e.pageSize,"current-page":e.pageNum,total:e.total},on:{"current-change":e.currentChange}})],1):e._e(),e.serachResultList.length?e._e():t("div",{staticClass:"no-data"},[t("el-empty",{attrs:{description:e.$t("message.home.noData")}})],1)],1)])],1),t("EsFooterView")],1)}),[],!1,null,null,null);t.default=p.exports},fdeb:function(e,t,a){}}]);
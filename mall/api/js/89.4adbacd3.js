"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[89],{40955:function(e,t,i){i.r(t),i.d(t,{default:function(){return h}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"complaint"},[t("van-nav-bar",{attrs:{"safe-area-inset-top":"",fixed:"",title:e.$t("投诉卖家"),"left-arrow":""},on:{"click-left":e.onClickLeft}}),t("div",{staticClass:"h46",staticStyle:{width:"100%"}}),t("el-form",{ref:"ruleForm",staticClass:"acc_form",attrs:{"label-position":"top","label-width":"80px",model:e.formData,rules:e.rules}},[t("el-form-item",{attrs:{label:e.$t("投诉类型"),prop:"type"}},[t("el-select",{attrs:{placeholder:e.$t("请选择投诉类型")},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},e._l(e.complaintType,(function(i){return t("el-option",{key:i.value,attrs:{label:e.$t(i.label),value:i.value}})})),1)],1),t("el-form-item",{attrs:{label:e.$t("截图、凭证"),prop:"images"}},[t("van-uploader",{attrs:{multiple:""},model:{value:e.formData.images,callback:function(t){e.$set(e.formData,"images",t)},expression:"formData.images"}})],1),t("el-form-item",{attrs:{label:e.$t("投诉原因"),prop:"reason"}},[t("el-input",{attrs:{type:"textarea",maxlength:"1000",autosize:{minRows:6,maxRows:8}},model:{value:e.formData.reason,callback:function(t){e.$set(e.formData,"reason","string"===typeof t?t.trim():t)},expression:"formData.reason"}})],1)],1),t("div",{staticClass:"sub_btn",on:{click:e.submitForm}},[e._v(e._s(e.$t("提交")))])],1)},r=[],n=(i(42511),i(29538)),s=i(63822),l=i(15941),o={components:{[n.Z.name]:n.Z},data(){return{itemName:"INT Overstock",formData:{reason:"",images:[],type:""},complaintType:[{label:"长时间不发货",value:"1"},{label:"卖家服务态度恶劣",value:"2"},{label:"卖家交易欺诈",value:"3"},{label:"卖家承诺不履行",value:"4"},{label:"其他",value:"5"}],pwtStatus:!1,rules:{type:[{required:!0,message:this.$t("请选择投诉类型"),trigger:"change"}],reason:[{required:!0,message:this.$t("请选择投诉原因"),trigger:"blur"}],images:[{required:!0,message:this.$t("请上传截图、凭证"),trigger:"change"}]}}},computed:{...(0,s.Se)({userInfo:"userInfo"})},methods:{onClickLeft(){this.$router.go(-1)},handleRemove(e,t){l.log(e,t)},handlePictureCardPreview(e){l.log("file ::->",e)},submitForm(){this.$refs.ruleForm.validate((e=>{if(!e)return l.log("error submit!!"),!1;alert("submit!")}))}}},u=o,c=i(1001),f=(0,c.Z)(u,a,r,!1,null,"3c327aec",null),h=f.exports},35065:function(e,t,i){i.d(t,{f:function(){return a}});var a={inject:{vanField:{default:null}},watch:{value:function(){var e=this.vanField;e&&(e.resetValidation(),e.validateWithTrigger("onChange"))}},created:function(){var e=this.vanField;e&&!e.children&&(e.children=this)}}},29538:function(e,t,i){i.d(t,{Z:function(){return k}});var a=i(39299),r=i(53370),n=i(32667),s=i(80408);function l(e){return Array.isArray(e)?e:[e]}function o(e,t){return new Promise((function(i){if("file"!==t){var a=new FileReader;a.onload=function(e){i(e.target.result)},"dataUrl"===t?a.readAsDataURL(e):"text"===t&&a.readAsText(e)}else i(null)}))}function u(e,t){return l(e).some((function(e){return!!e&&((0,r.mf)(t)?t(e):e.size>t)}))}var c=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;function f(e){return c.test(e)}function h(e){return!!e.isImage||(e.file&&e.file.type?0===e.file.type.indexOf("image"):e.url?f(e.url):!!e.content&&0===e.content.indexOf("data:image"))}var d=i(35065),p=i(19858),m=i(84639),v=i(94958),g=i(76471),w=(0,n.d)("uploader"),b=w[0],y=w[1],k=b({inheritAttrs:!1,mixins:[d.f],model:{prop:"fileList"},props:{disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,uploadText:String,afterRead:Function,beforeRead:Function,beforeDelete:Function,previewSize:[Number,String],previewOptions:Object,name:{type:[Number,String],default:""},accept:{type:String,default:"image/*"},fileList:{type:Array,default:function(){return[]}},maxSize:{type:[Number,String,Function],default:Number.MAX_VALUE},maxCount:{type:[Number,String],default:Number.MAX_VALUE},deletable:{type:Boolean,default:!0},showUpload:{type:Boolean,default:!0},previewImage:{type:Boolean,default:!0},previewFullImage:{type:Boolean,default:!0},imageFit:{type:String,default:"cover"},resultType:{type:String,default:"dataUrl"},uploadIcon:{type:String,default:"photograph"}},computed:{previewSizeWithUnit:function(){return(0,s.N)(this.previewSize)},value:function(){return this.fileList}},created:function(){this.urls=[]},beforeDestroy:function(){this.urls.forEach((function(e){return URL.revokeObjectURL(e)}))},methods:{getDetail:function(e){return void 0===e&&(e=this.fileList.length),{name:this.name,index:e}},onChange:function(e){var t=this,i=e.target.files;if(!this.disabled&&i.length){if(i=1===i.length?i[0]:[].slice.call(i),this.beforeRead){var a=this.beforeRead(i,this.getDetail());if(!a)return void this.resetInput();if((0,r.tI)(a))return void a.then((function(e){e?t.readFile(e):t.readFile(i)})).catch(this.resetInput)}this.readFile(i)}},readFile:function(e){var t=this,i=u(e,this.maxSize);if(Array.isArray(e)){var a=this.maxCount-this.fileList.length;e.length>a&&(e=e.slice(0,a)),Promise.all(e.map((function(e){return o(e,t.resultType)}))).then((function(a){var r=e.map((function(e,t){var i={file:e,status:"",message:""};return a[t]&&(i.content=a[t]),i}));t.onAfterRead(r,i)}))}else o(e,this.resultType).then((function(a){var r={file:e,status:"",message:""};a&&(r.content=a),t.onAfterRead(r,i)}))},onAfterRead:function(e,t){var i=this;this.resetInput();var a=e;if(t){var r=e;Array.isArray(e)?(r=[],a=[],e.forEach((function(e){e.file&&(u(e.file,i.maxSize)?r.push(e):a.push(e))}))):a=null,this.$emit("oversize",r,this.getDetail())}var n=Array.isArray(a)?Boolean(a.length):Boolean(a);n&&(this.$emit("input",[].concat(this.fileList,l(a))),this.afterRead&&this.afterRead(a,this.getDetail()))},onDelete:function(e,t){var i,a=this,n=null!=(i=e.beforeDelete)?i:this.beforeDelete;if(n){var s=n(e,this.getDetail(t));if(!s)return;if((0,r.tI)(s))return void s.then((function(){a.deleteFile(e,t)})).catch(r.ZT)}this.deleteFile(e,t)},deleteFile:function(e,t){var i=this.fileList.slice(0);i.splice(t,1),this.$emit("input",i),this.$emit("delete",e,this.getDetail(t))},resetInput:function(){this.$refs.input&&(this.$refs.input.value="")},onClickUpload:function(e){this.$emit("click-upload",e)},onPreviewImage:function(e){var t=this;if(this.previewFullImage){var i=this.fileList.filter((function(e){return h(e)})),r=i.map((function(e){return e.file&&!e.url&&"failed"!==e.status&&(e.url=URL.createObjectURL(e.file),t.urls.push(e.url)),e.url}));this.imagePreview=(0,g.Z)((0,a.Z)({images:r,startPosition:i.indexOf(e),onClose:function(){t.$emit("close-preview")}},this.previewOptions))}},closeImagePreview:function(){this.imagePreview&&this.imagePreview.close()},chooseFile:function(){this.disabled||this.$refs.input&&this.$refs.input.click()},genPreviewMask:function(e){var t=this.$createElement,i=e.status,a=e.message;if("uploading"===i||"failed"===i){var n="failed"===i?t(p.Z,{attrs:{name:"close"},class:y("mask-icon")}):t(v.Z,{class:y("loading")}),s=(0,r.Xq)(a)&&""!==a;return t("div",{class:y("mask")},[n,s&&t("div",{class:y("mask-message")},[a])])}},genPreviewItem:function(e,t){var i,r,n,s=this,l=this.$createElement,o=null!=(i=e.deletable)?i:this.deletable,u="uploading"!==e.status&&o,c=u&&l("div",{class:y("preview-delete"),on:{click:function(i){i.stopPropagation(),s.onDelete(e,t)}}},[l(p.Z,{attrs:{name:"cross"},class:y("preview-delete-icon")})]),f=this.slots("preview-cover",(0,a.Z)({index:t},e)),d=f&&l("div",{class:y("preview-cover")},[f]),v=null!=(r=e.previewSize)?r:this.previewSize,g=null!=(n=e.imageFit)?n:this.imageFit,w=h(e)?l(m.Z,{attrs:{fit:g,src:e.content||e.url,width:v,height:v,lazyLoad:this.lazyLoad},class:y("preview-image"),on:{click:function(){s.onPreviewImage(e)}}},[d]):l("div",{class:y("file"),style:{width:this.previewSizeWithUnit,height:this.previewSizeWithUnit}},[l(p.Z,{class:y("file-icon"),attrs:{name:"description"}}),l("div",{class:[y("file-name"),"van-ellipsis"]},[e.file?e.file.name:e.url]),d]);return l("div",{class:y("preview"),on:{click:function(){s.$emit("click-preview",e,s.getDetail(t))}}},[w,this.genPreviewMask(e),c])},genPreviewList:function(){if(this.previewImage)return this.fileList.map(this.genPreviewItem)},genUpload:function(){var e=this.$createElement;if(!(this.fileList.length>=this.maxCount)){var t,i=this.slots(),r=this.readonly?null:e("input",{attrs:(0,a.Z)({},this.$attrs,{type:"file",accept:this.accept,disabled:this.disabled}),ref:"input",class:y("input"),on:{change:this.onChange}});if(i)return e("div",{class:y("input-wrapper"),key:"input-wrapper",on:{click:this.onClickUpload}},[i,r]);if(this.previewSize){var n=this.previewSizeWithUnit;t={width:n,height:n}}return e("div",{directives:[{name:"show",value:this.showUpload}],class:y("upload",{readonly:this.readonly}),style:t,on:{click:this.onClickUpload}},[e(p.Z,{attrs:{name:this.uploadIcon},class:y("upload-icon")}),this.uploadText&&e("span",{class:y("upload-text")},[this.uploadText]),r])}}},render:function(){var e=arguments[0];return e("div",{class:y()},[e("div",{class:y("wrapper",{disabled:this.disabled})},[this.genPreviewList(),this.genUpload()])])}})},42511:function(e,t,i){i(22184),i(74048),i(14106),i(4127),i(96073),i(44174),i(43874),i(45353),i(86051),i(57462)}}]);
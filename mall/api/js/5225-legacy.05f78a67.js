"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[5225],{15225:function(e,t,i){i.r(t),i.d(t,{default:function(){return R}});var a,r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"merchantSettled"},[t("van-nav-bar",{ref:"header",attrs:{"safe-area-inset-top":"",title:e.$t("贷款申请"),"left-arrow":"",fixed:""},on:{"click-left":function(t){return e.$router.go(-1)}}}),t("div",{staticClass:"merchantSettled-wap"},[t("div",{staticClass:"step-div"},[t("div",[t("div",{staticClass:"content content2"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-position":"top","label-width":"200px"}},[t("el-form-item",{attrs:{label:e.$t("申请人"),prop:"realName"}},[t("el-input",{attrs:{placeholder:e.$t("真实姓名"),clearable:"",maxlength:100},model:{value:e.ruleForm.realName,callback:function(t){e.$set(e.ruleForm,"realName",t)},expression:"ruleForm.realName"}})],1),t("el-form-item",{attrs:{label:e.$t("贷款期限"),prop:"creditPeriod"}},[t("el-select",{attrs:{placeholder:e.$t("请选择贷款期限")},on:{change:e.handleSelectChange},model:{value:e.ruleForm.creditPeriod,callback:function(t){e.$set(e.ruleForm,"creditPeriod",t)},expression:"ruleForm.creditPeriod"}},e._l(e.creditPeriodList,(function(e){return t("el-option",{key:e.value,style:e.dis&&{color:"#999"},attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:e.$t("申请金额"),prop:"applyAmount"}},[t("el-input",{attrs:{placeholder:e.amountMin+"-"+e.amountMax,type:"number",clearable:""},on:{input:e.handleInput,change:e.handleChange},model:{value:e.ruleForm.applyAmount,callback:function(t){e.$set(e.ruleForm,"applyAmount",t)},expression:"ruleForm.applyAmount"}})],1),t("el-form-item",{attrs:{label:e.$t("贷款利率"),prop:"interestRate"}},[t("el-input",{attrs:{placeholder:100*e.rate+"%",disabled:""}})],1),t("el-form-item",{attrs:{label:e.$t("放款方式"),prop:"loanMethod"}},[t("el-input",{attrs:{placeholder:e.$t("账户余额"),disabled:""}})],1),t("el-form-item",{attrs:{label:e.$t("国籍"),prop:"countryId"}},[t("el-select",{attrs:{filterable:"",placeholder:e.$t("请选择"),"no-data-text":e.$t("暂无数据"),"no-match-text":e.$t("暂无数据"),"loading-text":e.$t("加载中")},on:{change:e.onCountryChange},model:{value:e.countryName,callback:function(t){e.countryName=t},expression:"countryName"}},e._l(e.countryList,(function(e){return t("el-option",{key:e.id,attrs:{"value-key":"countryName",label:e.countryName,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:e.$t("证件号码/护照号码"),prop:"identification"}},[t("el-input",{attrs:{placeholder:e.$t("请输入证件号码或者护照号"),clearable:"",maxlength:50},on:{change:e.idCartChange},model:{value:e.ruleForm.identification,callback:function(t){e.$set(e.ruleForm,"identification",t)},expression:"ruleForm.identification"}})],1),t("el-form-item",{staticClass:"el-form-required-box",attrs:{label:e.$t("证件照/上传护照")}},[t("span",{staticClass:"required"},[e._v("*")]),t("div",{staticClass:"uploder-center"},[t("div",{staticClass:"uploder-two-wrap"},[t("van-uploader",{attrs:{"after-read":e.afterRead2,"max-count":1,accept:".png,.jpg,.jpeg"},on:{delete:function(t){return e.handleDelete(2)}},model:{value:e.fileList2,callback:function(t){e.fileList2=t},expression:"fileList2"}},[e.creditId?t("img",{staticClass:"card_img",attrs:{src:e.ruleForm.imgCertificateFace,alt:""}}):e._e()]),t("div",{staticClass:"tips"},[e._v(e._s(e.$t("证件正面")))])],1),t("div",{staticClass:"uploder-two-wrap"},[t("van-uploader",{attrs:{"after-read":e.afterRead3,"max-count":1,accept:".png,.jpg,.jpeg"},on:{delete:function(t){return e.handleDelete(3)}},model:{value:e.fileList3,callback:function(t){e.fileList3=t},expression:"fileList3"}},[e.creditId?t("img",{staticClass:"card_img",attrs:{src:e.ruleForm.imgCertificateBack,alt:""}}):e._e()]),t("div",{staticClass:"tips"},[e._v(e._s(e.$t("证件反面")))])],1),t("div",{staticClass:"uploder-two-wrap"},[t("van-uploader",{attrs:{"after-read":e.afterRead4,"max-count":1,accept:".png,.jpg,.jpeg"},on:{delete:function(t){return e.handleDelete(4)}},model:{value:e.fileList4,callback:function(t){e.fileList4=t},expression:"fileList4"}},[e.creditId?t("img",{staticClass:"card_img",attrs:{src:e.ruleForm.imgCertificateHand,alt:""}}):e._e()]),t("div",{staticClass:"tips"},[e._v(e._s(e.$t("手持证件照")))])],1)]),t("div",{staticStyle:{display:"flex","flex-direction":"column"}},[t("div",{staticClass:"el-form-item__label",staticStyle:{"margin-bottom":"-26px"}},[e._v(e._s(e.$t("拍摄示例")))]),t("div",{staticClass:"correct-warp"},[t("img",{attrs:{src:i(73700)}}),t("img",{attrs:{src:i(78431)}}),t("img",{attrs:{src:i(84131)}})])])])],1)],1),t("div",{staticClass:"checkout_box"},[t("van-checkbox",{attrs:{shape:"square"},model:{value:e.isAgree,callback:function(t){e.isAgree=t},expression:"isAgree"}},[e._v(e._s(e.$t("我已阅读并同意")))]),t("span",{on:{click:e.handleJump}},[e._v("《"+e._s(e.$t("借款协议"))+"》")])],1),t("div",{staticClass:"bottom"},[t("van-button",{staticClass:"button",attrs:{type:"primary",color:e.mainColor},on:{click:e.requireSellerRegister}},[e._v(e._s(e.$t("提交申请"))+" ")])],1)])])])],1)},n=[],l=i(51907),o=i(85617),s=i(54503),c=(i(55601),i(10521)),u=i(59018),d=i.n(u),m=i(47149),f=i.n(m),p=(i(12144),i(39907)),h=i(92661),g=i.n(h),v=i(20121),C=i.n(v),y=i(46069),$=i.n(y),b=(i(78140),i(39661)),F=(i(88850),i(8280)),x=i(60091),Z=i.n(x),k=i(94364),w=i.n(k),L=i(56024),_=i.n(L),A=(i(34284),i(49693),i(60228),i(47522),i(278),i(34338),i(64043),i(57267),i(25728),i(58030)),I=i(53169),q=i(49425),N=i(81273),P={data:function(){var e;return{mainColor:"#f89900",isAlphanumeric:q.JG,creditPeriodList:[],lendableDays:[],defaultRate:[],amountMax:"",amountMin:"",rate:"",priceFormat:q.XY,getStorage:q.cF,isCutting:!1,imgFile:"",ratioWidth:1,ratioHeight:1,step:1,checked:!1,screenWidth:document.body.clientWidth,type:"Email",uploadCheckIndex:1,areaCode:1,isAgree:!1,countryName:"",ruleForm:{creditPeriod:"",realName:"",imgCertificateFace:"",imgCertificateBack:"",imgCertificateHand:"",countryId:"",applyAmount:"",identification:""},labelPosition:"top",isCode:!0,rules:{identification:[{required:!0,message:this.$t("请输入证件号码或者护照号"),trigger:"blur"}],imgCertificateFace:[{required:!0,message:this.$t("请上传身份证正面"),trigger:"blur"}],imgCertificateBack:[{required:!0,message:this.$t("请上传身份证反面"),trigger:"blur"}],imgCertificateHand:[{required:!0,message:this.$t("请上传手持身份证"),trigger:"blur"}],realName:[{required:!0,message:this.$t("请输入真实姓名"),trigger:"blur"},{pattern:/^\S.*\S$|(^\S{0,1}\S$)/,message:this.$t("首尾不能为空格"),trigger:"blur"}],applyAmount:[{required:!0,message:this.$t("请输入金额"),trigger:"blur"}],creditPeriod:[{required:!0,message:this.$t("请选择贷款期限"),trigger:"change"}],countryId:[{required:!0,message:this.$t("请选择国家"),trigger:"change"}]},options:[{label:this.$t("身份证"),value:"身份证"},{label:this.$t("护照"),value:"护照"}],fileList1:[],fileList2:[],fileList3:[],fileList4:[],tabList:[this.$t("电子邮箱"),this.$t("手机号")],tabIndex:0,lang:[{title:"简体中文",key:"cn",icon:i(90876)},{title:"English",key:"en",icon:i(75740)},{title:"繁体中文",key:"tw",icon:i(44012)}],countryList:[],pageDiaCode:!0,creditId:(null===(e=this.$route.query)||void 0===e?void 0:e.creditId)||null}},components:(a={},(0,s.Z)(a,_().name,_()),(0,s.Z)(a,w().name,w()),(0,s.Z)(a,Z().name,Z()),(0,s.Z)(a,F.Z.name,F.Z),(0,s.Z)(a,b.Z.name,b.Z),(0,s.Z)(a,$().name,$()),(0,s.Z)(a,C().name,C()),(0,s.Z)(a,g().name,g()),(0,s.Z)(a,p.Z.name,p.Z),(0,s.Z)(a,f().name,f()),(0,s.Z)(a,d().name,d()),(0,s.Z)(a,c.Z.name,c.Z),a),created:function(){this.requireApplyLoanConfig(),(null===this||void 0===this?void 0:this.creditId)&&this.requireBeforereApply(this.creditId),this.requestGetCountryList()},methods:{requestGetCountryList:function(){var e=this;return(0,o.Z)((0,l.Z)().mark((function t(){var i,a;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,I.ZO)();case 2:i=t.sent,a=i.data,e.countryList=a;case 5:case"end":return t.stop()}}),t)})))()},onCountryChange:function(e){this.ruleForm.countryId=e},requireApplyLoanConfig:function(){var e=this;return(0,o.Z)((0,l.Z)().mark((function t(){var i;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,I.cU)();case 2:i=t.sent,i.allLendableDays.forEach((function(t){i.lendableDays.forEach((function(i){e.creditPeriodList.push({label:t+e.$t("天"),value:t,dis:t!==i})}))})),e.creditPeriodList=e.deduplication(e.creditPeriodList,"value"),e.creditPeriodList.forEach((function(e){i.lendableDays.forEach((function(t){e.value==t&&(e.dis=!1)}))})),e.lendableDays=i.lendableDays,e.amountMax=i.amountMax,e.amountMin=i.amountMin,e.rate=i.rate;case 10:case"end":return t.stop()}}),t)})))()},requireBeforereApply:function(e){var t=this;return(0,o.Z)((0,l.Z)().mark((function i(){var a;return(0,l.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,(0,I.Ts)({creditId:e});case 2:a=i.sent,t.ruleForm.realName=a.realName,t.ruleForm.applyAmount=a.applyAmount,t.ruleForm.creditPeriod=a.creditPeriod+"",t.handleSelectChange(a.creditPeriod+""),t.rate=a.creditRate,t.ruleForm.countryId=a.countryId,t.ruleForm.identification=a.identification,t.ruleForm.imgCertificateFace=a.imgCertificateFace,t.ruleForm.imgCertificateBack=a.imgCertificateBack,t.ruleForm.imgCertificateHand=a.imgCertificateHand;case 13:case"end":return i.stop()}}),i)})))()},deduplication:function(e,t){var i={};return e.reduce((function(e,a){return!i[a[t]]&&(i[a[t]]=e.push(a)),e}),[])},handleJump:function(){window.plus?window.plus.runtime.openURL("".concat(window.origin,"/promote/#/contract?lang=").concat((0,q.cF)("lang"))):window.open("".concat(window.origin,"/promote/#/contract?lang=").concat((0,q.cF)("lang")))},idCartChange:function(){this.isAlphanumeric(this.ruleForm.identification)||(this.$notify(this.$t("证件号码/护照号码验证未通过")),this.ruleForm.identification="")},handleDelete:function(e){this["fileList".concat(e)]=[]},requireSellerRegister:function(){var e=this;this.$refs["ruleForm"].validate((function(t){if(!t)return!1;if(e.ruleForm.imgCertificateFace&&e.ruleForm.imgCertificateBack&&e.ruleForm.imgCertificateHand){if(!e.isAgree)return e.$notify(e.$t("请阅读并同意借款协议"));e.creditId&&(e.ruleForm.creditId=e.creditId),(0,I.Ye)(e.ruleForm).then((function(t){e.$notify(e.$t("申请成功"),"success"),e.$router.replace("/loan/my")}))["catch"]((function(e){N.log("err ::->",e)}))}else e.$notify(e.$t("请上传证件照片"))}))},handleSelectChange:function(e){var t=this.lendableDays.find((function(t){return t==e}));!t&&this.$notify(this.$t("未满足资质条件")),!t&&(this.ruleForm.creditPeriod="")},handleInput:function(){this.ruleForm.applyAmount>this.amountMax?this.ruleForm.applyAmount=this.amountMax:this.ruleForm.applyAmount<1&&(this.ruleForm.applyAmount="")},handleChange:function(){this.ruleForm.applyAmount<this.amountMin&&(this.ruleForm.applyAmount="",this.$notify("".concat(this.$t("申请金额不能小于")).concat(this.amountMin)))},openNationality:function(e){this.isCode=1===e,this.$refs.controlChild.open()},afterRead2:function(e){var t=this;c.Z.loading({duration:0,message:this.$t("上传中"),forbidClick:!0});var i=new FormData;i.append("file",e.file),i.append("moduleName","selle"),(0,A.VU)(i).then((function(e){t.ruleForm.imgCertificateFace=e}))["catch"]((function(e){t.fileList2=[],c.Z.fail(t.$t("上传失败"))}))["finally"]((function(){c.Z.clear()}))},afterRead3:function(e){var t=this;c.Z.loading({duration:0,message:this.$t("上传中"),forbidClick:!0});var i=new FormData;i.append("file",e.file),i.append("moduleName","selle"),(0,A.VU)(i).then((function(e){t.ruleForm.imgCertificateBack=e}))["catch"]((function(e){t.fileList3=[],c.Z.fail(t.$t("上传失败"))}))["finally"]((function(){c.Z.clear()}))},afterRead4:function(e){var t=this;c.Z.loading({duration:0,message:this.$t("上传中"),forbidClick:!0});var i=new FormData;i.append("file",e.file),i.append("moduleName","selle"),(0,A.VU)(i).then((function(e){t.ruleForm.imgCertificateHand=e}))["catch"]((function(e){t.fileList4=[],c.Z.fail(t.$t("上传失败"))}))["finally"]((function(){c.Z.clear()}))}}},D=P,S=i(1001),M=(0,S.Z)(D,r,n,!1,null,"74d71d0d",null),R=M.exports}}]);
"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[7761],{4883:function(t,e,i){i.r(e),i.d(e,{default:function(){return C}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mall"},[e("van-nav-bar",{attrs:{"safe-area-inset-top":"",fixed:"",title:t.$t("购物车")}}),e("div",{staticStyle:{width:"100%",height:"46px"}}),t.list.length>0?[t._l(t.list,(function(s,n){return e("div",{key:s.key,staticClass:"mall-detail"},[e("van-checkbox",{staticClass:"mall-title",on:{click:function(e){return t.handleCheckItemAll(s.checkedAll,n)}},model:{value:s.checkedAll,callback:function(e){t.$set(s,"checkedAll",e)},expression:"item.checkedAll"}},[t._v(t._s(s.sort))]),e("div",{staticClass:"mall-item"},[e("van-checkbox-group",{on:{change:t.mathMoney},model:{value:s.checkedValue,callback:function(e){t.$set(s,"checkedValue",e)},expression:"item.checkedValue"}},[t._l(s.child,(function(i,l){return[l<s.moreNum?e("van-checkbox",{key:l,staticClass:"mall-item-checkbox",attrs:{name:i.tempId},on:{click:function(e){return t.handlecheckItemClick(s,n,l)}},model:{value:i.selected,callback:function(e){t.$set(i,"selected",e)},expression:"i.selected"}},[e("div",{staticClass:"mall-item-child",on:{touchstart:function(e){return t.handlerTouchstart(n,l,i.id)},touchmove:t.handleClearInterval,touchend:t.handleClearInterval}},[e("div",{staticClass:"mall-item-child-img"},[e("img",{staticClass:"img",attrs:{src:i.coverImg||i.img}})]),e("div",{staticStyle:{width:"75%","margin-left":"6px"}},[e("p",{staticClass:"describe"},[t._v(" "+t._s(i.describe?.length>43?i.describe.slice(0,43)+"...":i.describe)+" ")]),i.attributes?e("p",{staticClass:"sku_box"},t._l(i.attributes.attrs,(function(i,s){return e("span",{key:s,staticClass:"attribute"},[t._v(" "+t._s(i.attrName)+":"+t._s(i.attrValueName))])})),0):t._e(),e("div",{staticClass:"price"},[e("span",[t._v(" $ "+t._s(t.priceFormat(i.price))+" ")]),e("div",{staticClass:"stepper",on:{click:function(e){return e.stopPropagation(),t.mathMoney.apply(null,arguments)}}},[e("van-stepper",{attrs:{"disable-input":!0,disabled:0==s.checkedValue.length,max:t.maxBuyNum,integer:""},on:{change:t.mathMoney,plus:function(e){return t.handleStepper("add")},minus:function(e){return t.handleStepper("minus")}},model:{value:i.count,callback:function(e){t.$set(i,"count",e)},expression:"i.count"}})],1)])])])]):t._e()]})),e("div",{directives:[{name:"show",rawName:"v-show",value:s.child.length>1&&s.moreNum<s.child.length,expression:"item.child.length > 1 && item.moreNum < item.child.length\n                        "}],staticClass:"show-more",on:{click:function(t){s.moreNum+=2}}},[e("p",[t._v(t._s(t.$t("查看更多")))]),e("img",{attrs:{src:i(48457)}})])],2)],1)],1)})),e("div",{staticClass:"mall-bottom"},[t.isNewLine?t._e():e("van-checkbox",{staticClass:"checkbox_cn",on:{click:t.handleCheckAll},model:{value:t.checkedAllTotol,callback:function(e){t.checkedAllTotol=e},expression:"checkedAllTotol"}},[t._v(" "+t._s(t.$t("全选"))+" ")]),e("div",{staticClass:"mid"},[t.isNewLine?e("van-checkbox",{staticClass:"checkbox",on:{click:t.handleCheckAll},model:{value:t.checkedAllTotol,callback:function(e){t.checkedAllTotol=e},expression:"checkedAllTotol"}},[t._v(" "+t._s(t.$t("全选"))+" ")]):t._e(),e("span",[t._v(t._s(t.$t("总计"))+" "),e("span",{staticClass:"price"},[t._v("$"+t._s(t.priceFormat(t.total.money)))])]),e("span",[t._v(t._s(t.$t("选择"))+" "),e("span",{staticClass:"piece"},[t._v(t._s(t.total.piece))]),t._v(" "+t._s(t.$t("个")))])],1),e("van-button",{staticStyle:{"margin-right":"10px"},attrs:{color:"rgba(233, 157, 56, 1)"},on:{click:t.toBuy}},[t._v(" "+t._s(t.$t("立即购买"))+" ")])],1)]:e("div",{staticClass:"mall-empty"},[e("img",{staticClass:"img",attrs:{src:i(907)}}),e("p",{staticClass:"text"},[t._v(t._s(t.$t("购物车空空")))]),e("router-link",{attrs:{to:"/commodity"}},[e("van-button",{staticClass:"button",attrs:{color:"rgba(233, 157, 56, 1)"}},[t._v(t._s(t.$t("立即购物")))])],1)],1),e("div",{staticStyle:{width:"100%",height:"118px"}})],2)},n=[],l=(i(37850),i(88848)),o=(i(23324),i(75705)),c=(i(33018),i(69057)),a=(i(43670),i(24861)),r=(i(40922),i(45931)),h=(i(77987),i(84319)),d=(i(82012),i(64269)),u=i(14970),m=i(36369),f=i(10408),g={setup(){const t=(0,m.ref)(["a","b"]),e=(0,m.ref)(!1),i=(0,m.ref)(!0),s=(0,m.ref)(null),n=()=>{s.value.toggleAll(!0)};return{checked:t,checkedAll:e,checkAll:n,checkedAllTotol:i,checkboxGroup:s}},data(){return{priceFormat:f.XY,refreshing:!1,loop:0,list:[],total:{},lang:(0,f.cF)("lang"),isNewLine:["it","de","ms","pt","es","ru","el","tr","fr"].includes((0,f.cF)("lang")),maxBuyNum:localStorage.getItem("maxBuyNum")||500}},components:{[d.Z.name]:d.Z,[h.Z.name]:h.Z,[r.Z.name]:r.Z,[a.Z.name]:a.Z,[c.Z.name]:c.Z,[o.Z.Component.name]:o.Z.Component},created(){(0,f.bg)()&&this.getCartlist(),this.mathMoney()},methods:{handlerTouchstart(t,e,i){let s=this.$ls.get("productList")||[];this.loop=setTimeout((()=>{this.loop=0,o.Z.confirm({title:this.$t("提示"),message:this.$t("确认移除商品吗?"),confirmButtonText:this.$t("确认"),cancelButtonText:this.$t("取消")}).then((()=>{1==this.list[t].child.length?this.list.splice(t,1):this.list[t].child.splice(e,1),s.forEach(((t,e)=>{t.id==i&&s.splice(e,1)})),this.$store.state.qiangdan.count=s.length,this.$ls.set("productList",s),this.getCartlist()}))}),500)},handleClearInterval(){clearTimeout(this.loop),this.loop=0},handleStepper(t){let e=this.total.piece;"add"==t?e+=1:e-=1,this.$store.state.qiangdan.count=e},mathMoney(){let t=this.$ls.get("productList")||[];this.total={money:0,piece:0},this.list.forEach((e=>{this.total.piece=this.total.piece+=e.checkedValue.length,e.child.length>0&&e.child.forEach((i=>{t.forEach((t=>{t.id==i.id&&(t.count=i.count)})),e.checkedValue.includes(i.tempId)&&(this.total.money+=i.price.toFixed(2)*i.count)}))})),this.total.money=this.total.money.toFixed(2),this.$ls.set("productList",t)},getCartlist(){this.list=[];let t=this.$ls.get("productList")||[];if(t&&t.length>0){t.forEach((t=>{if(this.list.length>0)this.list.forEach((e=>{let i=[];if(t.canSelectAttributes&&(i=t.canSelectAttributes.skus.filter((e=>e.skuId==t.skuId))[0]),e.sort==t.storeName){let i=[];t.canSelectAttributes&&(i=t.canSelectAttributes.skus.filter((e=>e.skuId==t.skuId))[0]);let s={coverImg:t.coverImg,skuId:t.skuId,img:t.imgUrl1||this.$defaultGoodsImage,price:t.discountPrice?t.discountPrice:t.sellingPrice,describe:t.name,count:t.count,id:`${t.id}`,tempId:t.tempId,attributes:i,freightAmount:t.freightAmount||0,goodsTax:t.goodsTax||0,selected:!0};e.child.unshift(s)}else{let e={key:t.sellerId,sort:t.storeName,checkedAll:!0,checkedValue:[],moreNum:2,child:[]},s={coverImg:t.coverImg,skuId:t.skuId,img:t.imgUrl1||this.$defaultGoodsImage,price:t.discountPrice?t.discountPrice:t.sellingPrice,describe:t.name,count:t.count,id:`${t.id}`,tempId:t.tempId,freightAmount:t.freightAmount||0,goodsTax:t.goodsTax||0,selected:!0,attributes:i};e.child.unshift(s),this.list.push(e)}}));else{let e=[];t.canSelectAttributes&&(e=t.canSelectAttributes.skus.filter((e=>e.skuId==t.skuId))[0]);let i={key:t.sellerId,sort:t.storeName,checkedAll:!0,checkedValue:[],moreNum:2,child:[]},s={coverImg:t.coverImg,skuId:t.skuId,img:t.imgUrl1||this.$defaultGoodsImage,price:t.discountPrice?t.discountPrice:t.sellingPrice,describe:t.name,count:t.count,id:t.id,freightAmount:t.freightAmount||0,goodsTax:t.goodsTax||0,selected:!0,attributes:e};i.child.unshift(s),this.list.unshift(i)}}));for(var e=0;e<this.list.length-1;e++)for(var i=e+1;i<this.list.length;i++)this.list[e].sort==this.list[i].sort&&(this.list.splice(i,1),i--);this.$ls.set("cartList",this.list)}this.handleCheckAll()},toBuy(){const t=this.list.find((t=>t.child.find((t=>t.selected))));if(!t)return(0,l.Z)(this.$t("未选中任何商品"));const e=[];this.list.forEach((t=>{t.checkedAll&&(t.child=t.child.filter((t=>t.selected)),e.push(t))})),this.$ls.set("cartList",e),this.list=[],this.$router.push("/orderComnfirmation?isCart=1")},handlecheckItemClick(t,e,i){this.list[e].child[i].selected=!this.list[e].child[i].selected;let s=0,n=0,l=this.list[e].child.length;this.list[e].child.forEach((t=>{t.selected?s+=1:n+=1,0!=s&&(this.list[e].checkedAll=!0),n==l&&(this.list[e].checkedAll=!1)}))},handleCheckItemAll(t,e){this.list[e].checkedValue=[],this.$nextTick((()=>{this.list[e].child.forEach(((i,s)=>{i.selected=t,t&&this.list[e].checkedValue.push(i.tempId)}))}))},handleCheckAll(){this.list.forEach((t=>{t.checkedValue=[],t.checkedAll=this.checkedAllTotol,t.child?.forEach((e=>{e.selected=this.checkedAllTotol,this.checkedAllTotol&&t.checkedValue.push(e.tempId)}))}))},onRefresh(){this.finished=!1,this.list=[],this.loading=!0,this.onLoad()},onLoad(){this.refreshing&&(this.list=[],this.refreshing=!1),this.getCartlist()},qiehuan(){this.list=[],this.loading=!1,this.finished=!1,this.refreshing=!1,this.page_no=0},goods_points_action(){this.show=!0,(0,u.cy)({}).then((t=>{this.show=!1,this.goods_points_action_data=t.points}))},touzi(t){this.$router.push("/InvestmentDetails?goodsId="+t)},onClickLeft(){this.$router.push("/me")}},watch:{list:{handler(t){this.checkedAllTotol=t.every((t=>t.child.every((t=>t.selected))))},deep:!0}}},p=g,k=i(1001),v=(0,k.Z)(p,s,n,!1,null,"690e01b7",null),C=v.exports},75705:function(t,e,i){i.d(e,{Z:function(){return N}});var s,n=i(39299),l=i(36369),o=i(18701),c=i.n(o),a=i(53370),r=i(32667),h=i(80408),d=i(11047),u=i(32186),m=i(54398),f=i(66035),g=(0,r.d)("goods-action"),p=g[0],k=g[1],v=p({mixins:[(0,f.G)("vanGoodsAction")],props:{safeAreaInsetBottom:{type:Boolean,default:!0}},render:function(){var t=arguments[0];return t("div",{class:k({unfit:!this.safeAreaInsetBottom})},[this.slots()])}}),C=i(12250),b=(0,r.d)("goods-action-button"),y=b[0],x=b[1],$=y({mixins:[(0,f.j)("vanGoodsAction")],props:(0,n.Z)({},C.g2,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean}),computed:{isFirst:function(){var t=this.parent&&this.parent.children[this.index-1];return!t||t.$options.name!==this.$options.name},isLast:function(){var t=this.parent&&this.parent.children[this.index+1];return!t||t.$options.name!==this.$options.name}},methods:{onClick:function(t){this.$emit("click",t),(0,C.BC)(this.$router,this)}},render:function(){var t=arguments[0];return t(m.Z,{class:x([{first:this.isFirst,last:this.isLast},this.type]),attrs:{size:"large",type:this.type,icon:this.icon,color:this.color,loading:this.loading,disabled:this.disabled},on:{click:this.onClick}},[this.slots()||this.text])}}),A=(0,r.d)("dialog"),B=A[0],_=A[1],I=A[2],w=B({mixins:[(0,u.e)()],props:{title:String,theme:String,width:[Number,String],message:String,className:null,callback:Function,beforeClose:Function,messageAlign:String,cancelButtonText:String,cancelButtonColor:String,confirmButtonText:String,confirmButtonColor:String,showCancelButton:Boolean,overlay:{type:Boolean,default:!0},allowHtml:{type:Boolean,default:!0},transition:{type:String,default:"van-dialog-bounce"},showConfirmButton:{type:Boolean,default:!0},closeOnPopstate:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!1}},data:function(){return{loading:{confirm:!1,cancel:!1}}},methods:{onClickOverlay:function(){this.handleAction("overlay")},handleAction:function(t){var e=this;this.$emit(t),this.value&&(this.beforeClose?(this.loading[t]=!0,this.beforeClose(t,(function(i){!1!==i&&e.loading[t]&&e.onClose(t),e.loading.confirm=!1,e.loading.cancel=!1}))):this.onClose(t))},onClose:function(t){this.close(),this.callback&&this.callback(t)},onOpened:function(){var t=this;this.$emit("opened"),this.$nextTick((function(){var e;null==(e=t.$refs.dialog)||e.focus()}))},onClosed:function(){this.$emit("closed")},onKeydown:function(t){var e=this;if("Escape"===t.key||"Enter"===t.key){if(t.target!==this.$refs.dialog)return;var i={Enter:this.showConfirmButton?function(){return e.handleAction("confirm")}:a.ZT,Escape:this.showCancelButton?function(){return e.handleAction("cancel")}:a.ZT};i[t.key](),this.$emit("keydown",t)}},genRoundButtons:function(){var t=this,e=this.$createElement;return e(v,{class:_("footer")},[this.showCancelButton&&e($,{attrs:{size:"large",type:"warning",text:this.cancelButtonText||I("cancel"),color:this.cancelButtonColor,loading:this.loading.cancel},class:_("cancel"),on:{click:function(){t.handleAction("cancel")}}}),this.showConfirmButton&&e($,{attrs:{size:"large",type:"danger",text:this.confirmButtonText||I("confirm"),color:this.confirmButtonColor,loading:this.loading.confirm},class:_("confirm"),on:{click:function(){t.handleAction("confirm")}}})])},genButtons:function(){var t,e=this,i=this.$createElement,s=this.showCancelButton&&this.showConfirmButton;return i("div",{class:[d.k7,_("footer")]},[this.showCancelButton&&i(m.Z,{attrs:{size:"large",loading:this.loading.cancel,text:this.cancelButtonText||I("cancel"),nativeType:"button"},class:_("cancel"),style:{color:this.cancelButtonColor},on:{click:function(){e.handleAction("cancel")}}}),this.showConfirmButton&&i(m.Z,{attrs:{size:"large",loading:this.loading.confirm,text:this.confirmButtonText||I("confirm"),nativeType:"button"},class:[_("confirm"),(t={},t[d.a8]=s,t)],style:{color:this.confirmButtonColor},on:{click:function(){e.handleAction("confirm")}}})])},genContent:function(t,e){var i=this.$createElement;if(e)return i("div",{class:_("content")},[e]);var s=this.message,n=this.messageAlign;if(s){var l,o,a={class:_("message",(l={"has-title":t},l[n]=n,l)),domProps:(o={},o[this.allowHtml?"innerHTML":"textContent"]=s,o)};return i("div",{class:_("content",{isolated:!t})},[i("div",c()([{},a]))])}}},render:function(){var t=arguments[0];if(this.shouldRender){var e=this.message,i=this.slots(),s=this.slots("title")||this.title,n=s&&t("div",{class:_("header",{isolated:!e&&!i})},[s]);return t("transition",{attrs:{name:this.transition},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[t("div",{directives:[{name:"show",value:this.value}],attrs:{role:"dialog","aria-labelledby":this.title||e,tabIndex:0},class:[_([this.theme]),this.className],style:{width:(0,h.N)(this.width)},ref:"dialog",on:{keydown:this.onKeydown}},[n,this.genContent(s,i),"round-button"===this.theme?this.genRoundButtons():this.genButtons()])])}}});function T(t){return document.body.contains(t)}function S(){s&&s.$destroy(),s=new(l["default"].extend(w))({el:document.createElement("div"),propsData:{lazyRender:!1}}),s.$on("input",(function(t){s.value=t}))}function Z(t){return a.sk?Promise.resolve():new Promise((function(e,i){s&&T(s.$el)||S(),(0,n.Z)(s,Z.currentOptions,t,{resolve:e,reject:i})}))}Z.defaultOptions={value:!0,title:"",width:"",theme:null,message:"",overlay:!0,className:"",allowHtml:!0,lockScroll:!0,transition:"van-dialog-bounce",beforeClose:null,overlayClass:"",overlayStyle:null,messageAlign:"",getContainer:"body",cancelButtonText:"",cancelButtonColor:null,confirmButtonText:"",confirmButtonColor:null,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1,callback:function(t){s["confirm"===t?"resolve":"reject"](t)}},Z.alert=Z,Z.confirm=function(t){return Z((0,n.Z)({showCancelButton:!0},t))},Z.close=function(){s&&(s.value=!1)},Z.setDefaultOptions=function(t){(0,n.Z)(Z.currentOptions,t)},Z.resetDefaultOptions=function(){Z.currentOptions=(0,n.Z)({},Z.defaultOptions)},Z.resetDefaultOptions(),Z.install=function(){l["default"].use(w)},Z.Component=w,l["default"].prototype.$dialog=Z;var N=Z},23324:function(t,e,i){i(22184),i(74048),i(14106),i(4127),i(44174),i(43874),i(7943)},907:function(t,e,i){t.exports=i.p+"img/gouwuche1.19a2de40.png"}}]);
"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[6012],{20508:function(t,i,e){e.r(i),e.d(i,{default:function(){return m}});var n,a=function(){var t=this,i=t._self._c;return i("div",{staticClass:"recharge",staticStyle:{"min-height":"100vh"}},[i("van-nav-bar",{attrs:{"safe-area-inset-top":"",fixed:"",title:"Hive"==t.itemName?t.$t("加值"):t.$t("充值"),"left-arrow":"","right-text":t.$t("记录")},on:{"click-left":t.onClickLeft,"click-right":t.onClick1}}),i("div",{staticClass:"h46",staticStyle:{width:"100%"}}),i("div",{staticClass:"biaoti"},[t._v(t._s(t.$t("区块链网络")))]),i("div",{staticClass:"duoxuan"},t._l(t.tongdao,(function(e,n){return i("div",{key:n,staticClass:"xuan1",class:t.tongdao_xuanzhong.blockchain_name===e.blockchain_name?"xuanzhong":"weixuan",on:{click:function(i){return t.tongdao_qiehuan(e)}}},[t._v(t._s(e.blockchain_name)+" "),t.tongdao_xuanzhong.blockchain_name===e.blockchain_name?i("van-icon",{staticClass:"xuanzhong-img rtl_selected",attrs:{"class-prefix":"icon",name:"xuanzejiaobiao"}}):t._e()],1)})),0),i("div",{staticClass:"qrcode",staticStyle:{display:"flex","justify-content":"center","margin-top":"20px",width:"100%",float:"left"}},[i("canvas",{staticStyle:{display:"none"},attrs:{id:"canvas"}}),i("img",{staticStyle:{width:"150px",height:"150px"},attrs:{src:t.imgUrl}})]),i("div",{staticClass:"baocunerweima"},[i("div",{staticClass:"baocunerweima-buuon",on:{click:t.baocunhaibao}},[t._v(t._s(t.$t("保存二维码")))])]),i("div",{staticClass:"biaoti"},[t._v(t._s(t.$t("充值地址")))]),i("div",{staticClass:"chongzhifuzhi"},[i("div",{staticClass:"chongzhifuzhi2"},[i("div",{staticClass:"dizhi"},[t._v(t._s(t.tongdao_xuanzhong.address))]),i("div",{staticStyle:{flex:"1"}}),i("div",{staticClass:"fuzhi11",staticStyle:{color:"var(--main-color)"},on:{click:function(i){return t.copyData(t.tongdao_xuanzhong.address)}}},[t._v(t._s(t.$t("复制"))+" ")])])]),i("div",{staticClass:"biaoti",staticStyle:{"margin-bottom":"5px"}},[t._v(t._s(t.$t("充值数量")))]),i("div",{staticClass:"shuru"},[i("el-input",{attrs:{placeholder:t.$t("请输入充值数量"),type:"number",clearable:""},on:{input:t.handleInput},model:{value:t.it.input1,callback:function(i){t.$set(t.it,"input1",i)},expression:"it.input1"}})],1),i("div",{staticClass:"biaoti"},[t._v(t._s(t.$t("预计到账"))+"("+t._s(t.$t("当前汇率"))+" 1 : "+t._s(t.tongdao_xuanzhong.fee>1?t.priceFormat(t.tongdao_xuanzhong.fee):t.tongdao_xuanzhong.fee)+")")]),i("div",{staticClass:"chongzhifuzhi"},[i("div",{staticClass:"chongzhifuzhi2"},[i("div",{staticClass:"dizhi"},[t._v(t._s(t.priceFormat(t.it.input1*t.tongdao_xuanzhong.fee)))]),i("div",{staticStyle:{flex:"1"}}),i("div",{staticClass:"fuzhi11"},[t._v("USDT")])])]),i("div",{staticClass:"biaoti",staticStyle:{"margin-bottom":"10px"}},[t._v(t._s(t.$t("上传图片（上传支付详情截图）")))]),i("div",{staticClass:"shangchaun",staticStyle:{"margin-left":"15px",width:"100%",float:"left"}},[i("van-uploader",{attrs:{multiple:"","max-count":1,"preview-size":"120px","after-read":t.afterRead,accept:".png,.jpg,.jpeg"},model:{value:t.fileList,callback:function(i){t.fileList=i},expression:"fileList"}})],1),i("div",{staticClass:"tijiao"},[i("div",{staticClass:"tijiao2",on:{click:t.biaodan_tijiao}},[t._v(t._s(t.$t("提交")))])])],1)},s=[],o=(e(55601),e(10521)),r=e(54503),l=(e(12144),e(39907)),c=(e(76418),e(28490)),u=(e(34284),e(64043),e(57267),e(76801),e(97389),e(60228),e(57544)),h=e(49425),d=e(9426),f={data:function(){return{priceFormat:h.XY,itemName:"SM-wholesaleShop",data:{},codes:"",tongdao_xuanzhong:{},imgUrl:null,tongdao:[],it:{input1:""},fileList:[],shangchuanurl:"",session_token:""}},components:(n={QRCode:u},(0,r.Z)(n,c.Z.name,c.Z),(0,r.Z)(n,l.Z.name,l.Z),n),created:function(){this.zhifutongdao()},methods:{handleInput:function(){this.it.input1=this.it.input1.replace(/[^\d.]/g,""),this.it.input1=this.it.input1.replace(/\.{2,}/g,"."),this.it.input1=this.it.input1.replace(/^\./g,""),this.it.input1=this.it.input1.replace(".","$#$").replace(/\./g,"").replace("$#$","."),["BTC","ETH"].includes(this.$route.query.type)?(this.it.input1=this.it.input1.replace(/^(\-)*(\d+)\.(\d{0,10}).*$/,"$1$2.$3"),this.it.input1=this.it.input1.replace(/^\D*(\d{0,10}(?:\.\d{0,10})?).*$/g,"$1")):this.it.input1=this.it.input1.replace(/^(\-)*(\d+)\.(\d{0,2}).*$/,"$1$2.$3")},biaodan_tijiao:function(){var t=this,i=this;""!==this.it.input1?""!==this.shangchuanurl?(this.it.input1*this.tongdao_xuanzhong.fee).toFixed(2)<this.tongdao_xuanzhong.recharge_limit_min?(0,o.Z)(i.$t("充值价值不得小于最小限额")+this.tongdao_xuanzhong.recharge_limit_min+"usdt"):(this.it.input1*this.tongdao_xuanzhong.fee).toFixed(2)>this.tongdao_xuanzhong.recharge_limit_max?(0,o.Z)(i.$t("充值价值不得大于最大限额")+this.tongdao_xuanzhong.recharge_limit_max+"usdt"):(0,d.BX)({}).then((function(i){t.session_token=i.session_token,t.chongzhitijiao()})):(0,o.Z)(i.$t("请上传图片")):(0,o.Z)(i.$t("请输入充值数量"))},chongzhitijiao:function(){var t=this,i={session_token:this.session_token,amount:this.it.input1,from:"123",blockchain_name:this.tongdao_xuanzhong.blockchain_name,img:this.shangchuanurl,coin:this.tongdao_xuanzhong.coin,channel_address:this.tongdao_xuanzhong.address,tx:"123"};o.Z.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:""}),(0,d.HO)(i).then((function(i){o.Z.clear(),(0,o.Z)(t.$t("提交成功")),t.it.input1="",t.fileList=[],t.shangchuanurl="",t.$router.push("/SubmitCompleted?path=rechargeRecord")}))["catch"]((function(t){o.Z.clear()}))},tongdao_qiehuan:function(t){this.tongdao_xuanzhong=t,this.useqrcode1()},zhifutongdao:function(){var t=this;(0,d.mo)({}).then((function(i){for(var e=0;e<i.length;e++)i[e]["coin"]===t.$route.query.type&&t.tongdao.push(i[e]);t.tongdao_xuanzhong=t.tongdao[0],t.useqrcode1()}))},afterRead:function(t){var i=this;o.Z.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:""});var e=new FormData;e.append("file",t.file),e.append("moduleName","recharge"),(0,d.Eg)(e).then((function(t){o.Z.clear(),i.shangchuanurl=t}))["catch"]((function(t){o.Z.clear(),(0,o.Z)(this.$t("添加失败")),this.fileList=[]}))},copyData:function(t){var i=this;this.$copyText(t).then((function(t){(0,o.Z)(i.$t("复制成功"))}),(function(t){(0,o.Z)(this.$t("复制失败"))}))},copyData2:function(t){this.$copyText(t).then((function(t){}),(function(t){}))},useqrcode1:function(){var t=document.getElementById("canvas"),i=this.tongdao_xuanzhong.address;u.toCanvas(t,i,(function(t){})),this.saveImg()},baocunhaibao:function(){var t=document.getElementsByTagName("canvas");this.imgUrl=t[0].toDataURL("image/png"),this.getUrlBase64(this.imgUrl).then((function(t){var i=document.createElement("a");i.href=t,i.download="qrCode.png",i.click()}))},getUrlBase64:function(t){return new Promise((function(i){var e=document.createElement("canvas"),n=e.getContext("2d"),a=new Image;a.crossOrigin="Anonymous",a.src=t,a.onload=function(){e.height=300,e.width=300,n.drawImage(a,0,0,300,300);var t=e.toDataURL("image/png");e=null,i(t)}}))},saveImg:function(){var t=document.getElementsByTagName("canvas");this.imgUrl=t[0].toDataURL("image/png")},onClickLeft:function(){this.$router.push({path:"/rechargeList",dir:"left"})},onClick1:function(){this.$router.push({path:"/rechargeRecord"})}}},p=f,g=e(1001),v=(0,g.Z)(p,a,s,!1,null,"5aa36d25",null),m=v.exports},76418:function(t,i,e){e(22184),e(14106),e(4127)},14683:function(t,i,e){e.d(i,{f:function(){return n}});var n={inject:{vanField:{default:null}},watch:{value:function(){var t=this.vanField;t&&(t.resetValidation(),t.validateWithTrigger("onChange"))}},created:function(){var t=this.vanField;t&&!t.children&&(t.children=this)}}},39907:function(t,i,e){e.d(i,{Z:function(){return w}});e(79288),e(49693),e(60228),e(47522),e(21694),e(76265),e(78730),e(79307),e(34284),e(89730),e(63975),e(50886),e(34338),e(62506),e(38077),e(97195);var n=e(27378),a=e(40868),s=e(92072),o=e(45291);e(98742),e(64043),e(7409);function r(t){return Array.isArray(t)?t:[t]}function l(t,i){return new Promise((function(e){if("file"!==i){var n=new FileReader;n.onload=function(t){e(t.target.result)},"dataUrl"===i?n.readAsDataURL(t):"text"===i&&n.readAsText(t)}else e(null)}))}function c(t,i){return r(t).some((function(t){return!!t&&((0,a.mf)(i)?i(t):t.size>i)}))}var u=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;function h(t){return u.test(t)}function d(t){return!!t.isImage||(t.file&&t.file.type?0===t.file.type.indexOf("image"):t.url?h(t.url):!!t.content&&0===t.content.indexOf("data:image"))}var f=e(14683),p=e(28490),g=e(67094),v=e(98372),m=e(24926),_=(0,s.d)("uploader"),x=_[0],y=_[1],w=x({inheritAttrs:!1,mixins:[f.f],model:{prop:"fileList"},props:{disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,uploadText:String,afterRead:Function,beforeRead:Function,beforeDelete:Function,previewSize:[Number,String],previewOptions:Object,name:{type:[Number,String],default:""},accept:{type:String,default:"image/*"},fileList:{type:Array,default:function(){return[]}},maxSize:{type:[Number,String,Function],default:Number.MAX_VALUE},maxCount:{type:[Number,String],default:Number.MAX_VALUE},deletable:{type:Boolean,default:!0},showUpload:{type:Boolean,default:!0},previewImage:{type:Boolean,default:!0},previewFullImage:{type:Boolean,default:!0},imageFit:{type:String,default:"cover"},resultType:{type:String,default:"dataUrl"},uploadIcon:{type:String,default:"photograph"}},computed:{previewSizeWithUnit:function(){return(0,o.N)(this.previewSize)},value:function(){return this.fileList}},created:function(){this.urls=[]},beforeDestroy:function(){this.urls.forEach((function(t){return URL.revokeObjectURL(t)}))},methods:{getDetail:function(t){return void 0===t&&(t=this.fileList.length),{name:this.name,index:t}},onChange:function(t){var i=this,e=t.target.files;if(!this.disabled&&e.length){if(e=1===e.length?e[0]:[].slice.call(e),this.beforeRead){var n=this.beforeRead(e,this.getDetail());if(!n)return void this.resetInput();if((0,a.tI)(n))return void n.then((function(t){t?i.readFile(t):i.readFile(e)}))["catch"](this.resetInput)}this.readFile(e)}},readFile:function(t){var i=this,e=c(t,this.maxSize);if(Array.isArray(t)){var n=this.maxCount-this.fileList.length;t.length>n&&(t=t.slice(0,n)),Promise.all(t.map((function(t){return l(t,i.resultType)}))).then((function(n){var a=t.map((function(t,i){var e={file:t,status:"",message:""};return n[i]&&(e.content=n[i]),e}));i.onAfterRead(a,e)}))}else l(t,this.resultType).then((function(n){var a={file:t,status:"",message:""};n&&(a.content=n),i.onAfterRead(a,e)}))},onAfterRead:function(t,i){var e=this;this.resetInput();var n=t;if(i){var a=t;Array.isArray(t)?(a=[],n=[],t.forEach((function(t){t.file&&(c(t.file,e.maxSize)?a.push(t):n.push(t))}))):n=null,this.$emit("oversize",a,this.getDetail())}var s=Array.isArray(n)?Boolean(n.length):Boolean(n);s&&(this.$emit("input",[].concat(this.fileList,r(n))),this.afterRead&&this.afterRead(n,this.getDetail()))},onDelete:function(t,i){var e,n=this,s=null!=(e=t.beforeDelete)?e:this.beforeDelete;if(s){var o=s(t,this.getDetail(i));if(!o)return;if((0,a.tI)(o))return void o.then((function(){n.deleteFile(t,i)}))["catch"](a.ZT)}this.deleteFile(t,i)},deleteFile:function(t,i){var e=this.fileList.slice(0);e.splice(i,1),this.$emit("input",e),this.$emit("delete",t,this.getDetail(i))},resetInput:function(){this.$refs.input&&(this.$refs.input.value="")},onClickUpload:function(t){this.$emit("click-upload",t)},onPreviewImage:function(t){var i=this;if(this.previewFullImage){var e=this.fileList.filter((function(t){return d(t)})),a=e.map((function(t){return t.file&&!t.url&&"failed"!==t.status&&(t.url=URL.createObjectURL(t.file),i.urls.push(t.url)),t.url}));this.imagePreview=(0,m.Z)((0,n.Z)({images:a,startPosition:e.indexOf(t),onClose:function(){i.$emit("close-preview")}},this.previewOptions))}},closeImagePreview:function(){this.imagePreview&&this.imagePreview.close()},chooseFile:function(){this.disabled||this.$refs.input&&this.$refs.input.click()},genPreviewMask:function(t){var i=this.$createElement,e=t.status,n=t.message;if("uploading"===e||"failed"===e){var s="failed"===e?i(p.Z,{attrs:{name:"close"},class:y("mask-icon")}):i(v.Z,{class:y("loading")}),o=(0,a.Xq)(n)&&""!==n;return i("div",{class:y("mask")},[s,o&&i("div",{class:y("mask-message")},[n])])}},genPreviewItem:function(t,i){var e,a,s,o=this,r=this.$createElement,l=null!=(e=t.deletable)?e:this.deletable,c="uploading"!==t.status&&l,u=c&&r("div",{class:y("preview-delete"),on:{click:function(e){e.stopPropagation(),o.onDelete(t,i)}}},[r(p.Z,{attrs:{name:"cross"},class:y("preview-delete-icon")})]),h=this.slots("preview-cover",(0,n.Z)({index:i},t)),f=h&&r("div",{class:y("preview-cover")},[h]),v=null!=(a=t.previewSize)?a:this.previewSize,m=null!=(s=t.imageFit)?s:this.imageFit,_=d(t)?r(g.Z,{attrs:{fit:m,src:t.content||t.url,width:v,height:v,lazyLoad:this.lazyLoad},class:y("preview-image"),on:{click:function(){o.onPreviewImage(t)}}},[f]):r("div",{class:y("file"),style:{width:this.previewSizeWithUnit,height:this.previewSizeWithUnit}},[r(p.Z,{class:y("file-icon"),attrs:{name:"description"}}),r("div",{class:[y("file-name"),"van-ellipsis"]},[t.file?t.file.name:t.url]),f]);return r("div",{class:y("preview"),on:{click:function(){o.$emit("click-preview",t,o.getDetail(i))}}},[_,this.genPreviewMask(t),u])},genPreviewList:function(){if(this.previewImage)return this.fileList.map(this.genPreviewItem)},genUpload:function(){var t=this.$createElement;if(!(this.fileList.length>=this.maxCount)){var i,e=this.slots(),a=this.readonly?null:t("input",{attrs:(0,n.Z)({},this.$attrs,{type:"file",accept:this.accept,disabled:this.disabled}),ref:"input",class:y("input"),on:{change:this.onChange}});if(e)return t("div",{class:y("input-wrapper"),key:"input-wrapper",on:{click:this.onClickUpload}},[e,a]);if(this.previewSize){var s=this.previewSizeWithUnit;i={width:s,height:s}}return t("div",{directives:[{name:"show",value:this.showUpload}],class:y("upload",{readonly:this.readonly}),style:i,on:{click:this.onClickUpload}},[t(p.Z,{attrs:{name:this.uploadIcon},class:y("upload-icon")}),this.uploadText&&t("span",{class:y("upload-text")},[this.uploadText]),a])}}},render:function(){var t=arguments[0];return t("div",{class:y()},[t("div",{class:y("wrapper",{disabled:this.disabled})},[this.genPreviewList(),this.genUpload()])])}})},12144:function(t,i,e){e(22184),e(74048),e(14106),e(4127),e(96073),e(44174),e(43874),e(45353),e(86051),e(57462)}}]);
"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[4142],{60907:function(t,i,n){n.r(i),n.d(i,{default:function(){return _}});var a,e=function(){var t=this,i=t._self._c;return i("div",{staticClass:"recharge",staticStyle:{"min-height":"100vh"}},[i("van-nav-bar",{attrs:{"safe-area-inset-top":"",fixed:"",title:"Hive"==t.itemName?t.$t("加值"):t.$t("充值"),"left-arrow":"","right-text":t.$t("记录")},on:{"click-left":t.onClickLeft,"click-right":t.onClick1}}),i("div",{staticClass:"h46",staticStyle:{width:"100%"}}),i("div",{staticClass:"biaoti"},[t._v(t._s(t.$t("区块链网络")))]),i("div",{staticClass:"duoxuan"},t._l(t.tongdao,(function(n,a){return i("div",{key:a,staticClass:"xuan1",class:t.tongdao_xuanzhong.blockchain_name===n.blockchain_name?"xuanzhong":"weixuan",on:{click:function(i){return t.tongdao_qiehuan(n)}}},[t._v(t._s(n.blockchain_name)+" "),t.tongdao_xuanzhong.blockchain_name===n.blockchain_name?i("van-icon",{staticClass:"xuanzhong-img rtl_selected",attrs:{"class-prefix":"icon",name:"xuanzejiaobiao"}}):t._e()],1)})),0),i("div",{staticClass:"qrcode",staticStyle:{display:"flex","justify-content":"center","margin-top":"20px",width:"100%",float:"left"}},[i("canvas",{staticStyle:{display:"none"},attrs:{id:"canvas"}}),i("img",{staticStyle:{width:"150px",height:"150px"},attrs:{src:t.imgUrl}})]),i("div",{staticClass:"baocunerweima"},[i("div",{staticClass:"baocunerweima-buuon",on:{click:t.baocunhaibao}},[t._v(t._s(t.$t("保存二维码")))])]),i("div",{staticClass:"biaoti"},[t._v(t._s(t.$t("充值地址")))]),i("div",{staticClass:"chongzhifuzhi"},[i("div",{staticClass:"chongzhifuzhi2"},[i("div",{staticClass:"dizhi"},[t._v(t._s(t.tongdao_xuanzhong.address))]),i("div",{staticStyle:{flex:"1"}}),i("div",{staticClass:"fuzhi11",staticStyle:{color:"var(--main-color)"},on:{click:function(i){return t.copyData(t.tongdao_xuanzhong.address)}}},[t._v(t._s(t.$t("复制"))+" ")])])]),i("div",{staticClass:"biaoti",staticStyle:{"margin-bottom":"5px"}},[t._v(t._s(t.$t("充值数量")))]),i("div",{staticClass:"shuru"},[i("el-input",{attrs:{placeholder:t.$t("请输入充值数量"),type:"number",clearable:""},on:{input:t.handleInput},model:{value:t.it.input1,callback:function(i){t.$set(t.it,"input1",i)},expression:"it.input1"}})],1),i("div",{staticClass:"biaoti"},[t._v(t._s(t.$t("预计到账"))+"("+t._s(t.$t("当前汇率"))+" 1 : "+t._s(t.tongdao_xuanzhong.fee>1?t.priceFormat(t.tongdao_xuanzhong.fee):t.tongdao_xuanzhong.fee)+")")]),i("div",{staticClass:"chongzhifuzhi"},[i("div",{staticClass:"chongzhifuzhi2"},[i("div",{staticClass:"dizhi"},[t._v(t._s(t.priceFormat(t.it.input1*t.tongdao_xuanzhong.fee)))]),i("div",{staticStyle:{flex:"1"}}),i("div",{staticClass:"fuzhi11"},[t._v("USDT")])])]),i("div",{staticClass:"biaoti",staticStyle:{"margin-bottom":"10px"}},[t._v(t._s(t.$t("上传图片（上传支付详情截图）")))]),i("div",{staticClass:"shangchaun",staticStyle:{"margin-left":"15px",width:"100%",float:"left"}},[i("van-uploader",{attrs:{multiple:"","max-count":1,"preview-size":"120px","after-read":t.afterRead,accept:".png,.jpg,.jpeg"},model:{value:t.fileList,callback:function(i){t.fileList=i},expression:"fileList"}})],1),i("div",{staticClass:"tijiao"},[i("div",{staticClass:"tijiao2",on:{click:t.biaodan_tijiao}},[t._v(t._s(t.$t("提交")))])])],1)},o=[],s=(n(37850),n(88848)),c=n(82482),h=(n(42511),n(29538)),u=(n(65825),n(19858)),l=(n(34284),n(64043),n(57267),n(76801),n(97389),n(60228),n(38385)),r=n(10408),d=n(14970),g={data:function(){return{priceFormat:r.XY,itemName:"SM-wholesaleShop",data:{},codes:"",tongdao_xuanzhong:{},imgUrl:null,tongdao:[],it:{input1:""},fileList:[],shangchuanurl:"",session_token:""}},components:(a={QRCode:l},(0,c.Z)(a,u.Z.name,u.Z),(0,c.Z)(a,h.Z.name,h.Z),a),created:function(){this.zhifutongdao()},methods:{handleInput:function(){this.it.input1=this.it.input1.replace(/[^\d.]/g,""),this.it.input1=this.it.input1.replace(/\.{2,}/g,"."),this.it.input1=this.it.input1.replace(/^\./g,""),this.it.input1=this.it.input1.replace(".","$#$").replace(/\./g,"").replace("$#$","."),["BTC","ETH"].includes(this.$route.query.type)?(this.it.input1=this.it.input1.replace(/^(\-)*(\d+)\.(\d{0,10}).*$/,"$1$2.$3"),this.it.input1=this.it.input1.replace(/^\D*(\d{0,10}(?:\.\d{0,10})?).*$/g,"$1")):this.it.input1=this.it.input1.replace(/^(\-)*(\d+)\.(\d{0,2}).*$/,"$1$2.$3")},biaodan_tijiao:function(){var t=this,i=this;""!==this.it.input1?""!==this.shangchuanurl?(this.it.input1*this.tongdao_xuanzhong.fee).toFixed(2)<this.tongdao_xuanzhong.recharge_limit_min?(0,s.Z)(i.$t("充值价值不得小于最小限额")+this.tongdao_xuanzhong.recharge_limit_min+"usdt"):(this.it.input1*this.tongdao_xuanzhong.fee).toFixed(2)>this.tongdao_xuanzhong.recharge_limit_max?(0,s.Z)(i.$t("充值价值不得大于最大限额")+this.tongdao_xuanzhong.recharge_limit_max+"usdt"):(0,d.BX)({}).then((function(i){t.session_token=i.session_token,t.chongzhitijiao()})):(0,s.Z)(i.$t("请上传图片")):(0,s.Z)(i.$t("请输入充值数量"))},chongzhitijiao:function(){var t=this,i={session_token:this.session_token,amount:this.it.input1,from:"123",blockchain_name:this.tongdao_xuanzhong.blockchain_name,img:this.shangchuanurl,coin:this.tongdao_xuanzhong.coin,channel_address:this.tongdao_xuanzhong.address,tx:"123"};s.Z.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:""}),(0,d.HO)(i).then((function(i){s.Z.clear(),(0,s.Z)(t.$t("提交成功")),t.it.input1="",t.fileList=[],t.shangchuanurl="",t.$router.push("/SubmitCompleted?path=rechargeRecord")}))["catch"]((function(t){s.Z.clear()}))},tongdao_qiehuan:function(t){this.tongdao_xuanzhong=t,this.useqrcode1()},zhifutongdao:function(){var t=this;(0,d.mo)({}).then((function(i){for(var n=0;n<i.length;n++)i[n]["coin"]===t.$route.query.type&&t.tongdao.push(i[n]);t.tongdao_xuanzhong=t.tongdao[0],t.useqrcode1()}))},afterRead:function(t){var i=this;s.Z.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:""});var n=new FormData;n.append("file",t.file),n.append("moduleName","recharge"),(0,d.Eg)(n).then((function(t){s.Z.clear(),i.shangchuanurl=t}))["catch"]((function(t){s.Z.clear(),(0,s.Z)(this.$t("添加失败")),this.fileList=[]}))},copyData:function(t){var i=this;this.$copyText(t).then((function(t){(0,s.Z)(i.$t("复制成功"))}),(function(t){(0,s.Z)(this.$t("复制失败"))}))},copyData2:function(t){this.$copyText(t).then((function(t){}),(function(t){}))},useqrcode1:function(){var t=document.getElementById("canvas"),i=this.tongdao_xuanzhong.address;l.toCanvas(t,i,(function(t){})),this.saveImg()},baocunhaibao:function(){var t=document.getElementsByTagName("canvas");this.imgUrl=t[0].toDataURL("image/png"),this.getUrlBase64(this.imgUrl).then((function(t){var i=document.createElement("a");i.href=t,i.download="qrCode.png",i.click()}))},getUrlBase64:function(t){return new Promise((function(i){var n=document.createElement("canvas"),a=n.getContext("2d"),e=new Image;e.crossOrigin="Anonymous",e.src=t,e.onload=function(){n.height=300,n.width=300,a.drawImage(e,0,0,300,300);var t=n.toDataURL("image/png");n=null,i(t)}}))},saveImg:function(){var t=document.getElementsByTagName("canvas");this.imgUrl=t[0].toDataURL("image/png")},onClickLeft:function(){this.$router.push({path:"/rechargeList",dir:"left"})},onClick1:function(){this.$router.push({path:"/rechargeRecord"})}}},p=g,f=n(1001),m=(0,f.Z)(p,e,o,!1,null,"5aa36d25",null),_=m.exports},65825:function(t,i,n){n(22184),n(14106),n(4127)}}]);
"use strict";(self["webpackChunkshop"]=self["webpackChunkshop"]||[]).push([[6008],{45719:function(t,i,e){e.r(i),e.d(i,{default:function(){return F}});e(28436);var a,n=function(){var t=this,i=t._self._c;return i("div",{staticClass:"AddressDetails",staticStyle:{"min-height":"100vh"}},[i("nationality-list",{ref:"controlChild",attrs:{title:t.$t("选择区域码")},on:{getName:function(i){return t.getName(arguments)}}}),i("van-nav-bar",{attrs:{"safe-area-inset-top":"",fixed:"",title:t.$t("新增地址/修改地址"),"right-text":t.$t("保存"),"left-arrow":""},on:{"click-left":t.onClickLeft,"click-right":t.submitHandle}}),i("div",{staticStyle:{width:"100%",height:"46px"}}),i("div",{staticClass:"form-content"},[i("div",{staticClass:"item"},[i("el-input",{attrs:{placeholder:t.$t("收货人姓名"),clearable:"",maxlength:"64","show-word-limit":""},on:{input:function(i){return t.inputVal("contacts",i)}},model:{value:t.formData.contacts,callback:function(i){t.$set(t.formData,"contacts",i)},expression:"formData.contacts"}})],1),i("div",{staticClass:"item"},[i("el-input",{attrs:{placeholder:t.$t("邮箱"),clearable:"",maxlength:"64","show-word-limit":""},model:{value:t.formData.email,callback:function(i){t.$set(t.formData,"email","string"===typeof i?i.trim():i)},expression:"formData.email"}})],1),i("div",{staticClass:"item"},[i("el-input",{attrs:{placeholder:t.$t("手机号"),maxlength:"20",value:t.formData.phone},on:{input:t.handleInputChange}},[i("div",{attrs:{slot:"prepend"},on:{click:t.openNational},slot:"prepend"},[i("p",[t._v(" +"),i("span",[t._v(t._s(t.dialCode))]),i("img",{staticClass:"icon",attrs:{src:t.triangleDown,alt:""}})])])])],1),i("div",{staticClass:"address_item"},[i("el-select",{attrs:{filterable:"",placeholder:t.$t("请选择"),"no-data-text":t.$t("暂无数据"),"no-match-text":t.$t("暂无数据"),"loading-text":t.$t("加载中")},on:{change:t.onCountryChange},model:{value:t.formData.country,callback:function(i){t.$set(t.formData,"country",i)},expression:"formData.country"}},t._l(t.countryList,(function(t){return i("el-option",{key:t.id,attrs:{"value-key":"countryName",label:t.label,value:t.countryName}})})),1),t.isProvince?i("el-select",{attrs:{filterable:"",placeholder:t.$t("请选择"),"no-data-text":t.$t("暂无数据"),"no-match-text":t.$t("暂无数据"),"loading-text":t.$t("加载中")},on:{change:t.onProvinceChange},model:{value:t.formData.province,callback:function(i){t.$set(t.formData,"province",i)},expression:"formData.province"}},t._l(t.provinceList,(function(t){return i("el-option",{key:t.id,attrs:{"value-key":"stateName",label:t.label,value:t.stateName}})})),1):t._e(),t.isProvince&&t.isCity?i("el-select",{attrs:{filterable:"","no-data-text":t.$t("暂无数据"),"no-match-text":t.$t("暂无数据"),"loading-text":t.$t("加载中"),placeholder:t.$t("请选择")},on:{change:t.onCityChange},model:{value:t.formData.city,callback:function(i){t.$set(t.formData,"city",i)},expression:"formData.city"}},t._l(t.cityList,(function(t){return i("el-option",{key:t.id,attrs:{"value-key":"cityName",label:t.label,value:t.cityName}})})),1):t._e()],1),i("div",{staticClass:"item"},[i("el-input",{attrs:{placeholder:t.$t("邮编"),maxlength:"32","show-word-limit":"",clearable:""},model:{value:t.formData.postcode,callback:function(i){t.$set(t.formData,"postcode",i)},expression:"formData.postcode"}})],1),i("div",{staticClass:"item"},[i("el-input",{attrs:{type:"textarea",placeholder:t.$t("收件地址"),resize:"none",maxlength:"255","show-word-limit":"",autosize:{minRows:3,maxRows:4},clearable:""},model:{value:t.formData.address,callback:function(i){t.$set(t.formData,"address",i)},expression:"formData.address"}})],1),i("div",{staticClass:"item check"},[i("div",{staticStyle:{flex:"1"}},[t._v(t._s(t.$t("设为默认地址")))]),i("van-switch",{attrs:{size:"20px"},model:{value:t.checked,callback:function(i){t.checked=i},expression:"checked"}})],1)])],1)},o=[],s=e(86080),r=(e(55601),e(10521)),c=e(51907),l=e(85617),u=e(54503),h=(e(20058),e(36695)),d=(e(16045),e(56843)),f=(e(22184),e(43874),e(92072)),m=e(45291),v=(e(79288),{size:[Number,String],value:null,loading:Boolean,disabled:Boolean,activeColor:String,inactiveColor:String,activeValue:{type:null,default:!0},inactiveValue:{type:null,default:!1}}),p=e(14683),y=e(98372),C=(0,f.d)("switch"),g=C[0],D=C[1],$=g({mixins:[p.f],props:v,computed:{checked:function(){return this.value===this.activeValue},style:function(){return{fontSize:(0,m.N)(this.size),backgroundColor:this.checked?this.activeColor:this.inactiveColor}}},methods:{onClick:function(t){if(this.$emit("click",t),!this.disabled&&!this.loading){var i=this.checked?this.inactiveValue:this.activeValue;this.$emit("input",i),this.$emit("change",i)}},genLoading:function(){var t=this.$createElement;if(this.loading){var i=this.checked?this.activeColor:this.inactiveColor;return t(y.Z,{class:D("loading"),attrs:{color:i}})}}},render:function(){var t=arguments[0],i=this.checked,e=this.loading,a=this.disabled;return t("div",{class:D({on:i,loading:e,disabled:a}),attrs:{role:"switch","aria-checked":String(i)},style:this.style,on:{click:this.onClick}},[t("div",{class:D("node")},[this.genLoading()])])}}),k=(e(90191),e(29723)),A=(e(34284),e(25728),e(60228),e(97195),e(64043),e(9873),e(96869),e(57267),e(7409),e(34338),e(9426)),w=e(33621),I=e(79717),Z=(e(50859),e(81273)),b={data:function(){return{triangleDown:e(44499),pageDiaCode:!1,dialCode:localStorage.getItem("dialCode")||1,checked:!0,showCountryPicker:!1,showCityPicker:!1,showProvincePicker:!1,formData:{contacts:"",email:"",phone:"",country:"",province:"",city:"",postcode:"",address:"",countryId:0,provinceId:0,cityId:0},currentId:null,cityList:[],provinceList:[],countryList:[],countryId:0,provinceId:0,isProvince:!0,isCity:!0,currentCountryId:null}},components:(a={},(0,u.Z)(a,k.Z.name,k.Z),(0,u.Z)(a,$.name,$),(0,u.Z)(a,"NationalityList",w.Z),(0,u.Z)(a,d.Z.name,d.Z),(0,u.Z)(a,h.Z.name,h.Z),a),created:function(){var t=this.$route.query.id;t&&(this.currentId=t,this.getAddressInfo()),this.getCountry()},methods:{getCountry:function(){var t=this;return(0,l.Z)((0,c.Z)().mark((function i(){var e;return(0,c.Z)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,(0,I.ZO)();case 2:e=i.sent,t.countryList=e.data;case 4:case"end":return i.stop()}}),i)})))()},getStateList:function(t){var i=this;return(0,l.Z)((0,c.Z)().mark((function e(){var a;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Z.log("id ::->",t),e.next=3,(0,I.jv)({countryId:+t});case 3:a=e.sent,i.provinceList=a.data,0==i.provinceList.length&&(i.isProvince=!1,i.provinceList=[{stateName:i.$t("暂无数据"),id:""}]);case 6:case"end":return e.stop()}}),e)})))()},getListCity:function(t){var i=this;return(0,l.Z)((0,c.Z)().mark((function e(){var a;return(0,c.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Z.log("id ::->",t),e.next=3,(0,I.Bi)({stateId:t});case 3:a=e.sent,i.cityList=a.data,0==i.cityList.length?(i.isCity=!1,i.cityList=[{cityName:i.$t("暂无数据"),id:""}]):i.isCity=!0;case 6:case"end":return e.stop()}}),e)})))()},onCityChange:function(t){var i=this;this.cityList.find((function(e){e.cityName==t&&(i.formData.cityId=e.id)})),this.formData.city=t},onCityCancel:function(){this.showCityPicker=!1},onCountryChange:function(t){var i=this;this.countryList.find((function(e){e.countryName==t&&(i.formData.country=t,i.formData.countryId=e.id,i.currentCountryId=i.countryId=e.id,i.isProvince=!0,i.showCountryPicker=!1,i.getStateList(e.id))})),this.formData.city=this.formData.province="",this.formData.cityId=this.formData.provinceId=0},onCountryCancel:function(){this.showCountryPicker=!1},onProvinceChange:function(t){var i=this;this.provinceList.find((function(e){e.stateName==t&&(i.formData.province=t,i.formData.provinceId=e.id,i.provinceId=e.id,i.showProvincePicker=!1,i.getListCity(e.id))})),this.formData.city=""},onProvinceCancel:function(){this.showProvincePicker=!1},clickCountry:function(){document.activeElement.blur(),this.showCountryPicker=!0,this.formData.province="",this.formData.city=""},ProvincePicker:function(){document.activeElement.blur(),this.formData.city="",""==this.formData.country?(0,r.Z)(this.$t("请输入")+this.$t("国家")):(this.getStateList(this.countryId),this.showProvincePicker=!0)},CityPicker:function(){document.activeElement.blur(),this.formData.province==this.$t("暂无数据")?this.formData.city=this.$t("暂无数据"):this.formData.country&&this.formData.province?(this.getListCity(this.provinceId),this.showCityPicker=!0):(0,r.Z)(this.$t("请输入")+this.$t("省区"))},getAddressInfo:function(){var t=this;r.Z.loading({duration:0,forbidClick:!0}),(0,A.Sd)({}).then((function(i){r.Z.clear();var e=i.pageList,a=e.find((function(i){return String(i.id)===String(t.currentId)}));if(a){if(t.checked=Boolean(a.use),t.currentCountryId=null===a||void 0===a?void 0:a.countryId,a.phone.indexOf("|")>-1){var n=a.phone.split("|");t.dialCode=n[0],a.phone=n[1]}delete a.use,(null===a||void 0===a?void 0:a.countryId)&&t.getStateList(a.countryId),(null===a||void 0===a?void 0:a.provinceId)&&t.getListCity(a.provinceId),t.formData=(0,s.Z)({},a)}}))["catch"]((function(t){}))},onClickLeft:function(){this.$router.go(-1)},inputVal:function(t,i){var e=this,a=/([0-9|*|#]\uFE0F\u20E3)|([0-9|#]\u20E3)|([\u203C-\u3299]\uFE0F\u200D)|([\u203C-\u3299]\uFE0F)|([\u2122-\u2B55])|(\u303D)|([(\A9)|(\AE)]\u3030)|(\uA9)|(\uAE)|(\u3030)|([\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF])|([\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF][\u200D|\uFE0F])/g;setTimeout((function(){e.formData[t]=i.replace(a,"")}),0)},getName:function(t){this.pageDiaCode?(this.dialCode=t[2],localStorage.setItem("dialCode",this.dialCode)):this.pageDiaCode=!0},openNational:function(){this.$refs.controlChild.open()},handleInputChange:function(t){/^[1-9]\d*$|^$/.test(t)&&(this.formData.phone=t)},submitHandle:function(){var t=this;if(""!==this.formData.contacts)if(""!==this.formData.email){var i=/^([A-Za-z0-9_\-\.\w{3,}])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;if(i.test(this.formData.email))if(""!==this.formData.phone){var e=/^[0-9]+[0-9]*$/;if(e.test(this.formData.phone))if(""!==this.formData.country)if(""!==this.formData.postcode)if(""!==this.formData.address)if(this.isProvince&&""==this.formData.province)this.$notifyWarn(this.$t("请选择")+this.$t("省区"));else if(this.isProvince&&this.isCity&&""==this.formData.city)this.$notifyWarn(this.$t("请选择")+this.$t("市"));else{var a=(0,s.Z)((0,s.Z)({},this.formData),{},{countryId:this.currentCountryId,phone:"".concat(this.dialCode,"|").concat(this.formData.phone),use:this.checked?1:0});""==a.province&&delete a.province,""==a.city&&delete a.city;var n=A.O3;this.currentId&&(a.id=this.currentId,n=A.sA),r.Z.loading({duration:0,message:this.$t("提交中"),forbidClick:!0}),n(a).then((function(){r.Z.success(t.$t("保存成功")),setTimeout((function(){t.$router.go(-1)}),500)}))["catch"]((function(t){r.Z.clear()}))}else this.$notifyWarn(this.$t("请输入")+this.$t("收件地址"));else this.$notifyWarn(this.$t("请输入")+this.$t("邮编"));else(0,r.Z)(this.$t("请输入")+this.$t("国家"));else(0,r.Z)(this.$t("手机号格式有误"))}else(0,r.Z)(this.$t("请输入")+this.$t("手机号"));else(0,r.Z)(this.$t("邮箱格式有误"))}else(0,r.Z)(this.$t("请输入")+this.$t("邮箱"));else(0,r.Z)(this.$t("请输入")+this.$t("名称"))}}},x=b,L=e(1001),P=(0,L.Z)(x,n,o,!1,null,"4ab3e217",null),F=P.exports},14683:function(t,i,e){e.d(i,{f:function(){return a}});var a={inject:{vanField:{default:null}},watch:{value:function(){var t=this.vanField;t&&(t.resetValidation(),t.validateWithTrigger("onChange"))}},created:function(){var t=this.vanField;t&&!t.children&&(t.children=this)}}},44499:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAATCAYAAACDW21BAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAD3SURBVHgB3ZI9DoJAEEZn4QJaQucNNITE0tLWI3gC4xHsLD2Ona0F4B6BCryCBeBMgdkM2WWRxcKXwA6zP182PIB/R9AriqILDgf4AaItMPSGwwamRXptVVXVvmmaHCaCzsaMnVCbcRwv67qmm87AMRi2kFLmvtosiuIZBMFLCLEFh+B5xyzLrlT7fLIsy3sYhnMs1+AADDslSXL+fOsWOpJIpmm6UhuebuVYiVpJeF+YNo2RqJWE933Tpm8lUiUZFEgMlYhL0pkHSywl6kjC8cCSPol0knCsb0iYJNJJwun9hyo6iUySjAokuER9kjiDJMLnAQN5AwgPjbeTqmD3AAAAAElFTkSuQmCC"}}]);
import{a9 as m,aG as oe,bT as Ce,aT as ke,aZ as Ie,a_ as Re,Q as L,d as E,r as R,m as ie,l as I,bq as le,R as re,bg as $e,f as A,b as g,V as z,U as se,a8 as N,a$ as ce,$ as Y,a0 as D,a2 as q,bU as Be,bo as F,p as _e,ac as K,aW as Pe,q as O,ax as Ae,aY as ze,ab as ee,b3 as Oe,a4 as Ne,bV as te,ag as Le,aO as Ee,aQ as We,bW as He,S as Me,a1 as Ze,ad as De,g as Ve,b1 as Ue}from"./index-0001e040.js";import{u as de}from"./use-id-a8534a74.js";import{T as Fe}from"./index-a026024e.js";import{a as je,S as qe}from"./index-a3146e4f.js";import{u as Ye}from"./use-refs-5fb28915.js";function Ke(e,i,l){let d=0;const n=e.scrollLeft,a=l===0?1:Math.round(l*1e3/16);function r(){e.scrollLeft+=(i-n)/a,++d<a&&m.raf(r)}r()}function Qe(e,i,l,d){let n=oe(e);const a=n<i,r=l===0?1:Math.round(l*1e3/16),b=(i-n)/r;function u(){n+=b,(a&&n>i||!a&&n<i)&&(n=i),Ce(e,n),a&&n<i||!a&&n>i?m.raf(u):d&&m.raf(d)}u()}function Xe(e,i){if(!ke||!window.IntersectionObserver)return;const l=new IntersectionObserver(a=>{i(a[0].intersectionRatio>0)},{root:document.body}),d=()=>{e.value&&l.observe(e.value)},n=()=>{e.value&&l.unobserve(e.value)};Ie(n),Re(n),m.onMountedOrActivated(d)}const[Ge,Je]=L("sticky"),pe={zIndex:z,position:se("top"),container:Object,offsetTop:N(0),offsetBottom:N(0)};var et=E({name:Ge,props:pe,emits:["scroll","change"],setup(e,{emit:i,slots:l}){const d=R(),n=m.useScrollParent(d),a=ie({fixed:!1,width:0,height:0,transform:0}),r=I(()=>le(e.position==="top"?e.offsetTop:e.offsetBottom)),b=I(()=>{const{fixed:f,height:S,width:T}=a;if(f)return{width:`${T}px`,height:`${S}px`}}),u=I(()=>{if(!a.fixed)return;const f=re($e(e.zIndex),{width:`${a.width}px`,height:`${a.height}px`,[e.position]:`${r.value}px`});return a.transform&&(f.transform=`translate3d(0, ${a.transform}px, 0)`),f}),k=f=>i("scroll",{scrollTop:f,isFixed:a.fixed}),h=()=>{if(!d.value||ce(d))return;const{container:f,position:S}=e,T=m.useRect(d),v=oe(window);if(a.width=T.width,a.height=T.height,S==="top")if(f){const C=m.useRect(f),s=C.bottom-r.value-a.height;a.fixed=r.value>T.top&&C.bottom>0,a.transform=s<0?s:0}else a.fixed=r.value>T.top;else{const{clientHeight:C}=document.documentElement;if(f){const s=m.useRect(f),$=C-s.top-r.value-a.height;a.fixed=C-r.value<T.bottom&&C>s.top,a.transform=$<0?-$:0}else a.fixed=C-r.value<T.bottom}k(v)};return A(()=>a.fixed,f=>i("change",f)),m.useEventListener("scroll",h,{target:n,passive:!0}),Xe(d,h),()=>{var f;return g("div",{ref:d,style:b.value},[g("div",{class:Je({fixed:a.fixed}),style:u.value},[(f=l.default)==null?void 0:f.call(l)])])}}});const tt=Y(et),[nt,ne]=L("tab");var at=E({name:nt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:z,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:D},setup(e,{slots:i}){const l=I(()=>{const n={},{type:a,color:r,disabled:b,isActive:u,activeColor:k,inactiveColor:h}=e;r&&a==="card"&&(n.borderColor=r,b||(u?n.backgroundColor=r:n.color=r));const S=u?k:h;return S&&(n.color=S),n}),d=()=>{const n=g("span",{class:ne("text",{ellipsis:!e.scrollable})},[i.title?i.title():e.title]);return e.dot||q(e.badge)&&e.badge!==""?g(Be,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[n]}):n};return()=>g("div",{id:e.id,role:"tab",class:[ne([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:l.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[d()])}});const[ot,ae]=L("tabs");var it=E({name:ot,props:{count:F(Number),inited:Boolean,animated:Boolean,duration:F(z),swipeable:Boolean,lazyRender:Boolean,currentIndex:F(Number)},emits:["change"],setup(e,{emit:i,slots:l}){const d=R(),n=b=>i("change",b),a=()=>{var b;const u=(b=l.default)==null?void 0:b.call(l);return e.animated||e.swipeable?g(je,{ref:d,loop:!1,class:ae("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:n},{default:()=>[u]}):u},r=b=>{const u=d.value;u&&u.state.active!==b&&u.swipeTo(b,{immediate:!e.inited})};return A(()=>e.currentIndex,r),_e(()=>{r(e.currentIndex)}),K({swipeRef:d}),()=>g("div",{class:ae("content",{animated:e.animated||e.swipeable})},[a()])}});const[ue,Z]=L("tabs"),lt={type:se("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:N(0),duration:N(.3),animated:Boolean,ellipsis:D,swipeable:Boolean,scrollspy:Boolean,offsetTop:N(0),background:String,lazyRender:D,lineWidth:z,lineHeight:z,beforeChange:Function,swipeThreshold:N(5),titleActiveColor:String,titleInactiveColor:String},fe=Symbol(ue);var rt=E({name:ue,props:lt,emits:["click","change","scroll","disabled","rendered","click-tab","update:active"],setup(e,{emit:i,slots:l}){let d,n,a;const r=R(),b=R(),u=R(),k=R(),h=de(),f=m.useScrollParent(r),[S,T]=Ye(),{children:v,linkChildren:C}=m.useChildren(fe),s=ie({inited:!1,position:"",lineStyle:{},currentIndex:-1}),$=I(()=>v.length>e.swipeThreshold||!e.ellipsis||e.shrink),V=I(()=>({borderColor:e.color,background:e.background})),B=(t,o)=>{var c;return(c=t.name)!=null?c:o},Q=I(()=>{const t=v[s.currentIndex];if(t)return B(t,s.currentIndex)}),U=I(()=>le(e.offsetTop)),X=I(()=>e.sticky?U.value+d:0),W=t=>{const o=b.value,c=S.value;if(!$.value||!o||!c||!c[s.currentIndex])return;const y=c[s.currentIndex].$el,w=y.offsetLeft-(o.offsetWidth-y.offsetWidth)/2;Ke(o,w,t?0:+e.duration)},_=()=>{const t=s.inited;O(()=>{const o=S.value;if(!o||!o[s.currentIndex]||e.type!=="line"||ce(r.value))return;const c=o[s.currentIndex].$el,{lineWidth:y,lineHeight:w}=e,x=c.offsetLeft+c.offsetWidth/2,P={width:ee(y),backgroundColor:e.color,transform:`translateX(${x}px) translateX(-50%)`};if(t&&(P.transitionDuration=`${e.duration}s`),q(w)){const p=ee(w);P.height=p,P.borderRadius=p}s.lineStyle=P})},ve=t=>{const o=t<s.currentIndex?-1:1;for(;t>=0&&t<v.length;){if(!v[t].disabled)return t;t+=o}},H=(t,o)=>{const c=ve(t);if(!q(c))return;const y=v[c],w=B(y,c),x=s.currentIndex!==null;s.currentIndex!==c&&(s.currentIndex=c,o||W(),_()),w!==e.active&&(i("update:active",w),x&&i("change",w,y.title)),a&&!e.scrollspy&&Ne(Math.ceil(te(r.value)-U.value))},M=(t,o)=>{const c=v.find((w,x)=>B(w,x)===t),y=c?v.indexOf(c):0;H(y,o)},G=(t=!1)=>{if(e.scrollspy){const o=v[s.currentIndex].$el;if(o&&f.value){const c=te(o,f.value)-X.value;n=!0,Qe(f.value,c,t?0:+e.duration,()=>{n=!1})}}},be=(t,o,c)=>{const{title:y,disabled:w}=v[o],x=B(v[o],o);w?i("disabled",x,y):(We(e.beforeChange,{args:[x],done:()=>{H(o),G()}}),i("click",x,y),He(t)),i("click-tab",{name:x,title:y,event:c,disabled:w})},he=t=>{a=t.isFixed,i("scroll",t)},ge=t=>{O(()=>{M(t),G(!0)})},me=()=>{for(let t=0;t<v.length;t++){const{top:o}=m.useRect(v[t].$el);if(o>X.value)return t===0?0:t-1}return v.length-1},ye=()=>{if(e.scrollspy&&!n){const t=me();H(t)}},we=()=>v.map((t,o)=>g(at,Le({key:t.id,id:`${h}-${o}`,ref:T(o),type:e.type,color:e.color,style:t.titleStyle,class:t.titleClass,shrink:e.shrink,isActive:o===s.currentIndex,controls:t.id,scrollable:$.value,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:c=>be(t,o,c)},Ee(t,["dot","badge","title","disabled","showZeroBadge"])),{title:t.$slots.title})),xe=()=>{if(e.type==="line"&&v.length)return g("div",{class:Z("line"),style:s.lineStyle},null)},J=()=>{var t,o,c;const{type:y,border:w,sticky:x}=e,P=[g("div",{ref:x?void 0:u,class:[Z("wrap"),{[Oe]:y==="line"&&w}]},[g("div",{ref:b,role:"tablist",class:Z("nav",[y,{shrink:e.shrink,complete:$.value}]),style:V.value,"aria-orientation":"horizontal"},[(t=l["nav-left"])==null?void 0:t.call(l),we(),xe(),(o=l["nav-right"])==null?void 0:o.call(l)])]),(c=l["nav-bottom"])==null?void 0:c.call(l)];return x?g("div",{ref:u},[P]):P};A([()=>e.color,Pe],_),A(()=>e.active,t=>{t!==Q.value&&M(t)}),A(()=>v.length,()=>{s.inited&&(M(e.active),_(),O(()=>{W(!0)}))});const Se=()=>{M(e.active,!0),O(()=>{s.inited=!0,u.value&&(d=m.useRect(u.value).height),W(!0)})},Te=(t,o)=>i("rendered",t,o);return K({resize:()=>{_(),O(()=>{var t,o;return(o=(t=k.value)==null?void 0:t.swipeRef.value)==null?void 0:o.resize()})},scrollTo:ge}),Ae(_),ze(_),m.onMountedOrActivated(Se),m.useEventListener("scroll",ye,{target:f,passive:!0}),C({id:h,props:e,setLine:_,onRendered:Te,currentName:Q,scrollIntoView:W}),()=>g("div",{ref:r,class:Z([e.type])},[e.sticky?g(tt,{container:r.value,offsetTop:U.value,onScroll:he},{default:()=>[J()]}):J(),g(it,{ref:k,count:v.length,inited:s.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:s.currentIndex,onChange:H},{default:()=>{var t;return[(t=l.default)==null?void 0:t.call(l)]}})])}});const[st,j]=L("tab"),ct=re({},Me,{dot:Boolean,name:z,badge:z,title:String,disabled:Boolean,titleClass:Ze,titleStyle:[String,Object],showZeroBadge:D});var dt=E({name:st,props:ct,setup(e,{slots:i}){const l=de(),d=R(!1),{parent:n,index:a}=m.useParent(fe);if(!n)return;const r=()=>{var h;return(h=e.name)!=null?h:a.value},b=()=>{d.value=!0,n.props.lazyRender&&O(()=>{n.onRendered(r(),e.title)})},u=I(()=>{const h=r()===n.currentName.value;return h&&!d.value&&b(),h}),k=R(!u.value);return A(u,h=>{h?k.value=!1:m.doubleRaf(()=>{k.value=!0})}),A(()=>e.title,()=>{n.setLine(),n.scrollIntoView()}),De(Fe,u),()=>{var h;const f=`${n.id}-${a.value}`,{animated:S,swipeable:T,scrollspy:v,lazyRender:C}=n.props;if(!i.default&&!S)return;const s=v||u.value;if(S||T)return g(qe,{id:l,role:"tabpanel",class:j("panel-wrapper",{inactive:k.value}),tabindex:u.value?0:-1,"aria-hidden":!u.value,"aria-labelledby":f},{default:()=>{var B;return[g("div",{class:j("panel")},[(B=i.default)==null?void 0:B.call(i)])]}});const V=d.value||v||!C?(h=i.default)==null?void 0:h.call(i):null;return K({id:l}),Ve(g("div",{id:l,role:"tabpanel",class:j("panel"),tabindex:s?0:-1,"aria-labelledby":f},[V]),[[Ue,s]])}}});const mt=Y(dt),yt=Y(rt);export{mt as T,yt as a};

import{_ as I,v as A,r as n,j as P,p as E,c as R,b as r,w as y,a as v,u as _,ai as U,A as j,T as c,cJ as L,b9 as q,o as D,e as x,t as T}from"./index-0001e040.js";/* empty css              */import{E as V}from"./index-86f75d82.js";import{n as G}from"./nationalityList-2760cb5d.js";import{c as f}from"./countryList-016fc82e.js";import{B as H}from"./index-3970dd75.js";import"./index-9e9f9536.js";import"./index-a602a0f8.js";import"./use-id-a8534a74.js";import"./index-087b28a3.js";import"./index-03f57b56.js";const J={class:"bindVerify h-full bg-white"},M={class:"content"},O={style:{"margin-top":"22px"}},z={style:{"margin-top":"22px"}},F={__name:"index",setup(K){const $=U(),h=j(),{t:o}=A.exports.useI18n(),a=n(""),u=n(""),l=n(0),d=n(""),p=P(),i=n(!1),b=n("\u4FEE\u6539\u624B\u673A\u53F7\u7801");E(()=>{const e=p.userInfo.phone;if(e&&!p.phoneverif){const t=e.split(" ");b.value="bindPhone",l.value=Number(t[0]),a.value=t[1];for(const s in f)f[s].dialCode===Number(t[0])&&(d.value=f[s].code)}});const w=()=>{if(a.value==""){c(o("entryPhone"));return}if(!/^[0-9]+$/.test(a.value)){c(o("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7\u7801"));return}if(u.value==""){c(o("\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801"));return}i.value=!0,N()},C=async()=>{await p.getUserInfo(!0),c(o("bindSuccess")),i.value=!1,setTimeout(()=>{$.query.reset?h.go(-2):h.back()},1e3)},N=()=>{L({target:`${l.value} ${a.value}`,phone:`${l.value} ${a.value}`,password:u.value}).then(e=>{C()}).catch(e=>{console.log(e),i.value=!1})},S=(e,t,s)=>{console.log(t),d.value=t,l.value=s},g=n(null),k=()=>{g.value.open()};return(e,t)=>{const s=q,B=H;return D(),R("div",J,[r(s,null,{title:y(()=>[x(T(_(o)(b.value)),1)]),_:1}),v("div",M,[v("div",O,[r(V,{label:_(o)("phoneNum"),placeholderText:_(o)("entryPhone"),modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=m=>a.value=m),area:!0,onSelectArea:k,dialCode:l.value,icon:d.value},null,8,["label","placeholderText","modelValue","dialCode","icon"])]),v("div",z,[r(V,{label:e.$t("\u767B\u5F55\u5BC6\u7801"),placeholderText:e.$t("\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801"),modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=m=>u.value=m),typeText:"password",clearBtn:!1},null,8,["label","placeholderText","modelValue"])]),r(B,{class:"w-full",style:{"margin-top":"30px"},type:"primary",loading:i.value,onClick:w},{default:y(()=>[x(T(e.$t("confirm")),1)]),_:1},8,["loading"])]),r(G,{ref_key:"controlChildRef",ref:g,title:e.$t("selectArea"),onGetName:S},null,8,["title"])])}}},le=I(F,[["__scopeId","data-v-90d87e8d"]]);export{le as default};

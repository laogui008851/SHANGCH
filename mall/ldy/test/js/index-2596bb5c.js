import{_ as R,i as V,v as E,bS as T,T as P,I as j,aP as U,c as d,b as u,w as h,a as i,t as p,y as c,n as B,aE as J,o as l,F as m,s as v,e as w,x as S,J as A,K as q}from"./index-0001e040.js";import{E as D}from"./index-1b41dac3.js";import{P as F}from"./index-d2d7f06b.js";import{L as z}from"./index-a026024e.js";import"./index-9e9f9536.js";import"./index-a602a0f8.js";import{S as K}from"./index-03f57b56.js";import{T as M,a as G}from"./index-a26fb12a.js";/* empty css              */import{o as H,a as Q}from"./orderItem-cb5b194d.js";import"./use-id-a8534a74.js";import"./index-a3146e4f.js";import"./use-refs-5fb28915.js";import"./config-22c2c72a.js";import"./index-67f8966a.js";const W=V(),X={name:"Order",beforeRouteEnter(e,s,n){console.log("beforeRouteEnter"),n(r=>{const t=JSON.parse(window.sessionStorage.getItem("position"));document.querySelector(".main-list").scrollTop=t})},beforeRouteLeave(e,s,n){const r=document.querySelector(".main-list").scrollTop;window.sessionStorage.setItem("position",JSON.stringify(r)),n()},components:{orderItem:H},data(){return{loading:!1,refreshing:!1,finished:!1,showCenter:!1,showCenter2:!1,t:E.exports.useI18n().t,activeName:"",payStatus:"-1",showSeach:!1,list:[],option1:[],option2:[],title1:"",title2:"",orderId:"",purchStatus:"",status:"-2",pageNum:1,isArLang:W}},activated(){},created(){const e="production";window.sessionStorage.setItem("position",JSON.stringify(0)),this.title1="\u652F\u4ED8\u72B6\u6001",this.title2="\u7269\u6D41\u72B6\u6001",this.option1=[{text:"\u5168\u90E8",value:-1,isCurrent:!0},{text:"\u672A\u652F\u4ED8",value:0,isCurrent:!1},{text:"\u5DF2\u652F\u4ED8",value:1,isCurrent:!1}],this.option2=[{text:"\u5168\u90E8",value:-2,isCurrent:!0},{text:"\u8BA2\u5355\u5DF2\u53D6\u6D88",value:-1,isCurrent:!1},{text:"\u7B49\u5F85\u4E70\u5BB6\u4ED8\u6B3E",value:0,isCurrent:!1},{text:"\u4E70\u5BB6\u5DF2\u4ED8\u6B3E",value:1,isCurrent:!1},{text:"\u4F9B\u5E94\u5546\u5DF2\u63A5\u5355",value:2,isCurrent:!1},{text:"\u7269\u6D41\u8FD0\u8F93\u4E2D",value:3,isCurrent:!1},{text:"\u4E70\u5BB6\u5DF2\u7B7E\u6536",value:4,isCurrent:!1},{text:"\u8BA2\u5355\u5DF2\u5B8C\u6210",value:5,isCurrent:!1},{text:"\u5DF2\u9000\u6B3E",value:6,isCurrent:!1}],["argos"].includes(e)&&this.option2.forEach(s=>{s.value===4&&(s.text="\u8BA2\u5355\u5DF2\u5B8C\u6210"),s.value===5&&(s.text="\u4E70\u5BB6\u5DF2\u7B7E\u6536")}),this.onRefresh(),document.addEventListener("reloadOrderList",()=>{this.onRefresh()},!1)},computed:{hasNoPushNum:()=>{const e=T();return Boolean(e.num)}},methods:{onLoad(){},onRefresh(){this.init(),this.getOrderList()},handleChoose(e){let s=this.payStatus/1,n=this.option1.findIndex(t=>t.value===s);this.option1.splice(n,1,{...this.option1[n],isCurrent:!1});let r=this.option1.findIndex(t=>t.value===e.value);this.option1.splice(r,1,{...this.option1[r],isCurrent:!0}),this.payStatus=e.value,this.title1=e.text,this.showCenter=!1,this.init(),this.getOrderList()},handleChoose2(e){let s=this.status/1,n=this.option2.findIndex(t=>t.value===s);this.option2.splice(n,1,{...this.option2[n],isCurrent:!1});let r=this.option2.findIndex(t=>t.value===e.value);this.option2.splice(r,1,{...this.option2[r],isCurrent:!0}),this.status=e.value,this.title2=e.text,this.showCenter2=!1,this.init(),this.getOrderList()},handleShow(e){e===1?this.showCenter=!0:this.showCenter2=!0},init(){this.pageNum=1,this.list=[],this.loading=!1,this.refreshing=!1,this.finished=!1},getOrderList(){const e={orderId:this.orderId,payStatus:this.payStatus,purchStatus:this.activeName,status:this.status,begin:"",end:"",pageNum:this.pageNum};Object.keys(e).forEach(s=>{!e[s]&&e[s]!==0&&delete e[s]}),e.payStatus/1===-1&&delete e.payStatus,e.status/1===-2&&delete e.status,P.loading({message:this.t("\u52A0\u8F7D\u4E2D"),forbidClick:!0,duration:0}),Q(e).then(s=>{this.refreshing&&(this.refreshing=!1),this.pageNum++,this.loading=!1,s.pageList.length==0&&(this.finished=!0);const n=this.list.concat(s.pageList);this.list=Number(e.purchStatus)===0?n.filter(r=>Number(r.status)!==-1&&Number(r.status)!==6):n}).catch(s=>{console.log(s)})},tab(e,s){this.activeName=e,console.log(this.activeName,"activeName"),this.onRefresh()},onSearch(){this.showSeach=!0,this.$router.push("/order_search")},change(e){this.value=e,this.showSeach=!1},onConfirm2(e){this.title2=this.option2[e].text,this.getOrderList()}}},g=e=>(A("data-v-e2dd8144"),e=e(),q(),e),Y={class:"main"},Z={class:"seach",style:{"border-radius":"25px"}},$={class:"dropdown"},ee={class:"p-2.5 bg-white flex justify-between items-center w-full h-full"},te={class:"text-xs"},se=g(()=>i("div",{class:"triangle"},null,-1)),oe={class:"p-2.5 bg-white flex justify-between items-center w-full h-full"},ie={class:"text-xs"},ne=g(()=>i("div",{class:"triangle"},null,-1)),re=["onClick"],le=["onClick"],ae={class:"main-list"},ue={class:"goods"},de=g(()=>i("div",{class:"safe-area-inset-bottom"},null,-1));function he(e,s,n,r,t,a){const f=M,y=G,b=K,_=j,x=U,N=J("orderItem"),I=z,k=F,L=D;return l(),d("div",{id:"order",class:B({"is-ar":t.isArLang})},[u(y,{active:t.activeName,"onUpdate:active":s[0]||(s[0]=o=>t.activeName=o),onClick:a.tab},{default:h(()=>[u(f,{title:t.t("total"),name:""},null,8,["title"]),u(f,{title:t.t("\u5F85\u91C7\u8D2D"),name:"0",dot:a.hasNoPushNum},null,8,["title","dot"]),u(f,{title:t.t("\u5DF2\u91C7\u8D2D"),name:"1"},null,8,["title"])]),_:1},8,["active","onClick"]),i("div",Y,[i("div",Z,[u(b,{style:{"border-radius":"25px"},readonly:"",onClick:a.onSearch,modelValue:t.orderId,"onUpdate:modelValue":s[1]||(s[1]=o=>t.orderId=o),placeholder:t.t("\u641C\u7D22")},null,8,["onClick","modelValue","placeholder"])]),i("div",$,[i("div",{class:"dropdownitem one h-10.5",onClick:s[2]||(s[2]=o=>a.handleShow(1))},[i("div",ee,[i("span",te,p(t.t(t.title1)),1),se])]),i("div",{class:"dropdownitem one h-10.5",onClick:s[3]||(s[3]=o=>a.handleShow(2))},[i("div",oe,[i("span",ie,p(t.t(t.title2)),1),ne])])]),u(x,{show:t.showCenter,"onUpdate:show":s[4]||(s[4]=o=>t.showCenter=o),round:""},{default:h(()=>[(l(!0),d(m,null,v(t.option1,(o,C)=>(l(),d("div",{onClick:O=>a.handleChoose(o),class:"font-3.5 w-72 h-12 flex justify-center items-center border-bottom relative"},[w(p(t.t(o.text))+" ",1),o.isCurrent?(l(),c(_,{key:0,name:"success",class:"yes"})):S("",!0)],8,re))),256))]),_:1},8,["show"]),u(x,{show:t.showCenter2,"onUpdate:show":s[5]||(s[5]=o=>t.showCenter2=o),round:""},{default:h(()=>[(l(!0),d(m,null,v(t.option2,(o,C)=>(l(),d("div",{onClick:O=>a.handleChoose2(o),class:"text-xs w-72 h-12 flex justify-center items-center border-bottom relative",key:C+"option2"},[w(p(t.t(o.text))+" ",1),o.isCurrent?(l(),c(_,{key:0,name:"success",class:"yes"})):S("",!0)],8,le))),128))]),_:1},8,["show"]),i("div",ae,[t.list.length>0?(l(),c(k,{key:0,modelValue:t.refreshing,"onUpdate:modelValue":s[7]||(s[7]=o=>t.refreshing=o),onRefresh:a.onRefresh,"loading-text":e.$t("\u52A0\u8F7D\u4E2D"),"loosing-text":e.$t("\u91CA\u653E\u4EE5\u5237\u65B0"),"pulling-text":e.$t("\u4E0B\u62C9\u4EE5\u5237\u65B0")},{default:h(()=>[u(I,{"immediate-check":!1,loading:t.loading,"onUpdate:loading":s[6]||(s[6]=o=>t.loading=o),"loading-text":e.$t("\u52A0\u8F7D\u4E2D"),finished:t.finished,"finished-text":e.$t("noMore"),onLoad:a.getOrderList},{default:h(()=>[i("div",ue,[(l(!0),d(m,null,v(t.list,o=>(l(),c(N,{info:o},null,8,["info"]))),256))])]),_:1},8,["loading","loading-text","finished","finished-text","onLoad"])]),_:1},8,["modelValue","onRefresh","loading-text","loosing-text","pulling-text"])):(l(),c(L,{key:1,description:e.$t("noData")},null,8,["description"])),de])])],2)}const ke=R(X,[["render",he],["__scopeId","data-v-e2dd8144"]]);export{ke as default};

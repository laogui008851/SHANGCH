import{_ as j,j as R,i as $,v as z,r as i,p as D,l as E,I as H,c as x,b as f,w as C,a,t as l,u as s,x as N,e as m,n as q,ai as J,A as K,T as p,ca as M,b9 as G,o as I,cb as O,F as P,J as Q,K as W}from"./index-0001e040.js";/* empty css              */import"./index-9e9f9536.js";import{F as X}from"./index-a602a0f8.js";import{a as Y}from"./login.api-6b4c7cdd.js";import{B as Z}from"./index-3970dd75.js";import"./use-id-a8534a74.js";const ee=h=>(Q("data-v-6ca68eee"),h=h(),W(),h),te={class:"verify-content"},se=ee(()=>a("div",{style:{height:"46px"}},null,-1)),ae={class:"info-content"},oe={class:"info-item"},ne={class:"gap"},le={class:"info-item"},re={class:"gap"},ue={key:0},ce={class:"change-ver-type"},ie={class:"submit-content"},de={__name:"index",setup(h){const v=R(),V=$(),{t:e}=z.exports.useI18n(),d=J(),b=K(),n=i(1),k=i(1),S=i("44"),y=i(""),u=i(0),_=i(null),g=i(!1);n.value=d.query&&d.query.type?Number(d.query.type):1,k.value=d.query&&d.query.verType?Number(d.query.verType):1,D(()=>{clearInterval(_.value),_.value=null});const B=E(()=>{if(!v.userInfo.token)b.push("/login");else{const{email:r,phone:o}=v.userInfo;let t="";if(n.value===1){if(o){const c=o.split(" ");c.length===2?(S.value=c[0],t=c[1]):t=c[0]}}else t=r||"";return t}}),w=()=>{if(u.value>0)return!1;const{email:r,phone:o}=v.userInfo;p.loading({duration:0,forbidClick:!0}),Y({target:n.value===1?o:r}).then(()=>{p(e("sendSuccess")),u.value=60,_.value=setInterval(()=>{u.value>0?u.value=u.value-1:(u.value=0,clearInterval(_.value),_.value=null)},1e3)}).catch(()=>{p.clear()})},F=()=>{const{email:r,phone:o}=v.userInfo,t=n.value===1?2:1;if(t===2&&!r)return p(e("\u6682\u672A\u7ED1\u5B9A\u90AE\u7BB1\uFF0C\u65E0\u6CD5\u8FDB\u884C\u90AE\u7BB1\u9A8C\u8BC1")),!1;if(t===1&&!o)return p(e("\u6682\u672A\u7ED1\u5B9A\u624B\u673A\u53F7\uFF0C\u65E0\u6CD5\u8FDB\u884C\u624B\u673A\u9A8C\u8BC1")),!1;n.value=t},A=()=>{if(y.value===""){p(e("entryVerifyCode"));return}g.value=!0;const{email:r,phone:o}=v.userInfo,t={target:n.value===1?o:r,verifcode:y.value};n.value===1?t.phone=o:t.email=r,M(t).then(c=>{g.value=!1,b.push(`/bindVerify?type=${k.value}&reset=1&verifyCode=${c.verifyCode}`)}).catch(()=>{g.value=!1})};return(r,o)=>{const t=G,c=X,T=Z,L=H;return I(),x("div",te,[f(t,{fixed:!0},{title:C(()=>[m(l(s(e)("\u8EAB\u4EFD\u9A8C\u8BC1")),1)]),_:1}),se,a("div",ae,[a("div",oe,[a("h2",ne,l(n.value===1?s(e)("\u624B\u673A\u9A8C\u8BC1"):s(e)("\u90AE\u7BB1\u9A8C\u8BC1")),1),a("p",null,l(s(e)("\u4E3A\u4E86\u4FDD\u969C\u60A8\u7684\u8D26\u53F7\u5B89\u5168\uFF0C\u8BF7\u9A8C\u8BC1\u540E\u8FDB\u884C\u4E0B\u4E00\u6B65\u64CD\u4F5C")),1)]),a("div",le,[a("p",re,l(n.value===1?s(e)("\u5F53\u524D\u7ED1\u5B9A\u624B\u673A\u53F7"):s(e)("\u5F53\u524D\u7ED1\u5B9A\u90AE\u7BB1")),1),a("h2",null,[n.value===1?(I(),x("span",ue,"(+"+l(S.value)+")",1)):N("",!0),m(l(s(O)(B.value,!1)),1)])]),a("div",{class:q(["code-content",{"is-ar":s(V)}])},[f(c,{modelValue:y.value,"onUpdate:modelValue":o[0]||(o[0]=U=>y.value=U),type:"tel",label:"",placeholder:s(e)("entryVerifyCode")},null,8,["modelValue","placeholder"]),a("div",{class:q(["btn",{"is-ar":s(V)}])},[f(T,{type:"primary",onClick:w},{default:C(()=>[m(l(s(e)("sendVerifyCode")),1),u.value?(I(),x(P,{key:0},[m("("+l(u.value)+")s",1)],64)):N("",!0)]),_:1})],2)],2),a("div",ce,[f(L,{name:"exchange"}),a("p",{onClick:F},l(n.value===1?s(e)("\u5207\u6362\u4E3A\u90AE\u7BB1\u9A8C\u8BC1"):s(e)("\u5207\u6362\u4E3A\u624B\u673A\u9A8C\u8BC1")),1)])]),a("div",ie,[f(T,{type:"primary",loading:g.value,onClick:A},{default:C(()=>[m(l(s(e)("nextStep")),1)]),_:1},8,["loading"])])])}}},ge=j(de,[["__scopeId","data-v-6ca68eee"]]);export{ge as default};

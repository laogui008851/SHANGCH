System.register(["./index-legacy-6ad9d2f3.js","./index-legacy-28ed8825.js","./index-legacy-7018d4bf.js","./index-legacy-4d4c31a5.js","./index-legacy-e24b168f.js","./index-legacy-de2c7a03.js","./index-legacy-b4a6fd81.js","./index-legacy-a689d0cd.js","./index-legacy-20dd4294.js","./orderItem-legacy-a79759c7.js","./use-id-legacy-5e608c80.js","./index-legacy-45bbcd42.js","./use-refs-legacy-615d2dc2.js","./config-legacy-39cba370.js","./index-legacy-d00fdda2.js"],(function(e,t){"use strict";var i,s,o,a,n,d,l,r,h,c,u,p,x,g,f,v,m,b,w,y,C,k,S,j,N,I,L,_,O,R,E=document.createElement("style");return E.textContent="#order[data-v-e2dd8144]{width:100%;height:100vh;overflow:hidden;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}#order.is-ar[data-v-e2dd8144] .van-field__control{text-align:right;padding-right:10px}.main-list[data-v-e2dd8144]{overflow:scroll}.yes[data-v-e2dd8144]{color:var(--site-main-color);position:absolute;right:30px;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.triangle[data-v-e2dd8144]{width:0;height:0;border:6px solid transparent;border-top-color:#000;position:relative;top:3px}.main[data-v-e2dd8144]{padding:15px;box-sizing:border-box;height:calc(100vh - 95px);display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.van-search[data-v-e2dd8144]{padding:0!important;border-radius:5px;height:44px}[data-v-e2dd8144] .van-search__content{border-radius:20px}.seach[data-v-e2dd8144]{position:relative}.seach .seach_list[data-v-e2dd8144]{position:absolute;top:35px;left:0px;z-index:999;background:#fff;width:100%;max-height:200px;overflow-y:scroll;padding:0 10px;box-sizing:border-box}.seach .seach_list div[data-v-e2dd8144]{height:25px;line-height:25px}.dropdown[data-v-e2dd8144]{margin:10px 0;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;display:-webkit-box;display:-webkit-flex;display:flex}.dropdown .dropdownitem[data-v-e2dd8144]{width:48%;border-radius:5px;overflow:hidden}.cenger[data-v-e2dd8144]{display:inline-block;width:50px}.goods[data-v-e2dd8144]{height:calc(100% - 190px);overflow:auto}\n",document.head.appendChild(E),{setters:[e=>{i=e._,s=e.i,o=e.v,a=e.bS,n=e.T,d=e.I,l=e.aP,r=e.c,h=e.b,c=e.w,u=e.a,p=e.t,x=e.y,g=e.n,f=e.aE,v=e.o,m=e.F,b=e.s,w=e.e,y=e.x,C=e.J,k=e.K},e=>{S=e.E},e=>{j=e.P},e=>{N=e.L},()=>{},()=>{},e=>{I=e.S},e=>{L=e.T,_=e.a},()=>{},e=>{O=e.o,R=e.a},()=>{},()=>{},()=>{},()=>{},()=>{}],execute:function(){const t=s(),E={name:"Order",beforeRouteEnter(e,t,i){console.log("beforeRouteEnter"),i((e=>{const t=JSON.parse(window.sessionStorage.getItem("position"));document.querySelector(".main-list").scrollTop=t}))},beforeRouteLeave(e,t,i){const s=document.querySelector(".main-list").scrollTop;window.sessionStorage.setItem("position",JSON.stringify(s)),i()},components:{orderItem:O},data:()=>({loading:!1,refreshing:!1,finished:!1,showCenter:!1,showCenter2:!1,t:o.exports.useI18n().t,activeName:"",payStatus:"-1",showSeach:!1,list:[],option1:[],option2:[],title1:"",title2:"",orderId:"",purchStatus:"",status:"-2",pageNum:1,isArLang:t}),activated(){},created(){window.sessionStorage.setItem("position",JSON.stringify(0)),this.title1="支付状态",this.title2="物流状态",this.option1=[{text:"全部",value:-1,isCurrent:!0},{text:"未支付",value:0,isCurrent:!1},{text:"已支付",value:1,isCurrent:!1}],this.option2=[{text:"全部",value:-2,isCurrent:!0},{text:"订单已取消",value:-1,isCurrent:!1},{text:"等待买家付款",value:0,isCurrent:!1},{text:"买家已付款",value:1,isCurrent:!1},{text:"供应商已接单",value:2,isCurrent:!1},{text:"物流运输中",value:3,isCurrent:!1},{text:"买家已签收",value:4,isCurrent:!1},{text:"订单已完成",value:5,isCurrent:!1},{text:"已退款",value:6,isCurrent:!1}],["argos"].includes("production")&&this.option2.forEach((e=>{4===e.value&&(e.text="订单已完成"),5===e.value&&(e.text="买家已签收")})),this.onRefresh(),document.addEventListener("reloadOrderList",(()=>{this.onRefresh()}),!1)},computed:{hasNoPushNum:()=>{const e=a();return Boolean(e.num)}},methods:{onLoad(){},onRefresh(){this.init(),this.getOrderList()},handleChoose(e){let t=this.payStatus/1,i=this.option1.findIndex((e=>e.value===t));this.option1.splice(i,1,{...this.option1[i],isCurrent:!1});let s=this.option1.findIndex((t=>t.value===e.value));this.option1.splice(s,1,{...this.option1[s],isCurrent:!0}),this.payStatus=e.value,this.title1=e.text,this.showCenter=!1,this.init(),this.getOrderList()},handleChoose2(e){let t=this.status/1,i=this.option2.findIndex((e=>e.value===t));this.option2.splice(i,1,{...this.option2[i],isCurrent:!1});let s=this.option2.findIndex((t=>t.value===e.value));this.option2.splice(s,1,{...this.option2[s],isCurrent:!0}),this.status=e.value,this.title2=e.text,this.showCenter2=!1,this.init(),this.getOrderList()},handleShow(e){1===e?this.showCenter=!0:this.showCenter2=!0},init(){this.pageNum=1,this.list=[],this.loading=!1,this.refreshing=!1,this.finished=!1},getOrderList(){const e={orderId:this.orderId,payStatus:this.payStatus,purchStatus:this.activeName,status:this.status,begin:"",end:"",pageNum:this.pageNum};Object.keys(e).forEach((t=>{e[t]||0===e[t]||delete e[t]})),e.payStatus/1==-1&&delete e.payStatus,e.status/1==-2&&delete e.status,n.loading({message:this.t("加载中"),forbidClick:!0,duration:0}),R(e).then((t=>{this.refreshing&&(this.refreshing=!1),this.pageNum++,this.loading=!1,0==t.pageList.length&&(this.finished=!0);const i=this.list.concat(t.pageList);this.list=0===Number(e.purchStatus)?i.filter((e=>-1!==Number(e.status)&&6!==Number(e.status))):i})).catch((e=>{console.log(e)}))},tab(e,t){this.activeName=e,console.log(this.activeName,"activeName"),this.onRefresh()},onSearch(){this.showSeach=!0,this.$router.push("/order_search")},change(e){this.value=e,this.showSeach=!1},onConfirm2(e){this.title2=this.option2[e].text,this.getOrderList()}}},$=e=>(C("data-v-e2dd8144"),e=e(),k(),e),U={class:"main"},V={class:"seach",style:{"border-radius":"25px"}},J={class:"dropdown"},P={class:"p-2.5 bg-white flex justify-between items-center w-full h-full"},T={class:"text-xs"},z=$((()=>u("div",{class:"triangle"},null,-1))),q={class:"p-2.5 bg-white flex justify-between items-center w-full h-full"},A={class:"text-xs"},Y=$((()=>u("div",{class:"triangle"},null,-1))),B=["onClick"],D=["onClick"],F={class:"main-list"},K={class:"goods"},M=$((()=>u("div",{class:"safe-area-inset-bottom"},null,-1)));e("default",i(E,[["render",function(e,t,i,s,o,a){const n=L,C=_,k=I,O=d,R=l,E=f("orderItem"),$=N,G=j,H=S;return v(),r("div",{id:"order",class:g({"is-ar":o.isArLang})},[h(C,{active:o.activeName,"onUpdate:active":t[0]||(t[0]=e=>o.activeName=e),onClick:a.tab},{default:c((()=>[h(n,{title:o.t("total"),name:""},null,8,["title"]),h(n,{title:o.t("待采购"),name:"0",dot:a.hasNoPushNum},null,8,["title","dot"]),h(n,{title:o.t("已采购"),name:"1"},null,8,["title"])])),_:1},8,["active","onClick"]),u("div",U,[u("div",V,[h(k,{style:{"border-radius":"25px"},readonly:"",onClick:a.onSearch,modelValue:o.orderId,"onUpdate:modelValue":t[1]||(t[1]=e=>o.orderId=e),placeholder:o.t("搜索")},null,8,["onClick","modelValue","placeholder"])]),u("div",J,[u("div",{class:"dropdownitem one h-10.5",onClick:t[2]||(t[2]=e=>a.handleShow(1))},[u("div",P,[u("span",T,p(o.t(o.title1)),1),z])]),u("div",{class:"dropdownitem one h-10.5",onClick:t[3]||(t[3]=e=>a.handleShow(2))},[u("div",q,[u("span",A,p(o.t(o.title2)),1),Y])])]),h(R,{show:o.showCenter,"onUpdate:show":t[4]||(t[4]=e=>o.showCenter=e),round:""},{default:c((()=>[(v(!0),r(m,null,b(o.option1,((e,t)=>(v(),r("div",{onClick:t=>a.handleChoose(e),class:"font-3.5 w-72 h-12 flex justify-center items-center border-bottom relative"},[w(p(o.t(e.text))+" ",1),e.isCurrent?(v(),x(O,{key:0,name:"success",class:"yes"})):y("",!0)],8,B)))),256))])),_:1},8,["show"]),h(R,{show:o.showCenter2,"onUpdate:show":t[5]||(t[5]=e=>o.showCenter2=e),round:""},{default:c((()=>[(v(!0),r(m,null,b(o.option2,((e,t)=>(v(),r("div",{onClick:t=>a.handleChoose2(e),class:"text-xs w-72 h-12 flex justify-center items-center border-bottom relative",key:t+"option2"},[w(p(o.t(e.text))+" ",1),e.isCurrent?(v(),x(O,{key:0,name:"success",class:"yes"})):y("",!0)],8,D)))),128))])),_:1},8,["show"]),u("div",F,[o.list.length>0?(v(),x(G,{key:0,modelValue:o.refreshing,"onUpdate:modelValue":t[7]||(t[7]=e=>o.refreshing=e),onRefresh:a.onRefresh,"loading-text":e.$t("加载中"),"loosing-text":e.$t("释放以刷新"),"pulling-text":e.$t("下拉以刷新")},{default:c((()=>[h($,{"immediate-check":!1,loading:o.loading,"onUpdate:loading":t[6]||(t[6]=e=>o.loading=e),"loading-text":e.$t("加载中"),finished:o.finished,"finished-text":e.$t("noMore"),onLoad:a.getOrderList},{default:c((()=>[u("div",K,[(v(!0),r(m,null,b(o.list,(e=>(v(),x(E,{info:e},null,8,["info"])))),256))])])),_:1},8,["loading","loading-text","finished","finished-text","onLoad"])])),_:1},8,["modelValue","onRefresh","loading-text","loosing-text","pulling-text"])):(v(),x(H,{key:1,description:e.$t("noData")},null,8,["description"])),M])])],2)}],["__scopeId","data-v-e2dd8144"]]))}}}));

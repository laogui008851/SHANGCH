import{_ as X,i as Y,bS as Z,j as ee,v as te,r as n,l as q,p as se,f as oe,c as m,b as i,w as d,u as l,n as O,a as e,t as s,e as $,x as C,b2 as w,ai as ae,T as f,b$ as le,c0 as ne,b9 as ue,o as h,F as ie,s as re,av as p,J as de,K as ce,c1 as pe}from"./index-0001e040.js";import{A as _e}from"./index-087b28a3.js";import{P as ve,N as me}from"./index-3d6fe927.js";/* empty css              */import{C as fe}from"./index-aebf78fc.js";import"./index-9e9f9536.js";import{F as he}from"./index-a602a0f8.js";import{L as ge}from"./index-a026024e.js";import{D as be}from"./decimal-87f76a35.js";import{B as ye}from"./index-3970dd75.js";import"./use-id-a8534a74.js";const P=I=>(de("data-v-dea5e5ed"),I=I(),ce(),I),we=P(()=>e("div",{style:{height:"46px"}},null,-1)),Ie={class:"listitem"},Ne={class:"pic"},$e=["src"],Se={class:"name"},Ve={class:"title"},ke={class:"col"},De={class:"title money"},Le={class:"line"},Ce={class:"line-item"},Pe={class:"count"},xe={class:"line-item"},Be={class:"count"},Fe={key:0,class:"price-content"},Te={class:"line-item"},Ue={class:"count"},qe={class:"line-item"},Oe={class:"count"},je={class:"line-item"},ze={class:"count"},Ae={class:"line-item"},Ee={class:"count"},Ke=P(()=>e("div",{class:"tip pt-2 pb-2 pl-4 pr-4"},"\u8D27\u8FD0\u516C\u53F8",-1)),Re=P(()=>e("div",{class:"tip pt-2 pb-2 pl-4 pr-4"},"\u7269\u6D41\u5355\u53F7",-1)),Ge={key:1,class:"btn"},Je={style:{height:"22rem"}},Me={__name:"qr_order",setup(I){const x=Y(),j=Z(),z=ee(),{t:g}=te.exports.useI18n(),B=ae();let r=n(!0);n(0),n(0),n(0),n(0);const S=n([]),N=n(!1),V=n(!1),k=n({pageNum:1}),F=B.query.id;n(0),n(0);const _=n("");let v=n(!1),b=n(""),y=n("");const u=n({}),T=n(!0),A=q(()=>{var t;return(t=z.userInfo)==null?void 0:t.safeword}),E=()=>{if(b.value==""||y.value=="")return f("\u8BF7\u5B8C\u5584\u53D1\u8D27\u4FE1\u606F"),!1;A.value?(v.value=!0,r.value=!0):(f(g("\u8BF7\u8BBE\u7F6E\u8D44\u91D1\u5BC6\u7801")),setTimeout(()=>{router.push({path:"/fundsPasswordSettings"})},1500))},K=()=>{const t={...k.value,orderId:F};le(t).then(o=>{const c=o.pageList||[];S.value=k.value.pageNum===1?c:[...S.value,...c],k.value.pageNum++,N.value=!1,V.value=o.pageInfo.lastPage}).catch(()=>{V.value=!0,N.value=!1})},R=async()=>{f.loading({forbidClick:!0,duration:0}),await ne({orderId:F}).then(t=>{u.value=t.orderInfo,T.value=!1,f.clear()}).catch(()=>{f.clear()})};se(()=>{R()});const G=()=>{const o={orderId:B.query.id,safeword:_.value};pe(o).then(c=>{j.decrement(),document.dispatchEvent(new CustomEvent("reloadOrderList")),setTimeout(()=>{router.back()},1e3)})};oe(()=>_.value,t=>{t.length===6&&(f.loading(""),G(),v.value=!1,_.value="")});const J=q(()=>{const{sellerDiscountPrice:t,systemPrice:o,fees:c,tax:D}=u.value;return p(Number(t||o)+Number(c)+Number(D))});return(t,o)=>{const c=ue,D=ge,L=he,U=fe,M=ye,H=ve,Q=me,W=_e;return h(),m("div",null,[i(c,{fixed:""},{title:d(()=>[$(s(t.$t("\u91C7\u8D2D\u786E\u8BA4")),1)]),_:1}),we,i(D,{loading:N.value,"onUpdate:loading":o[0]||(o[0]=a=>N.value=a),finished:V.value,"loading-text":l(g)("loading"),onLoad:K},{default:d(()=>[e("div",{class:O(["list",{"is-ar":l(x)}])},[(h(!0),m(ie,null,re(S.value,a=>(h(),m("div",Ie,[e("div",Ne,[e("img",{style:{"object-fit":"contain"},src:a.goodsIcon},null,8,$e)]),e("div",Se,[e("p",Ve,s(a.goodsName),1),e("p",ke,s(t.$t("\u91C7\u8D2D\u6570\u91CF")),1),e("p",De,"$"+s(l(p)(a.systemPrice)),1),e("span",null,"x"+s(a.goodsNum),1)])]))),256))],2)]),_:1},8,["loading","finished","loading-text"]),Object.keys(u.value).length>0?(h(),m("div",{key:0,class:O(["line-content",{"is-ar":l(x)}])},[e("div",Le,[e("div",Ce,[e("p",null,s(t.$t("\u4E70\u5BB6\u4ED8\u6B3E")),1),e("p",Pe,"$"+s(l(p)(u.value.prizeReal)),1)]),e("div",xe,[e("p",null,s(t.$t("\u91C7\u8D2D\u91D1\u989D")),1),e("p",Be,"$"+s(l(p)(u.value.systemPrice)),1)]),u.value.sellerDiscountPrice?(h(),m("div",Fe,[$(s(l(g)("\u4F18\u60E0\u4EF7")),1),e("span",null,"$"+s(l(p)(u.value.sellerDiscountPrice)),1),$(", "+s(l(g)("\u91C7\u8D2D\u4F18\u60E0")),1),e("span",null,s(new(l(be))(u.value.sellerDiscount).mul(100))+"%",1)])):C("",!0),e("div",Te,[e("p",null,s(t.$t("\u91C7\u8D2D\u6570\u91CF")),1),e("p",Ue,s(u.value.goodsCount),1)]),e("div",qe,[e("p",null,s(t.$t("\u8FD0\u8D39")),1),e("p",Oe,"$"+s(l(p)(u.value.fees)),1)]),e("div",je,[e("p",null,s(t.$t("\u7A0E")),1),e("p",ze,"$"+s(l(p)(u.value.tax)),1)]),e("div",Ae,[e("p",null,s(t.$t("\u5408\u8BA1")),1),e("p",Ee,"$"+s(J.value),1)])])],2)):C("",!0),Ke,i(U,{class:"input-field",inset:""},{default:d(()=>[i(L,{modelValue:l(y),"onUpdate:modelValue":o[1]||(o[1]=a=>w(y)?y.value=a:y=a),type:"text",placeholder:"\u8BF7\u8F93\u5165\u7269\u6D41\u516C\u53F8"},{button:d(()=>[]),_:1},8,["modelValue"])]),_:1}),Re,i(U,{class:"input-field",inset:""},{default:d(()=>[i(L,{modelValue:l(b),"onUpdate:modelValue":o[2]||(o[2]=a=>w(b)?b.value=a:b=a),type:"text",placeholder:"\u8BF7\u8F93\u5165\u7269\u6D41\u5355\u53F7"},{button:d(()=>[]),_:1},8,["modelValue"])]),_:1}),!T.value&&u.value.purchStatus/1!==1&&u.value.status/1!==-1&&u.value.status/1!==0&&u.value.status/1!==6?(h(),m("div",Ge,[i(M,{type:"primary",size:"large",onClick:E},{default:d(()=>[$(s(t.$t("\u786E\u8BA4\u53D1\u8D27")),1)]),_:1})])):C("",!0),i(W,{show:l(v),"onUpdate:show":o[6]||(o[6]=a=>w(v)?v.value=a:v=a),title:l(g)("\u8BF7\u8F93\u5165\u4EA4\u6613\u5BC6\u7801")},{default:d(()=>[e("div",Je,[i(H,{length:6,value:_.value,focused:l(r),onFocus:o[3]||(o[3]=a=>w(r)?r.value=!0:r=!0)},null,8,["value","focused"]),i(Q,{modelValue:_.value,"onUpdate:modelValue":o[4]||(o[4]=a=>_.value=a),show:l(r),onBlur:o[5]||(o[5]=a=>w(r)?r.value=!1:r=!1)},null,8,["modelValue","show"])])]),_:1},8,["show","title"])])}}},lt=X(Me,[["__scopeId","data-v-dea5e5ed"]]);export{lt as default};

import{d as Ze,v as Ae,r as s,l as T,I as He,c as D,a as t,e as N,t as u,u as o,b as r,g as xe,bX as ge,F as Ve,s as Ce,w as p,n as be,_ as Te,T as f,o as c,J as Ke,K as Je,j as Oe,i as Xe,p as Qe,f as Ye,aP as el,x,y as A,A as ll,al,b9 as ol,av as J}from"./index-0001e040.js";import{A as tl}from"./index-087b28a3.js";import{P as nl,N as sl}from"./index-3d6fe927.js";/* empty css              */import{C as ul}from"./index-d17abbbe.js";import{P as dl}from"./index-259473f6.js";import"./index-9e9f9536.js";import{F as Ue}from"./index-a602a0f8.js";import{E as rl,i as M}from"./index-93c3e3ac.js";import{b as il,e as cl,a as vl,c as ml,d as pl,f as bl}from"./exchange.api-22acbc66.js";import{E as fl}from"./index-86f75d82.js";import{B as Be}from"./index-3970dd75.js";import{F as hl}from"./index-da87d95b.js";import{D as _l}from"./function-call-75274e81.js";import"./countryList-016fc82e.js";import"./use-id-a8534a74.js";const wl=F=>(Ke("data-v-b7c34e96"),F=F(),Je(),F),yl={class:"form-content"},kl={class:"title-content"},xl={class:"content"},gl={class:"item"},Vl={class:"select-item"},Cl=["value"],Al={class:"item"},Tl={class:"select-item"},Ul=["value"],Bl={class:"item"},Nl={class:"item tips"},Sl=wl(()=>t("div",{class:"bg"},null,-1)),Dl=Ze({name:"AddressBindDialog"}),$l=Object.assign(Dl,{props:{modelValue:{type:Boolean,default:!1},chainData:{type:Array,default:()=>[]}},emits:["update:modelValue","bind-done"],setup(F,{emit:U}){const{t:V}=Ae.exports.useI18n(),l=U,C=F,O=()=>{l("update:modelValue",!1)},h=s("USDT"),S=T(()=>{if(C.chainData.length){const y=[...new Set(C.chainData.map(d=>d.coin).reverse())];if(y.length)return h.value=y[0],y.map(d=>({label:d,value:d}))}return[{label:"USDT",value:"USDT"}]}),g=s("TRC20"),B=T(()=>{if(C.chainData.length){const y=C.chainData.filter(d=>d.coin===h.value);if(y.length)return g.value=y[0].blockchain_name,y.map(d=>({label:d.blockchain_name,value:d.blockchain_name}))}return[{label:"TRC20",value:"TRC20"},{label:"ERC20",value:"ERC20"}]}),$=s(""),ue=y=>/^[0-9A-Za-z]+$/.test(y),R=s(!1),L=()=>{if(!/^[0-9A-Za-z]+$/.test($.value)){f(V("\u63D0\u73B0\u5730\u5740\u53EA\u80FD\u5305\u542B\u6570\u5B57\u548C\u5B57\u6BCD"));return}R.value=!0;const d={coin:h.value,blockchain_name:g.value,channel_address:$.value};il(d).then(()=>{l("bind-done",d)}).finally(()=>{R.value=!1})};return(y,d)=>{const q=He,j=Ue,X=Be;return c(),D("div",{class:be([{active:F.modelValue},"dialog-content"])},[t("div",yl,[t("div",kl,[N(u(o(V)("\u63D0\u6B3E\u5730\u5740\u7ED1\u5B9A"))+" ",1),r(q,{name:"cross",class:"close",onClick:O})]),t("div",xl,[t("div",gl,[t("p",null,u(o(V)("\u53D6\u6B3E\u65B9\u5F0F")),1),t("div",Vl,[N(u(h.value)+" ",1),xe(t("select",{"onUpdate:modelValue":d[0]||(d[0]=w=>h.value=w)},[(c(!0),D(Ve,null,Ce(S.value,(w,z)=>(c(),D("option",{key:z,value:w.value},u(w.label),9,Cl))),128))],512),[[ge,h.value]])])]),t("div",Al,[t("p",null,u(o(V)("\u94FE\u63A5\u534F\u8BAE")),1),t("div",Tl,[N(u(g.value)+" ",1),xe(t("select",{"onUpdate:modelValue":d[1]||(d[1]=w=>g.value=w)},[(c(!0),D(Ve,null,Ce(B.value,(w,z)=>(c(),D("option",{key:z,value:w.value},u(w.label),9,Ul))),128))],512),[[ge,g.value]])])]),t("div",Bl,[t("p",null,u(o(V)("\u6536\u6B3E\u94B1\u5305\u5730\u5740")),1),r(j,{clearable:"",modelValue:$.value,"onUpdate:modelValue":d[2]||(d[2]=w=>$.value=w),rules:[{validator:ue,message:o(V)("\u63D0\u73B0\u5730\u5740\u53EA\u80FD\u5305\u542B\u6570\u5B57\u548C\u5B57\u6BCD"),trigger:"onChange"}],class:"input-item"},null,8,["modelValue","rules"])]),t("div",Nl,u(o(V)("\u4EC5\u80FD\u7ED1\u5B9A\u4E00\u4E2A\u6536\u6B3E\u5730\u5740\uFF01")),1)]),r(X,{class:"w-full btn-content",type:"primary",loading:R.value,onClick:L},{default:p(()=>[N(u(o(V)("\u786E\u8BA4\u7ED1\u5B9A")),1)]),_:1},8,["loading"])]),Sl],2)}}}),Il=Te($l,[["__scopeId","data-v-b7c34e96"]]);const Wl={class:"icon-type-content"},Fl={class:"mb-2.5 text-xs required-txt",style:{color:"#333"}},Rl={key:0,class:"icon-type-content"},ql={class:"mb-2.5 text-xs required-txt",style:{color:"#333"}},Pl={class:"mb-2.5 text-xs required-txt",style:{color:"#333"}},El={class:"mb-5 border border-solid rounded",style:{"border-color":"#eeeeee"}},Ll={class:"mb-2.5 text-xs required-txt",style:{color:"#333"}},Ml={class:"mb-5 nationality-select"},jl={class:"mb-2.5 text-xs required-txt",style:{color:"#333"}},zl={class:"mb-5 border border-solid rounded",style:{"border-color":"#eeeeee"}},Gl={class:"mb-2.5 text-xs required-txt",style:{color:"#333"}},Zl={class:"mb-5 border border-solid rounded",style:{"border-color":"#eeeeee"}},Hl={class:"mb-2.5 text-xs required-txt",style:{color:"#333"}},Kl={class:"mb-5 border border-solid rounded",style:{"border-color":"#eeeeee"}},Jl={class:"mb-2.5 text-xs required-txt",style:{color:"#333"}},Ol={class:"mb-5 border border-solid rounded",style:{"border-color":"#eeeeee"}},Xl={class:"mb-2.5 text-xs",style:{color:"#333"}},Ql={class:"mb-5 border border-solid rounded",style:{"border-color":"#eeeeee"}},Yl={class:"mb-2.5 text-xs",style:{color:"#333"}},ea={class:"mb-5 border border-solid rounded",style:{"border-color":"#eeeeee"}},la={class:"mb-2.5 text-xs",style:{color:"#333"}},aa={class:"mb-5 border border-solid rounded",style:{"border-color":"#eeeeee"}},oa={class:"mb-2.5 text-xs",style:{color:"#333"}},ta={class:"mb-5 border border-solid rounded",style:{"border-color":"#eeeeee"}},na={key:12,class:"current-balance"},sa={key:13,class:"current-balance"},ua={style:{height:"22rem"}},da={__name:"index",setup(F){const U=Oe(),V=ll(),{t:l}=Ae.exports.useI18n(),C="production",O=Xe(),h=s(""),S=s(""),g=s(""),B=s(""),$=s("0.00"),ue=s(0),R=s("0.00"),L=s(!1),y=s(!1),d=a=>[null,void 0,""].includes(a),q=T(()=>["argos"].includes(C)),j=T(()=>["shop2u"].includes(C)),X=s(""),w=s(""),z=a=>{w.value=a.countryName},Ne=a=>/^[0-9A-Za-z]+$/.test(a),de=()=>{vl({channel:v.value==="icon"?_.value:"bank"}).then(a=>{const{withdraw_fee:e}=a;$.value=(e*100).toFixed(2)})},I=s([]),Se=async()=>{await ml().then(a=>{if(a.length){const e=[...new Set(a.map(i=>i.coin).reverse())];_.value=e[0]}else _.value="USDT";I.value=a||[]}).catch(()=>{f.clear()})},Q=s(""),fe=T(()=>{var e,i;let a=[];return Q.value?a=[{label:Q.value,value:Q.value}]:a=I.value.filter(b=>b.coin===_.value).map(b=>({...b,label:b.blockchain_name,value:b.blockchain_name})),a.length&&(h.value=(i=(e=a[0])==null?void 0:e.value)!=null?i:""),a!=null?a:[]}),Y=s(!1),ee=s(!1),G=s(!1),he=s(""),re=async()=>{var a;await pl({session_token:(a=U==null?void 0:U.userInfo)==null?void 0:a.token}).then(e=>{Y.value=Boolean(e.openWithdrawAddressBinding),ee.value=Boolean(e.openWithdrawAddressBinding)&&(!e.chainName||!e.existWithdrawAddress),G.value=Boolean(e.openWithdrawAddressBinding)&&(!e.chainName||!e.existWithdrawAddress),he.value=e.session_token,Boolean(e.openWithdrawAddressBinding)&&(_.value=e.coinType,S.value=e.existWithdrawAddress,Q.value=e.chainName)})},_=s(""),Z=s(!1),De=T(()=>{if(I.value.length){const a=[...new Set(I.value.map(e=>e.coin).reverse())];if(a.length)return a.map(e=>({text:e,value:e}))}return[{text:"USDT",value:"USDT"}]}),$e=()=>{Y.value||(Z.value=!0)},Ie=({value:a})=>{_.value=a,Z.value=!1,de()};Qe(async()=>{f.loading({duration:0,message:l("loading"),forbidClick:!0}),We(),await Se(),await re(),await de(),f.clear()});const We=()=>{cl().then(a=>{ue.value=a.withdrawAmountMin||0,R.value=a.withdrawAmountMax||0})},ie=s(0);T(()=>{const a=B.value,e=$.value,i=M.divide(M.minus(100,e),100),m=M.times(a,i),b=String(m),E=I.value.find(W=>W.coin===_.value&&W.blockchain_name===h.value),k=E?E.fee:0;return ie.value=Number((Number(a)*k).toFixed(2)),b.includes(".")?b.split(".")[1].length===1?b+"0":b:b+".00"}),T(()=>{const a=B.value,e=$.value,i=M.divide(M.minus(100,e),100),m=M.times(a,i),b=I.value.find(W=>W.coin===_.value&&W.blockchain_name===h.value),E=b?b.fee:0,k=m*E;return J(k)});const ce=s(2),P=T(()=>U.userInfo.money),_e=T(()=>{const a=P.value?Number(P.value):0,e=I.value.find(i=>i.coin===_.value&&i.blockchain_name===h.value);return e?(ce.value=_.value==="BTC"||_.value==="ETH"?6:2,Number(a/Number(e.fee))):0}),Fe=()=>{if(!G.value){const a=Number(J(_e.value,ce.value).replace(/,/g,""));B.value=a}},we=()=>{V.push({name:"WithdrawRecord"})},Re=()=>{var a;if(console.log("sss"),v.value==="icon"){if(!/^[0-9A-Za-z]+$/.test(S.value)){f(l("\u63D0\u73B0\u5730\u5740\u53EA\u80FD\u5305\u542B\u6570\u5B57\u548C\u5B57\u6BCD"));return}if(d(h.value)){f(l("blockchainNetworkRequire"));return}if(d(S.value)){f(l("withdrawalAddressRequire"));return}if(ie.value>P.value){f(l("\u4F59\u989D\u4E0D\u8DB3"));return}if(ie.value>R.value){f(`${l("\u63D0\u6B3E\u91D1\u989D\u4E0D\u5F97\u9AD8\u4E8E\u6700\u5927\u63D0\u6B3E\u9650\u989D")}: ${R.value}USDT`);return}}if(v.value==="bank"){if(j.value&&d(w.value)){f(l("selectNation"));return}if(d(ae.value)){f(l("\u8BF7\u8F93\u5165\u5F00\u6237\u884C\u540D\u79F0"));return}if(d(oe.value)){f(l("entryName"));return}if(d(te.value)){f(l("\u8BF7\u8F93\u5165\u5361\u53F7"));return}if(d(se.value)){f(l("\u8BF7\u8F93\u5165\u94F6\u884C\u4EE3\u7801"));return}}if(d(B.value)){f(l("withdrawalAmountRequire"));return}((a=U==null?void 0:U.userInfo)==null?void 0:a.safeword)===1?(L.value=!0,H.value=!0):_l.confirm({title:l("dialogTips"),message:l("shopSafeWord"),cancelButtonText:l("cancel"),confirmButtonText:l("gotoSet"),confirmButtonColor:"#1552F0",cancelButtonColor:"#999"}).then(()=>{al("/personalInfo")}).catch(()=>{console.log("cancel")})},qe=a=>{_.value=a.coin,h.value=a.blockchain_name,S.value=a.channel_address,G.value=!1,ee.value=!1},Pe=async()=>{const a=fe.value.find(m=>m.blockchain_name===h.value),e=a?a.coin:"USDT",i={safeword:g.value,amount:B.value,from:S.value,channel:e,session_token:he.value};v.value==="bank"&&(i.channel="bank",i.bankName=ae.value,i.bankUserName=oe.value,i.bankCardNo=te.value,i.bankCode=se.value,q.value&&(i.swiftCode=ne.value||"",i.routingNum=ne.value||"",i.accountAddress=me.value||"",i.bankAddress=pe.value||""),j.value&&(i.countryName=w.value||"")),y.value=!0,bl(i).then(async()=>{await U.getUserInfo(!0),f(l("withdrawalApplySuccess")),re(),setTimeout(()=>{we()},1500)}).finally(()=>{y.value=!1,re()})},H=s(!0);Ye(()=>g.value,a=>{a.length===6&&(f.loading({duration:0,forbidClick:!0}),Pe(),L.value=!1,g.value="")});const Ee=T(()=>{const a="production";return!["tiktok-wholesale"].includes(a)});let le="\u865A\u62DF\u5E01";["familyShop","sm"].includes(C)&&(le="\u52A0\u5BC6\u8D27\u5E01"),["argos2"].includes(C)&&(le="\u8D27\u5E01");const ve=s(l(le)),v=s("icon"),ye=s([{text:l(le),value:"icon"}]);Ee.value&&ye.value.push({text:["sm"].includes(C)?l("\u94F6\u884C\u53612"):l("\u94F6\u884C\u5361"),value:"bank"});const K=s(!1),ae=s(""),oe=s(""),te=s(""),ke=s(""),ne=s(""),me=s(""),pe=s(""),se=s(""),Le=a=>{a.value==="bank"&&["familyShop","sm"].includes(C)?V.push({path:"/customerService"}):(ve.value=a.text,v.value=a.value,K.value=!1,B.value="",de())};return(a,e)=>{const i=ol,m=Ue,b=dl,E=el,k=hl,W=ul,Me=Be,je=nl,ze=sl,Ge=tl;return c(),D("div",null,[r(i,null,{title:p(()=>[t("div",null,u(o(l)("withdrawal")),1)]),right:p(()=>[t("div",{onClick:we},u(o(l)("withdrawalRecord")),1)]),_:1}),t("div",{class:be(["withdraw",{"is-ar":o(O)}])},[t("div",Wl,[t("div",Fl,u(o(l)("\u53D6\u6B3E\u65B9\u5F0F")),1),r(m,{modelValue:ve.value,"onUpdate:modelValue":e[0]||(e[0]=n=>ve.value=n),readonly:"",name:"picker",onClick:e[1]||(e[1]=n=>K.value=!0)},null,8,["modelValue"]),r(E,{show:K.value,"onUpdate:show":e[3]||(e[3]=n=>K.value=n),position:"bottom"},{default:p(()=>[r(b,{columns:ye.value,"cancel-button-text":o(l)("cancel"),"confirm-button-text":o(l)("confirm"),onConfirm:Le,onCancel:e[2]||(e[2]=n=>K.value=!1)},null,8,["columns","cancel-button-text","confirm-button-text"])]),_:1},8,["show"])]),v.value==="icon"?(c(),D("div",Rl,[t("div",ql,u(o(l)("\u9009\u62E9\u5E01\u79CD")),1),r(m,{modelValue:_.value,"onUpdate:modelValue":e[4]||(e[4]=n=>_.value=n),readonly:"",name:"picker",onClick:$e},null,8,["modelValue"]),r(E,{show:Z.value,"onUpdate:show":e[6]||(e[6]=n=>Z.value=n),position:"bottom"},{default:p(()=>[r(b,{columns:De.value,"cancel-button-text":o(l)("cancel"),"confirm-button-text":o(l)("confirm"),onConfirm:Ie,onCancel:e[5]||(e[5]=n=>Z.value=!1)},null,8,["columns","cancel-button-text","confirm-button-text"])]),_:1},8,["show"])])):x("",!0),v.value==="icon"?(c(),A(rl,{key:1,list:fe.value,label:o(l)("blockchainNetwork"),disabled:Y.value,modelValue:h.value,"onUpdate:modelValue":e[7]||(e[7]=n=>h.value=n)},null,8,["list","label","disabled","modelValue"])):x("",!0),v.value==="icon"?(c(),A(k,{key:2},{default:p(()=>[t("div",Pl,u(o(l)("withdrawalAddress")),1),t("div",El,[r(m,{clearable:"",modelValue:S.value,"onUpdate:modelValue":e[8]||(e[8]=n=>S.value=n),disabled:Y.value,placeholder:o(l)("withdrawalAddressTips"),rules:[{validator:Ne,message:o(l)("\u63D0\u73B0\u5730\u5740\u53EA\u80FD\u5305\u542B\u6570\u5B57\u548C\u5B57\u6BCD"),trigger:"onChange"}]},null,8,["modelValue","disabled","placeholder","rules"])])]),_:1})):x("",!0),v.value==="bank"&&j.value?(c(),A(k,{key:3},{default:p(()=>[t("div",Ll,u(o(l)("\u56FD\u5BB6")),1),t("div",Ml,[r(W,{modelValue:X.value,"onUpdate:modelValue":e[9]||(e[9]=n=>X.value=n),"get-name":"true",onDone:z},null,8,["modelValue"])])]),_:1})):x("",!0),v.value==="bank"?(c(),A(k,{key:4},{default:p(()=>[t("div",jl,u(o(l)("\u5F00\u6237\u884C")),1),t("div",zl,[r(m,{clearable:"",modelValue:ae.value,"onUpdate:modelValue":e[10]||(e[10]=n=>ae.value=n),placeholder:o(l)("\u8BF7\u8F93\u5165\u5F00\u6237\u884C\u540D\u79F0")},null,8,["modelValue","placeholder"])])]),_:1})):x("",!0),v.value==="bank"?(c(),A(k,{key:5},{default:p(()=>[t("div",Gl,u(o(l)("\u59D3\u540D")),1),t("div",Zl,[r(m,{clearable:"",modelValue:oe.value,"onUpdate:modelValue":e[11]||(e[11]=n=>oe.value=n),placeholder:o(l)("entryName")},null,8,["modelValue","placeholder"])])]),_:1})):x("",!0),v.value==="bank"?(c(),A(k,{key:6},{default:p(()=>[t("div",Hl,u(o(l)("\u94F6\u884C\u4EE3\u7801")),1),t("div",Kl,[r(m,{clearable:"",modelValue:se.value,"onUpdate:modelValue":e[12]||(e[12]=n=>se.value=n),placeholder:o(l)("\u8BF7\u8F93\u5165\u94F6\u884C\u4EE3\u7801")},null,8,["modelValue","placeholder"])])]),_:1})):x("",!0),v.value==="bank"?(c(),A(k,{key:7},{default:p(()=>[t("div",Jl,u(o(l)("\u5361\u53F7")),1),t("div",Ol,[r(m,{clearable:"",modelValue:te.value,"onUpdate:modelValue":e[13]||(e[13]=n=>te.value=n),placeholder:o(l)("\u8BF7\u8F93\u5165\u5361\u53F7")},null,8,["modelValue","placeholder"])])]),_:1})):x("",!0),v.value==="bank"&&q.value?(c(),A(k,{key:8},{default:p(()=>[t("div",Xl,u(o(l)("\u56FD\u9645\u4EE3\u7801")),1),t("div",Ql,[r(m,{clearable:"",modelValue:ke.value,"onUpdate:modelValue":e[14]||(e[14]=n=>ke.value=n),placeholder:o(l)("\u8BF7\u8F93\u5165\u56FD\u9645\u4EE3\u7801")},null,8,["modelValue","placeholder"])])]),_:1})):x("",!0),v.value==="bank"&&q.value?(c(),A(k,{key:9},{default:p(()=>[t("div",Yl,u(o(l)("\u8DEF\u7531\u53F7\u7801")),1),t("div",ea,[r(m,{clearable:"",modelValue:ne.value,"onUpdate:modelValue":e[15]||(e[15]=n=>ne.value=n),placeholder:o(l)("\u8BF7\u8F93\u5165\u8DEF\u7531\u53F7\u7801")},null,8,["modelValue","placeholder"])])]),_:1})):x("",!0),v.value==="bank"&&q.value?(c(),A(k,{key:10},{default:p(()=>[t("div",la,u(o(l)("\u8D26\u6237\u5730\u5740")),1),t("div",aa,[r(m,{clearable:"",modelValue:me.value,"onUpdate:modelValue":e[16]||(e[16]=n=>me.value=n),placeholder:o(l)("\u8BF7\u8F93\u5165\u8D26\u6237\u5730\u5740")},null,8,["modelValue","placeholder"])])]),_:1})):x("",!0),v.value==="bank"&&q.value?(c(),A(k,{key:11},{default:p(()=>[t("div",oa,u(o(l)("\u94F6\u884C\u5730\u5740")),1),t("div",ta,[r(m,{clearable:"",modelValue:pe.value,"onUpdate:modelValue":e[17]||(e[17]=n=>pe.value=n),placeholder:o(l)("\u8BF7\u8F93\u5165\u94F6\u884C\u5730\u5740")},null,8,["modelValue","placeholder"])])]),_:1})):x("",!0),r(fl,{label:o(l)("withdrawalAmount"),placeholderText:o(l)("withdrawalAmountTips"),modelValue:B.value,"onUpdate:modelValue":e[18]||(e[18]=n=>B.value=n),maxLength:16,disabled:G.value,required:"",typeText:"number"},{rightBtn:p(()=>[t("div",{class:be(["withdraw-all",{"is-ar":o(O)}]),onClick:Fe,style:{"min-width":"40px"}},u(o(l)("total")),3)]),_:1},8,["label","placeholderText","modelValue","disabled"]),(P.value||P.value===0)&&_.value&&v.value==="icon"?(c(),D("div",na,[N(u(o(l)("\u5F53\u524D\u4F59\u989D"))+": ",1),t("span",null,u(o(J)(P.value)),1),N("USDT \u2248 "),t("span",null,u(o(J)(_e.value,ce.value)),1),N(u(_.value),1)])):x("",!0),v.value!=="icon"?(c(),D("div",sa,[N(u(o(l)("\u5F53\u524D\u4F59\u989D"))+": ",1),t("span",null,u(o(J)(P.value)),1),N("USD ")])):x("",!0),r(Me,{class:"w-full btn-content",type:"primary",disabled:G.value,onClick:Re},{default:p(()=>[N(u(o(l)("submit")),1)]),_:1},8,["disabled"]),r(Ge,{show:L.value,"onUpdate:show":e[22]||(e[22]=n=>L.value=n),title:o(l)("\u8BF7\u8F93\u5165\u4EA4\u6613\u5BC6\u7801")},{default:p(()=>[t("div",ua,[r(je,{length:6,value:g.value,focused:H.value,onFocus:e[19]||(e[19]=n=>H.value=!0)},null,8,["value","focused"]),r(ze,{modelValue:g.value,"onUpdate:modelValue":e[20]||(e[20]=n=>g.value=n),show:H.value,onBlur:e[21]||(e[21]=n=>H.value=!1)},null,8,["modelValue","show"])])]),_:1},8,["show","title"])],2),r(Il,{modelValue:ee.value,"onUpdate:modelValue":e[23]||(e[23]=n=>ee.value=n),"chain-data":I.value,onBindDone:qe},null,8,["modelValue","chain-data"])])}}},Ca=Te(da,[["__scopeId","data-v-1b86f6a0"]]);export{Ca as default};

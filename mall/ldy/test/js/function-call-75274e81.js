import{Q as k,d as T,r as N,aJ as V,a9 as $,a0 as x,b as a,$ as D,R as g,S as W,W as Q,l as _,ac as j,aK as J,V as Y,a1 as q,U as G,aL as X,m as Z,aM as ee,aN as A,ag as I,aO as te,ab as ne,aP as oe,aQ as ae,a7 as le,aR as se,aS as re,aT as ce,aU as ie,aV as ue}from"./index-0001e040.js";import{B as O}from"./index-3970dd75.js";const[K,R]=k("action-bar"),F=Symbol(K),de={placeholder:Boolean,safeAreaInsetBottom:x};var fe=T({name:K,props:de,setup(e,{slots:l}){const o=N(),r=V(o,R),{linkChildren:c}=$.useChildren(F);c();const m=()=>{var B;return a("div",{ref:o,class:[R(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(B=l.default)==null?void 0:B.call(l)])};return()=>e.placeholder?r(m):m()}});const me=D(fe),[Be,ge]=k("action-bar-button"),he=g({},W,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Ce=T({name:Be,props:he,setup(e,{slots:l}){const o=Q(),{parent:r,index:c}=$.useParent(F),m=_(()=>{if(r){const i=r.children[c.value-1];return!(i&&"isButton"in i)}}),B=_(()=>{if(r){const i=r.children[c.value+1];return!(i&&"isButton"in i)}});return j({isButton:!0}),()=>{const{type:i,icon:h,text:C,color:y,loading:P,disabled:p}=e;return a(O,{class:ge([i,{last:B.value,first:m.value}]),size:"large",type:i,icon:h,color:y,loading:P,disabled:p,onClick:o},{default:()=>[l.default?l.default():C]})}}});const E=D(Ce),[be,u,v]=k("dialog"),we=g({},J,{title:String,theme:String,width:Y,message:[String,Function],callback:Function,allowHtml:Boolean,className:q,transition:G("van-dialog-bounce"),messageAlign:String,closeOnPopstate:x,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:x,closeOnClickOverlay:Boolean}),ve=[...X,"transition","closeOnPopstate"];var H=T({name:be,props:we,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:l,slots:o}){const r=N(),c=Z({confirm:!1,cancel:!1}),m=t=>l("update:show",t),B=t=>{var s;m(!1),(s=e.callback)==null||s.call(e,t)},i=t=>()=>{!e.show||(l(t),e.beforeClose?(c[t]=!0,ae(e.beforeClose,{args:[t],done(){B(t),c[t]=!1},canceled(){c[t]=!1}})):B(t))},h=i("cancel"),C=i("confirm"),y=ee(t=>{var s,d;if(t.target!==((d=(s=r.value)==null?void 0:s.popupRef)==null?void 0:d.value))return;({Enter:e.showConfirmButton?C:A,Escape:e.showCancelButton?h:A})[t.key](),l("keydown",t)},["enter","esc"]),P=()=>{const t=o.title?o.title():e.title;if(t)return a("div",{class:u("header",{isolated:!e.message&&!o.default})},[t])},p=t=>{const{message:s,allowHtml:d,messageAlign:f}=e,w=u("message",{"has-title":t,[f]:f}),S=le(s)?s():s;return d&&typeof S=="string"?a("div",{class:w,innerHTML:S},null):a("div",{class:w},[S])},U=()=>{if(o.default)return a("div",{class:u("content")},[o.default()]);const{title:t,message:s,allowHtml:d}=e;if(s){const f=!!(t||o.title);return a("div",{key:d?1:0,class:u("content",{isolated:!f})},[p(f)])}},L=()=>a("div",{class:[re,u("footer")]},[e.showCancelButton&&a(O,{size:"large",text:e.cancelButtonText||v("cancel"),class:u("cancel"),style:{color:e.cancelButtonColor},loading:c.cancel,disabled:e.cancelButtonDisabled,onClick:h},null),e.showConfirmButton&&a(O,{size:"large",text:e.confirmButtonText||v("confirm"),class:[u("confirm"),{[se]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:c.confirm,disabled:e.confirmButtonDisabled,onClick:C},null)]),z=()=>a(me,{class:u("footer")},{default:()=>[e.showCancelButton&&a(E,{type:"warning",text:e.cancelButtonText||v("cancel"),class:u("cancel"),color:e.cancelButtonColor,loading:c.cancel,disabled:e.cancelButtonDisabled,onClick:h},null),e.showConfirmButton&&a(E,{type:"danger",text:e.confirmButtonText||v("confirm"),class:u("confirm"),color:e.confirmButtonColor,loading:c.confirm,disabled:e.confirmButtonDisabled,onClick:C},null)]}),M=()=>o.footer?o.footer():e.theme==="round-button"?z():L();return()=>{const{width:t,title:s,theme:d,message:f,className:w}=e;return a(oe,I({ref:r,role:"dialog",class:[u([d]),w],style:{width:ne(t)},tabindex:0,"aria-labelledby":s||f,onKeydown:y,"onUpdate:show":m},te(e,ve)),{default:()=>[P(),U(),M()]})}}});let b;function ye(){({instance:b}=ie({setup(){const{state:l,toggle:o}=ue();return()=>a(H,I(l,{"onUpdate:show":o}),null)}}))}function n(e){return ce?new Promise((l,o)=>{b||ye(),b.open(g({},n.currentOptions,e,{callback:r=>{(r==="confirm"?l:o)(r)}}))}):Promise.resolve()}n.defaultOptions={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};n.currentOptions=g({},n.defaultOptions);n.alert=n;n.confirm=e=>n(g({showCancelButton:!0},e));n.close=()=>{b&&b.toggle(!1)};n.setDefaultOptions=e=>{g(n.currentOptions,e)};n.resetDefaultOptions=()=>{n.currentOptions=g({},n.defaultOptions)};n.Component=D(H);n.install=e=>{e.use(n.Component),e.config.globalProperties.$dialog=n};export{n as D};

System.register(["./index-legacy-6ad9d2f3.js","./index-legacy-f9c0699e.js","./index-legacy-e24b168f.js","./index-legacy-de2c7a03.js","./login.api-legacy-15506a35.js","./index-legacy-81046b99.js","./use-id-legacy-5e608c80.js"],(function(e,t){"use strict";var n,a,i,o,l,c,d,r,f,s,u,v,p,b,x,g,y,m,h,k,w,j,I,_,C,V,q,z,F,S=document.createElement("style");return S.textContent=".verify-content[data-v-a4e7f271]{min-height:100vh;background-color:#fff}.info-content[data-v-a4e7f271]{padding:0 20px;color:#333}.info-content>.info-item[data-v-a4e7f271]{margin-top:30px}.info-content>.info-item[data-v-a4e7f271]:last-child{margin-top:20px}.info-content>.info-item>.gap[data-v-a4e7f271]{margin-bottom:10px}.info-content>.info-item h2[data-v-a4e7f271]{font-size:20px;font-weight:700}.info-content>.info-item p[data-v-a4e7f271]{font-size:14px}.info-content .code-content[data-v-a4e7f271]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-top:35px}.info-content .code-content.is-ar[data-v-a4e7f271] .van-field__control{text-align:right}.info-content .code-content .van-cell[data-v-a4e7f271]{width:185px;height:44px;border:1px solid #ddd;border-radius:4px}.info-content .code-content .van-cell[data-v-a4e7f271]:after{border:none}.info-content .code-content>.btn[data-v-a4e7f271]{-webkit-box-flex:1;-webkit-flex:1 1;flex:1 1;padding-left:15px}.info-content .code-content>.btn.is-ar[data-v-a4e7f271]{padding-right:15px;padding-left:0}.info-content .code-content>.btn .van-button[data-v-a4e7f271]{width:100%;height:44px;border-radius:4px;background-color:var(--site-main-color);border-color:var(--site-main-color)}.info-content>.change-ver-type[data-v-a4e7f271]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;color:var(--site-main-color);margin-top:10px}.info-content>.change-ver-type>p[data-v-a4e7f271]{font-size:14px;padding-left:5px;font-weight:700}.submit-content[data-v-a4e7f271]{width:100%;position:fixed;left:0;bottom:60px;padding:0 20px}.submit-content .van-button[data-v-a4e7f271]{width:100%;height:44px;border-radius:4px;background-color:var(--site-main-color);border-color:var(--site-main-color)}\n",document.head.appendChild(S),{setters:[e=>{n=e._,a=e.j,i=e.v,o=e.r,l=e.p,c=e.i,d=e.l,r=e.c,f=e.b,s=e.w,u=e.a,v=e.t,p=e.u,b=e.x,x=e.e,g=e.n,y=e.ai,m=e.A,h=e.T,k=e.cc,w=e.b9,j=e.o,I=e.cb,_=e.F,C=e.J,V=e.K},()=>{},()=>{},e=>{q=e.F},e=>{z=e.a},e=>{F=e.B},()=>{}],execute:function(){const t={class:"verify-content"},S=(e=>(C("data-v-a4e7f271"),e=e(),V(),e))((()=>u("div",{style:{height:"46px"}},null,-1))),U={class:"info-content"},A={class:"info-item"},B={class:"info-item"},E={class:"gap"},J={key:0},K={class:"submit-content"};e("default",n({__name:"index",setup(e){const n=a(),{t:C}=i.exports.useI18n(),V=y(),N=m(),T=o(1),D=o("44"),G=o(""),H=o(0),L=o(null),M=o(!1);T.value=V.query&&V.query.type?Number(V.query.type):1,l((()=>{clearInterval(L.value),L.value=null}));const O=c(),P=d((()=>{if(n.userInfo.token){const{email:e,phone:t}=n.userInfo;let a="";if(1===T.value){if(t){const e=t.split(" ");2===e.length?(D.value=e[0],a=e[1]):a=e[0]}}else a=e||"";return a}N.push("/login")})),Q=()=>{if(H.value>0)return!1;const{email:e,phone:t}=n.userInfo;h.loading({duration:0,forbidClick:!0}),z({target:1===T.value?t:e}).then((()=>{h(C("sendSuccess")),H.value=60,L.value=setInterval((()=>{H.value>0?H.value=H.value-1:(H.value=0,clearInterval(L.value),L.value=null)}),1e3)})).catch((()=>{h.clear()}))},R=async()=>{if(""===G.value)return void h(C("entryVerifyCode"));M.value=!0;const{email:e,phone:t}=n.userInfo,a={target:1===T.value?t:e,verifcode:G.value};1===T.value?a.phone=t:a.email=e,k(a).then((async e=>{await n.getUserInfo(!0),M.value=!1,N.back()})).catch((()=>{M.value=!1}))};return(e,n)=>{const a=w,i=q,o=F;return j(),r("div",t,[f(a,{fixed:!0},{title:s((()=>[x(v(1===T.value?p(C)("手机验证"):p(C)("邮箱验证")),1)])),_:1}),S,u("div",U,[u("div",A,[u("p",null,v(p(C)("为了保障您的账号安全，请验证后进行下一步操作")),1)]),u("div",B,[u("p",E,v(1===T.value?p(C)("当前绑定手机号"):p(C)("当前绑定邮箱")),1),u("h2",null,[1===T.value?(j(),r("span",J,"(+"+v(D.value)+")",1)):b("",!0),x(v(p(I)(P.value,!1)),1)])]),u("div",{class:g(["code-content",{"is-ar":p(O)}])},[f(i,{modelValue:G.value,"onUpdate:modelValue":n[0]||(n[0]=e=>G.value=e),type:"tel",label:"",placeholder:p(C)("entryVerifyCode")},null,8,["modelValue","placeholder"]),u("div",{class:g(["btn",{"is-ar":p(O)}])},[f(o,{type:"primary",onClick:Q},{default:s((()=>[x(v(p(C)("sendVerifyCode")),1),H.value?(j(),r(_,{key:0},[x("("+v(H.value)+")s",1)],64)):b("",!0)])),_:1})],2)],2)]),u("div",K,[f(o,{type:"primary",loading:M.value,onClick:R},{default:s((()=>[x(v(p(C)("confirm")),1)])),_:1},8,["loading"])])])}}},[["__scopeId","data-v-a4e7f271"]]))}}}));

import{_ as H,d as V,v as E,i as O,r as f,q as C,c as n,b,w as L,b9 as P,o as a,e as R,t as d,u as s,F as A,s as j,a as p,n as $,x as T,y as B,J as D,K as F,cE as J,cF as U,al as q,cG as G}from"./index-0001e040.js";import{P as K}from"./index-d2d7f06b.js";import{L as Q}from"./index-a026024e.js";import{E as W}from"./index-1b41dac3.js";import{m as i}from"./config-7ce0b469.js";import"./use-id-a8534a74.js";const X=h=>(D("data-v-87f17dce"),h=h(),F(),h),Y={class:"page-main-content"},Z=X(()=>p("div",{style:{height:"46px"}},null,-1)),ee={key:0,class:"list-content"},se=["onClick"],te={class:"title-content"},ae={class:"title"},ne={key:0,class:"txt"},oe=["innerHTML"],le=["innerHTML"],re=["innerHTML"],ie=["innerHTML"],ce=["innerHTML"],ue={key:0},de={key:1,class:"txt"},pe=V({name:"MessageSystem"}),_e=Object.assign(pe,{setup(h){const{t:l}=E.exports.useI18n(),M=O(),N=new URL("/www/png/name-20d65991.png",self.location),g=f([]),y=f(!1),_=f(!0),x=f(!1),v=f({pageSize:20,pageNum:1}),S=()=>{const t={...v.value,totalElements:-1,type:3,status:0,module:1};J(t).then(r=>{const u=r.elements||[];u.forEach(o=>{const c={};(o.varInfo?JSON.parse(o.varInfo):[]).forEach(e=>{c[e.code]=["complaintReason"].includes(e.code)?l(e.value):e.value}),o.timeStr=U(o.sendTime,!0),o.varObj=c}),g.value=v.value.pageNum===1?u:[...g.value,...u],_.value=!1,y.value=!1,x.value=r.totalPage===v.value.pageNum||!r.totalPage,v.value.pageNum+=1}).catch(()=>{x.value=!0,_.value=!1,y.value=!1})},z=()=>{_.value=!0,v.value.pageNum=1,S()},w=t=>{q({path:"/message/details",query:{id:t.id}}),t.status!==2&&G({ids:t.id}).then(()=>{t.status=2})},m=(t,r)=>{const o=(t.varInfo?JSON.parse(t.varInfo):[]).find(c=>c.code===r);return o?o.value:"0"},k=(t,r)=>{const o=(t.varInfo?JSON.parse(t.varInfo):[]).find(c=>c.code===r);return o?o.value:""};return C(()=>{document.addEventListener("systemListRefresh",()=>{z()},!1)}),(t,r)=>{const u=P,o=W,c=Q,I=K;return a(),n("div",Y,[b(u,{fixed:!0},{title:L(()=>[R(d(t.$t("\u7CFB\u7EDF\u6D88\u606F")),1)]),_:1}),Z,b(I,{modelValue:y.value,"onUpdate:modelValue":r[1]||(r[1]=e=>y.value=e),"loading-text":t.$t("\u52A0\u8F7D\u4E2D"),"loosing-text":t.$t("\u91CA\u653E\u4EE5\u5237\u65B0"),"pulling-text":t.$t("\u4E0B\u62C9\u4EE5\u5237\u65B0"),onRefresh:z},{default:L(()=>[b(c,{loading:_.value,"onUpdate:loading":r[0]||(r[0]=e=>_.value=e),finished:x.value,"loading-text":s(l)("loading"),"finished-text":s(l)("product.3"),onLoad:S},{default:L(()=>[g.value.length?(a(),n("div",ee,[(a(!0),n(A,null,j(g.value,e=>(a(),n("div",{key:e.id,class:"item-list",onClick:ge=>w(e)},[p("div",te,[p("div",ae,[e.status===1?(a(),n("div",{key:0,class:$(["tips",{"is-ar":s(M)}])},null,2)):T("",!0),p("p",null,d(s(l)(s(i)[e.bizType].title)),1)]),p("p",null,d(e.timeStr),1)]),s(i)[e.bizType].key?(a(),n("p",ne,[s(i)[e.bizType].key==="creditScore"?(a(),n("span",{key:0,innerHTML:s(l)("systemMsgScore",{creditScore:m(e,s(i)[e.bizType].key)})},null,8,oe)):e.bizType==="inbox_recharge_success"?(a(),n("span",{key:1,innerHTML:s(l)("rechargeSuccessTips",{orderAmount:m(e,"orderAmount")})},null,8,le)):e.bizType==="inbox_withdraw_success"?(a(),n("span",{key:2,innerHTML:s(l)("withdrawalSuccessTips",{orderAmount:m(e,"orderAmount")})},null,8,re)):e.bizType==="inbox_store_audit_fail"?(a(),n("span",{key:3,innerHTML:s(l)("storeAuthenticationFailedTips",{shop_name:k(e,"shop_name"),reason:k(e,"reason")})},null,8,ie)):e.bizType==="inbox_store_audit_success"?(a(),n("span",{key:4,innerHTML:s(l)("storeAuthenticationPassedTips",{shop_name:k(e,"shop_name")})},null,8,ce)):(a(),n(A,{key:5},[p("span",null,d(s(l)(s(i)[e.bizType].txt)),1),p("span",null,d(m(e,s(i)[e.bizType].key)),1),s(i)[e.bizType].txt1?(a(),n("span",ue,d(s(l)(s(i)[e.bizType].txt1)),1)):T("",!0)],64))])):(a(),n("p",de,d(s(l)(s(i)[e.bizType].txt,e.varObj)),1))],8,se))),128))])):T("",!0),!g.value.length&&!_.value?(a(),B(o,{key:1,image:s(N).href},null,8,["image"])):T("",!0)]),_:1},8,["loading","finished","loading-text","finished-text"])]),_:1},8,["modelValue","loading-text","loosing-text","pulling-text"])])}}}),xe=H(_e,[["__scopeId","data-v-87f17dce"]]);export{xe as default};

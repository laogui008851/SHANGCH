System.register(["./index-legacy-6ad9d2f3.js","./index-legacy-f9c0699e.js","./index-legacy-e24b168f.js","./index-legacy-de2c7a03.js","./login.api-legacy-15506a35.js","./index-legacy-81046b99.js","./use-id-legacy-5e608c80.js"],(function(e,t){"use strict";var n,a,i,o,l,c,d,r,s,u,v,p,f,b,x,g,y,h,m,k,w,j,C,I,_,V,q,z,S,T,F=document.createElement("style");return F.textContent=".verify-content[data-v-6ca68eee]{min-height:100vh;background-color:#fff}.info-content[data-v-6ca68eee]{padding:0 20px;color:#333}.info-content>.info-item[data-v-6ca68eee]{margin-top:30px}.info-content>.info-item[data-v-6ca68eee]:last-child{margin-top:20px}.info-content>.info-item>.gap[data-v-6ca68eee]{margin-bottom:10px}.info-content>.info-item h2[data-v-6ca68eee]{font-size:20px;font-weight:700}.info-content>.info-item p[data-v-6ca68eee]{font-size:14px}.info-content .code-content[data-v-6ca68eee]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-top:35px}.info-content .code-content.is-ar[data-v-6ca68eee] .van-field__control{text-align:right}.info-content .code-content .van-cell[data-v-6ca68eee]{width:185px;height:44px;border:1px solid #ddd;border-radius:4px}.info-content .code-content .van-cell[data-v-6ca68eee]:after{border:none}.info-content .code-content>.btn[data-v-6ca68eee]{-webkit-box-flex:1;-webkit-flex:1 1;flex:1 1;padding-left:15px}.info-content .code-content>.btn.is-ar[data-v-6ca68eee]{padding-right:15px;padding-left:0}.info-content .code-content>.btn .van-button[data-v-6ca68eee]{width:100%;height:44px;border-radius:4px;background-color:var(--site-main-color);border-color:var(--site-main-color)}.info-content>.change-ver-type[data-v-6ca68eee]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;color:var(--site-main-color);margin-top:10px}.info-content>.change-ver-type>p[data-v-6ca68eee]{font-size:14px;padding-left:5px;font-weight:700}.submit-content[data-v-6ca68eee]{width:100%;position:fixed;left:0;bottom:60px;padding:0 20px}.submit-content .van-button[data-v-6ca68eee]{width:100%;height:44px;border-radius:4px;background-color:var(--site-main-color);border-color:var(--site-main-color)}\n",document.head.appendChild(F),{setters:[e=>{n=e._,a=e.j,i=e.i,o=e.v,l=e.r,c=e.p,d=e.l,r=e.I,s=e.c,u=e.b,v=e.w,p=e.a,f=e.t,b=e.u,x=e.x,g=e.e,y=e.n,h=e.ai,m=e.A,k=e.T,w=e.ca,j=e.b9,C=e.o,I=e.cb,_=e.F,V=e.J,q=e.K},()=>{},()=>{},e=>{z=e.F},e=>{S=e.a},e=>{T=e.B},()=>{}],execute:function(){const t={class:"verify-content"},F=(e=>(V("data-v-6ca68eee"),e=e(),q(),e))((()=>p("div",{style:{height:"46px"}},null,-1))),N={class:"info-content"},$={class:"info-item"},A={class:"gap"},B={class:"info-item"},E={class:"gap"},J={key:0},K={class:"change-ver-type"},U={class:"submit-content"};e("default",n({__name:"index",setup(e){const n=a(),V=i(),{t:q}=o.exports.useI18n(),D=h(),G=m(),H=l(1),L=l(1),M=l("44"),O=l(""),P=l(0),Q=l(null),R=l(!1);H.value=D.query&&D.query.type?Number(D.query.type):1,L.value=D.query&&D.query.verType?Number(D.query.verType):1,c((()=>{clearInterval(Q.value),Q.value=null}));const W=d((()=>{if(n.userInfo.token){const{email:e,phone:t}=n.userInfo;let a="";if(1===H.value){if(t){const e=t.split(" ");2===e.length?(M.value=e[0],a=e[1]):a=e[0]}}else a=e||"";return a}G.push("/login")})),X=()=>{if(P.value>0)return!1;const{email:e,phone:t}=n.userInfo;k.loading({duration:0,forbidClick:!0}),S({target:1===H.value?t:e}).then((()=>{k(q("sendSuccess")),P.value=60,Q.value=setInterval((()=>{P.value>0?P.value=P.value-1:(P.value=0,clearInterval(Q.value),Q.value=null)}),1e3)})).catch((()=>{k.clear()}))},Y=()=>{const{email:e,phone:t}=n.userInfo,a=1===H.value?2:1;return 2!==a||e?1!==a||t?void(H.value=a):(k(q("暂未绑定手机号，无法进行手机验证")),!1):(k(q("暂未绑定邮箱，无法进行邮箱验证")),!1)},Z=()=>{if(""===O.value)return void k(q("entryVerifyCode"));R.value=!0;const{email:e,phone:t}=n.userInfo,a={target:1===H.value?t:e,verifcode:O.value};1===H.value?a.phone=t:a.email=e,w(a).then((e=>{R.value=!1,G.push(`/bindVerify?type=${L.value}&reset=1&verifyCode=${e.verifyCode}`)})).catch((()=>{R.value=!1}))};return(e,n)=>{const a=j,i=z,o=T,l=r;return C(),s("div",t,[u(a,{fixed:!0},{title:v((()=>[g(f(b(q)("身份验证")),1)])),_:1}),F,p("div",N,[p("div",$,[p("h2",A,f(1===H.value?b(q)("手机验证"):b(q)("邮箱验证")),1),p("p",null,f(b(q)("为了保障您的账号安全，请验证后进行下一步操作")),1)]),p("div",B,[p("p",E,f(1===H.value?b(q)("当前绑定手机号"):b(q)("当前绑定邮箱")),1),p("h2",null,[1===H.value?(C(),s("span",J,"(+"+f(M.value)+")",1)):x("",!0),g(f(b(I)(W.value,!1)),1)])]),p("div",{class:y(["code-content",{"is-ar":b(V)}])},[u(i,{modelValue:O.value,"onUpdate:modelValue":n[0]||(n[0]=e=>O.value=e),type:"tel",label:"",placeholder:b(q)("entryVerifyCode")},null,8,["modelValue","placeholder"]),p("div",{class:y(["btn",{"is-ar":b(V)}])},[u(o,{type:"primary",onClick:X},{default:v((()=>[g(f(b(q)("sendVerifyCode")),1),P.value?(C(),s(_,{key:0},[g("("+f(P.value)+")s",1)],64)):x("",!0)])),_:1})],2)],2),p("div",K,[u(l,{name:"exchange"}),p("p",{onClick:Y},f(1===H.value?b(q)("切换为邮箱验证"):b(q)("切换为手机验证")),1)])]),p("div",U,[u(o,{type:"primary",loading:R.value,onClick:Z},{default:v((()=>[g(f(b(q)("nextStep")),1)])),_:1},8,["loading"])])])}}},[["__scopeId","data-v-6ca68eee"]]))}}}));

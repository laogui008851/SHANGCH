System.register(["./index-legacy-6ad9d2f3.js","./index-legacy-2009b2ec.js","./index-legacy-6eb0c40c.js","./index-legacy-f9c0699e.js","./index-legacy-e24b168f.js","./index-legacy-de2c7a03.js","./index-legacy-5618a598.js","./index-legacy-81046b99.js","./function-call-legacy-ba0f9085.js","./use-id-legacy-5e608c80.js"],(function(e,a){"use strict";var t,n,l,o,u,c,d,i,s,r,p,v,m,x,g,f,h,b,y,w,j,V,C,_,B,k,T,z,I=document.createElement("style");return I.textContent=".cancellation-content[data-v-48269634]{padding:15px;min-height:calc(100vh - 46px);background-color:#fff}.cancellation-content>.item[data-v-48269634]{margin-bottom:20px}.cancellation-content>.item[data-v-48269634] textarea::-webkit-input-placeholder{color:#868c9a}.cancellation-content>.item>p[data-v-48269634]{font-size:14px;margin-bottom:10px}.cancellation-content>.item[data-v-48269634] .van-field{border:1px solid #ddd;border-radius:4px}.cancellation-content>.item[data-v-48269634] .inputCom{padding-bottom:0}.cancellation-content>.item[data-v-48269634] .inputCom .label{font-size:14px}.cancellation-content>.item[data-v-48269634] .inputCom .iptbox{margin-top:10px;padding-left:16px;padding-right:16px;border-radius:4px}.cancellation-content>.item[data-v-48269634] .inputCom .iptbox input{font-size:14px;padding-left:0}.cancellation-content>.btn[data-v-48269634]{padding-top:20px}.cancellation-content>.btn[data-v-48269634] .van-button{border-radius:4px}.popup-title[data-v-48269634]{text-align:center;padding-top:15px}.popup-content[data-v-48269634]{padding:50px 30px 0}\n",document.head.appendChild(I),{setters:[e=>{t=e._,n=e.v,l=e.j,o=e.l,u=e.r,c=e.f,d=e.c,i=e.b,s=e.w,r=e.a,p=e.t,v=e.u,m=e.A,x=e.T,g=e.au,f=e.ct,h=e.b9,b=e.o,y=e.e,w=e.J,j=e.K},e=>{V=e.A},e=>{C=e.P,_=e.N},()=>{},()=>{},e=>{B=e.F},e=>{k=e.E},e=>{T=e.B},e=>{z=e.D},()=>{}],execute:function(){const a=(e=>(w("data-v-48269634"),e=e(),j(),e))((()=>r("div",{style:{height:"46px"}},null,-1))),I={class:"cancellation-content"},U={class:"item"},$={class:"item"},E={class:"btn"},A={style:{height:"22rem"}};e("default",t({__name:"index",setup(e){const{t:t}=n.exports.useI18n(),w=m(),j=l(),F=o((()=>{let e={username:"***",safeword:0};return j.userInfo.token?e={...e,...j.userInfo}:w.push("/login"),e})),P=o((()=>{const e=F.value.username;if(F.value.username.indexOf("@")>-1)return e;if(F.value.phone){const e=F.value.phone.split(" ");return`(+${e[0]}) ${e[1]}`}return e})),D=u(!1),J=u(""),K=u(""),N=u(!1),O=async()=>{if(!J.value)return x(t("请输入您要注销账号的原因")),!1;N.value=!0;const e=await g();N.value=!1,e.money>0?x(t("该账号存在可用余额，不可注销！")):Boolean(F.value.safeword)?(D.value=!0,G.value=!0):S()},S=async()=>{N.value=!0,D.value=!1,G.value=!1,z.confirm({title:t("您确认要注销吗？"),message:t("警告！请谨慎操作注销账户，如果您不再使用该账号，可点击【同意注销】，注销后可能几天内无法注册。"),confirmButtonColor:"#ee0a24",cancelButtonText:t("cancel"),confirmButtonText:t("同意注销")}).then((()=>{q()})).catch((()=>{N.value=!1}))},q=()=>{const e={account:F.value.username,reason:J.value,cashPassword:K.value||null};f(e).then((()=>{N.value=!1,x.success(t("注销成功")),setTimeout((()=>{j.logout()}),1500)})).catch((()=>{K.value="",N.value=!1}))},G=u(!1);return c((()=>K.value),(e=>{6===e.length&&(x.loading(""),q(),D.value=!1,K.value="")})),(e,n)=>{const l=h,o=B,u=T,c=C,m=_,x=V;return b(),d("div",null,[i(l,{fixed:""},{title:s((()=>[y(p(v(t)("账号注销")),1)])),_:1}),a,r("div",I,[r("div",U,[i(k,{label:e.$t("您的账号"),modelValue:P.value,"onUpdate:modelValue":n[0]||(n[0]=e=>P.value=e),disabled:!0,clearBtn:!1,typeText:"text"},null,8,["label","modelValue"])]),r("div",$,[r("p",null,p(v(t)("为什么要离开？")),1),i(o,{modelValue:J.value,"onUpdate:modelValue":n[1]||(n[1]=e=>J.value=e),rows:"4",autosize:"",type:"textarea",placeholder:v(t)("pleaseEnter")},null,8,["modelValue","placeholder"])]),r("div",E,[i(u,{type:"danger",loading:N.value,block:"",onClick:O},{default:s((()=>[y(p(e.$t("注销账号")),1)])),_:1},8,["loading"])])]),i(x,{show:D.value,"onUpdate:show":n[5]||(n[5]=e=>D.value=e),title:v(t)("请输入交易密码")},{default:s((()=>[r("div",A,[i(c,{length:6,value:K.value,focused:G.value,onFocus:n[2]||(n[2]=e=>G.value=!0)},null,8,["value","focused"]),i(m,{modelValue:K.value,"onUpdate:modelValue":n[3]||(n[3]=e=>K.value=e),show:G.value,onBlur:n[4]||(n[4]=e=>G.value=!1)},null,8,["modelValue","show"])])])),_:1},8,["show","title"])])}}},[["__scopeId","data-v-48269634"]]))}}}));

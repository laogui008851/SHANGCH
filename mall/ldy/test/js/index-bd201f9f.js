import{_ as te,v as oe,r as l,j as ae,p as le,cj as se,f as ne,Z as ue,c as y,b as c,w as $,a as t,t as u,g as ie,h as re,e as _,F as ce,x as S,u as ve,ai as de,A as pe,T as i,ck as me,cl as P,cm as fe,b9 as ge,o as A,J as he,K as ye}from"./index-0001e040.js";/* empty css              */import{P as _e,N as Ae}from"./index-3d6fe927.js";import{E as z}from"./index-86f75d82.js";import{a as Ce}from"./login.api-6b4c7cdd.js";import{n as be}from"./nationalityList-2760cb5d.js";import{u as Ve}from"./index-d9eb527d.js";import{B as we}from"./index-3970dd75.js";import{I as Se}from"./index-0f479401.js";import"./index-9e9f9536.js";import"./index-a602a0f8.js";import"./use-id-a8534a74.js";import"./index-087b28a3.js";import"./index-03f57b56.js";import"./countryList-016fc82e.js";const ke="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKzSURBVHgBvVZdbtpAEP5214G+VOUI9ATlBqEnKDlB4CVV1JeitJHSKIqjCJCaEsRDFYVUIj1BuEHICUJPUN+gPDY23unuEsjaQLDz00+yZHt29tud2Z35GFKi9vV7AYIXGHiOJHLg0pMS3t7nzX4Sf5Zk0OHRSdHhYp2AkvrM3TO0F8qwvYi80ep07yVsNE7ylHW6ICoiDQgDPwjX3J1NzyZTESnzRT714x/rlBHXC8iG6vFun1kwFDIZ8bvePP1ok41Nc9Bone2TJDdOov61QaPe7vaHgW0weWVOiXOmw563bcTYgBEV7tYSw+G305Jg7CLiRGgHYsV1q5UhlqB2dOoyzvYX2SOEOmfIiEt7lRSisru9cY4UqDVPygyiO88WzWFG7EdCIqmalsxMysXqItt0h+ZEqkRbhvOdrY0KUsI+IHMXM3khh5dsww0PD/DEZBFCVT3eTV717tzq3R16KrIooXXfJHCFFEhKpuGMHVT+pPU3DAZIgZu/JvyJUmAIRyPkhXVeiWf/IAXsErYMhsZxkNjhsTCEN3gRqSBEwWs8Ewzhbcka3v3kRTwTHOu9j3G/AxNsFU+EerNzobuHmZfQnx6VkOjndBShqJsuHglTm/UmSJVL9ejrNiXc+/S+Byusgouu2+rm8BioRmB9eQFf6UWKNyGsWp/5jPS7eCDqrbNWrBG09VmZ6Yf1486lDqm1jJ7vy2rSu+a63Vz2VdCKVR7vy9aGOfkzEsNnK2ssIh1YScmFy1qzU15GpvOefRlcx8l8Hr6dzjbPUZc6yGgjnjgrhz6BfoVSmvLHOfIMzhsViTJmFZ0hsxvBQtVm6mvIXTC2joeAWN8Xo0q86yzVpVoucMSUwP3w1NiD3a35SiGRENbQ+eFMlJRAeoOxCpuEb6h2o0joSlLYS6rA/xv+AZfLLFBKDLSAAAAAAElFTkSuQmCC";const Be=C=>(he("data-v-918e5499"),C=C(),ye(),C),Ie={class:"bindVerify h-full bg-white"},Ee={class:"content"},$e={key:0},Te={style:{"margin-top":"22px"}},xe={class:"label mt-2 textColor"},Ue={class:"iptbox inputBackground"},Ne=["placeholder"],Re={style:{"margin-top":"22px"}},je={key:1},Pe={class:"pl-30 pr-30 text-center flex flex-col items-center justify-center mt40"},ze={class:"imgbox"},Fe={class:"code flex items-center justify-center textColor"},Ge={class:"tips"},He={class:"flex justify-between mt-6 mb-3"},Oe={class:"flex items-center"},Ze=Be(()=>t("div",{class:"mt-2"},null,-1)),qe={class:"mt-5 bottom tabBackground textColor"},De={__name:"index",setup(C){const k=de(),T=pe(),{t:n}=oe.exports.useI18n(),{toClipboard:F}=Ve(),b=l(""),s=l(""),m=l(""),x=l(!1),o=l(0),B=l(""),V=l(""),w=l(""),f=l(!1),v=l("");l(!0);const U=l(""),p=l(0),g=l(null),d=l(0),N=l(""),G=ae(),h=l(!1);le(()=>{console.log("ss"),H(),clearInterval(g.value),g.value=null});const H=()=>{o.value=k.query.type,B.value=k.query.verifyCode||"",o.value==1?(b.value=n("bindPhone"),x.value=!0):o.value==2?b.value=n("bindEmail"):o.value==3&&(b.value=n("googleAuthenticatorEn"),R())},O=async()=>{const e=/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;if(o.value==2&&s.value==""){i(n("entryEmail"));return}if(o.value==2&&!e.test(s.value)){i(n("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u5730\u5740"));return}if(o.value==1&&s.value==""){i(n("entryPhone"));return}if(o.value==1&&!/^[0-9]+$/.test(s.value)){i(n("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7\u7801"));return}if(d.value>0)return!1;i.loading({mask:!0}),await me({target:o.value==1?`${p.value} ${s.value}`:s.value}),Ce({target:o.value==1?`${p.value} ${s.value}`:s.value}).then(a=>{i(n("sendSuccess")),d.value=30,g.value=setInterval(()=>{d.value>0?d.value=d.value-1:(d.value=0,clearInterval(g.value),g.value=null)},1e3)}).catch(()=>{i.clear()})},Z=()=>{if(o.value==2&&s.value==""){i(n("entryEmail"));return}if(o.value==1&&s.value==""){i(n("entryPhone"));return}if(m.value==""){i(n("\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801"));return}h.value=!0,o.value==1?D():o.value==2?q():o.value==3&&J()},I=async()=>{await G.getUserInfo(!0),i(n("bindSuccess")),h.value=!1,setTimeout(()=>{k.query.reset?T.go(-2):T.back()},1e3)},q=()=>{P({target:s.value,email:s.value,verifcode:V.value,password:m.value,verifyCode:B.value}).then(e=>{I()}).catch(e=>{console.log(e),h.value=!1})},D=()=>{P({target:`${p.value} ${s.value}`,phone:`${p.value} ${s.value}`,verifcode:V.value,password:m.value,verifyCode:B.value}).then(e=>{I()}).catch(e=>{console.log(e),h.value=!1})},R=()=>{se({}).then(e=>{w.value=e.google_auth_secret,U.value=e.google_auth_url,console.log(e)})},J=()=>{fe({secret:w.value,code:v.value}).then(e=>{e.google_auth_bind?I():i(err||n("bindFailed"))})},X=async()=>{try{await F(w.value),i(n("copySuccess"))}catch(e){console.error(e)}},Y=async()=>{v.value=await navigator.clipboard.readText()},K=(e,a,E)=>{N.value=a,p.value=E},j=l(null),M=()=>{j.value.open()};return ne(v,(e,a)=>{v.value.length===6&&(f.value=!1)}),(e,a)=>{const E=ge,W=ue,L=_e,Q=Ae,ee=we;return A(),y("div",Ie,[c(E,null,{title:$(()=>[_(u(b.value),1)]),_:1}),t("div",Ee,[o.value==1||o.value==2?(A(),y("div",$e,[t("div",Te,[c(z,{label:o.value==2?e.$t("email"):e.$t("phoneNum"),placeholderText:o.value==2?e.$t("entryEmail"):e.$t("entryPhone"),modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=r=>s.value=r),area:x.value,onSelectArea:M,dialCode:p.value,icon:N.value},null,8,["label","placeholderText","modelValue","area","dialCode","icon"])]),t("p",xe,u(e.$t("verificationCode")),1),t("div",Ue,[ie(t("input",{class:"inputBackground textColor",type:"text",placeholder:e.$t("entryVerifyCode"),"onUpdate:modelValue":a[1]||(a[1]=r=>V.value=r)},null,8,Ne),[[re,V.value]]),o.value!=3?(A(),y("span",{key:0,onClick:O},[_(u(e.$t("sendVerifyCode")),1),d.value?(A(),y(ce,{key:0},[_(" ("+u(d.value)+")s",1)],64)):S("",!0)])):S("",!0)]),t("div",Re,[c(z,{label:e.$t("\u767B\u5F55\u5BC6\u7801"),placeholderText:e.$t("\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801"),modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=r=>m.value=r),typeText:"password",clearBtn:!1},null,8,["label","placeholderText","modelValue"])])])):S("",!0),o.value==3?(A(),y("div",je,[t("div",Pe,[t("div",ze,[c(ve(Se),{src:U.value},{loading:$(()=>[c(W,{type:"spinner",size:"20"})]),_:1},8,["src"])]),t("div",Fe,[_(u(w.value)+" ",1),t("img",{src:ke,alt:"",onClick:R})]),t("p",Ge,u(e.$t("saveKeyTips")),1),t("div",{class:"copy textColor",onClick:X},u(e.$t("copy")),1)]),t("div",He,[t("div",null,u(e.$t("googleVerificationCode")),1),t("div",Oe,[t("div",{class:"colorMain",onClick:a[3]||(a[3]=r=>v.value="")},u(e.$t("clear")),1),t("div",{class:"colorMain ml-30",onClick:Y},u(e.$t("paste")),1)])]),c(L,{value:v.value,gutter:16,focused:f.value,onFocus:a[4]||(a[4]=r=>f.value=!0),mask:!1},null,8,["value","focused"]),c(Q,{modelValue:v.value,"onUpdate:modelValue":a[5]||(a[5]=r=>v.value=r),show:f.value,onBlur:a[6]||(a[6]=r=>f.value=!1)},null,8,["modelValue","show"]),Ze,t("div",qe,[t("p",null,u(e.$t("precautions")),1),t("p",null,u(e.$t("precautionsTips1")),1),t("p",null,u(e.$t("precautionsTips2")),1)])])):S("",!0),c(ee,{class:"w-full",style:{"margin-top":"30px"},type:"primary",loading:h.value,onClick:Z},{default:$(()=>[_(u(e.$t("confirm")),1)]),_:1},8,["loading"])]),c(be,{ref_key:"controlChildRef",ref:j,title:e.$t("selectArea"),onGetName:K},null,8,["title"])])}}},ut=te(De,[["__scopeId","data-v-918e5499"]]);export{ut as default};

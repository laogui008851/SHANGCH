System.register(["./index-legacy-6ad9d2f3.js","./index-legacy-45bbcd42.js","./index-legacy-14c34f5a.js"],(function(e,o){"use strict";var a,t,i,n,s,r,l,c,m,v,g,d,u,h,p,f,b,w,x,y,z,k,C,I,_,X,Z,P,Y,W,H,R,S,$,T,j,D,N,O=document.createElement("style");return O.textContent=":root{--van-image-placeholder-text-color: var(--van-text-color-2);--van-image-placeholder-font-size: var(--van-font-size-md);--van-image-placeholder-background-color: var(--van-background-color);--van-image-loading-icon-size: 32px;--van-image-loading-icon-color: var(--van-gray-4);--van-image-error-icon-size: 32px;--van-image-error-icon-color: var(--van-gray-4) }.van-image{position:relative;display:inline-block}.van-image--round{overflow:hidden;border-radius:var(--van-border-radius-max)}.van-image--round .van-image__img{border-radius:inherit}.van-image--block{display:block}.van-image__img,.van-image__error,.van-image__loading{display:block;width:100%;height:100%}.van-image__error,.van-image__loading{position:absolute;top:0;left:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;color:var(--van-image-placeholder-text-color);font-size:var(--van-image-placeholder-font-size);background:var(--van-image-placeholder-background-color)}.van-image__loading-icon{color:var(--van-image-loading-icon-color);font-size:var(--van-image-loading-icon-size)}.van-image__error-icon{color:var(--van-image-error-icon-color);font-size:var(--van-image-error-icon-size)}\n",document.head.appendChild(O),{setters:[e=>{a=e.Q,t=e.d,i=e.bo,n=e.V,s=e.m,r=e.aF,l=e.r,c=e.l,m=e.f,v=e.a9,g=e.b,d=e.Y,u=e.b0,h=e.Z,p=e.ac,f=e.p,b=e.aW,w=e.aX,x=e.q,y=e.ag,z=e.aO,k=e.aP,C=e.a0,I=e.be,_=e.a8,X=e.a1,Z=e.U,P=e.bf,Y=e.I,W=e.aQ,H=e.aT,R=e.R,S=e.$,$=e.aU,T=e.aV},e=>{j=e.S,D=e.a},e=>{N=e.I}],execute:function(){const o=e=>Math.sqrt((e[0].clientX-e[1].clientX)**2+(e[0].clientY-e[1].clientY)**2),O=a("image-preview")[1];var B=t({props:{src:String,show:Boolean,active:Number,minZoom:i(n),maxZoom:i(n),rootWidth:i(Number),rootHeight:i(Number)},emits:["scale","close"],setup(e,{emit:a}){const t=s({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,imageRatio:0,displayWidth:0,displayHeight:0}),i=r(),n=l(),p=c((()=>{const{rootWidth:o,rootHeight:a}=e,i=a/o;return t.imageRatio>i})),f=c((()=>{const{scale:e,moveX:o,moveY:a,moving:i,zooming:n}=t,s={transitionDuration:n||i?"0s":".3s"};if(1!==e){const t=o/e,i=a/e;s.transform=`scale(${e}, ${e}) translate(${t}px, ${i}px)`}return s})),b=c((()=>{if(t.imageRatio){const{rootWidth:o,rootHeight:a}=e,i=p.value?a/t.imageRatio:o;return Math.max(0,(t.scale*i-o)/2)}return 0})),w=c((()=>{if(t.imageRatio){const{rootWidth:o,rootHeight:a}=e,i=p.value?a:o*t.imageRatio;return Math.max(0,(t.scale*i-a)/2)}return 0})),x=o=>{(o=u(o,+e.minZoom,+e.maxZoom+1))!==t.scale&&(t.scale=o,a("scale",{scale:o,index:e.active}))},y=()=>{x(1),t.moveX=0,t.moveY=0};let z,k,C,I,_,X,Z;const P=e=>{const{touches:a}=e,{offsetX:n}=i;i.start(e),z=a.length,k=t.moveX,C=t.moveY,Z=Date.now(),t.moving=1===z&&1!==t.scale,t.zooming=2===z&&!n.value,t.zooming&&(I=t.scale,_=o(e.touches))},Y=()=>{if(z>1)return;const{offsetX:e,offsetY:o}=i,n=Date.now()-Z;e.value<5&&o.value<5&&n<250&&(X?(clearTimeout(X),X=null,(()=>{const e=t.scale>1?1:2;x(e),t.moveX=0,t.moveY=0})()):X=setTimeout((()=>{a("close"),X=null}),250))},W=o=>{let a=!1;(t.moving||t.zooming)&&(a=!0,t.moving&&k===t.moveX&&C===t.moveY&&(a=!1),o.touches.length||(t.zooming&&(t.moveX=u(t.moveX,-b.value,b.value),t.moveY=u(t.moveY,-w.value,w.value),t.zooming=!1),t.moving=!1,k=0,C=0,I=1,t.scale<1&&y(),t.scale>e.maxZoom&&(t.scale=+e.maxZoom))),d(o,a),Y(),i.reset()},H=e=>{const{naturalWidth:o,naturalHeight:a}=e.target;t.imageRatio=a/o};return m((()=>e.active),y),m((()=>e.show),(e=>{e||y()})),v.useEventListener("touchmove",(e=>{const{touches:a}=e;if(i.move(e),(t.moving||t.zooming)&&d(e,!0),t.moving){const{deltaX:e,deltaY:o}=i,a=e.value+k,n=o.value+C;t.moveX=u(a,-b.value,b.value),t.moveY=u(n,-w.value,w.value)}if(t.zooming&&2===a.length){const e=o(a);x(I*e/_)}}),{target:c((()=>{var e;return null==(e=n.value)?void 0:e.$el}))}),()=>{const o={loading:()=>g(h,{type:"spinner"},null)};return g(j,{ref:n,class:O("swipe-item"),onTouchstartPassive:P,onTouchend:W,onTouchcancel:W},{default:()=>[g(N,{src:e.src,fit:"contain",class:O("image",{vertical:p.value}),style:f.value,onLoad:H},o)]})}}});const[U,M]=a("image-preview"),q=["show","transition","overlayStyle","closeOnPopstate"],A={show:Boolean,loop:C,images:I(),minZoom:_(1/3),maxZoom:_(3),overlay:C,closeable:Boolean,showIndex:C,className:X,closeIcon:Z("clear"),transition:String,beforeClose:Function,overlayClass:X,overlayStyle:Object,swipeDuration:_(300),startPosition:_(0),showIndicators:Boolean,closeOnPopstate:C,closeIconPosition:Z("top-right")};var E=t({name:U,props:A,emits:["scale","close","closed","change","update:show"],setup(e,{emit:o,slots:a}){const t=l(),i=s({active:0,rootWidth:0,rootHeight:0}),n=()=>{if(t.value){const e=v.useRect(t.value.$el);i.rootWidth=e.width,i.rootHeight=e.height,t.value.resize()}},r=e=>o("scale",e),c=e=>o("update:show",e),d=()=>{W(e.beforeClose,{args:[i.active],done:()=>c(!1)})},u=e=>{e!==i.active&&(i.active=e,o("change",e))},h=()=>{if(e.showIndex)return g("div",{class:M("index")},[a.index?a.index({index:i.active}):`${i.active+1} / ${e.images.length}`])},C=()=>{if(a.cover)return g("div",{class:M("cover")},[a.cover()])},I=()=>{if(e.closeable)return g(Y,{role:"button",name:e.closeIcon,class:[M("close-icon",e.closeIconPosition),P],onClick:d},null)},_=()=>o("closed"),X=(e,o)=>{var a;return null==(a=t.value)?void 0:a.swipeTo(e,o)};return p({swipeTo:X}),f(n),m([b,w],n),m((()=>e.startPosition),(e=>u(+e))),m((()=>e.show),(a=>{const{images:t,startPosition:s}=e;a?(u(+s),x((()=>{n(),X(+s,{immediate:!0})}))):o("close",{index:i.active,url:t[i.active]})})),()=>g(k,y({class:[M(),e.className],overlayClass:[M("overlay"),e.overlayClass],onClosed:_,"onUpdate:show":c},z(e,q)),{default:()=>[I(),g(D,{ref:t,lazyRender:!0,loop:e.loop,class:M("swipe"),duration:e.swipeDuration,initialSwipe:e.startPosition,showIndicators:e.showIndicators,indicatorColor:"white",onChange:u},{default:()=>[e.images.map((o=>g(B,{src:o,show:e.show,active:i.active,maxZoom:e.maxZoom,minZoom:e.minZoom,rootWidth:i.rootWidth,rootHeight:i.rootHeight,onScale:r,onClose:d},null)))]}),h(),C()]})}});let F;const L={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeIconPosition:"top-right"},Q=e("I",((e,o=0)=>{if(H)return F||({instance:F}=$({setup(){const{state:e,toggle:o}=T(),a=()=>{e.images=[]};return()=>g(E,y(e,{onClosed:a,"onUpdate:show":o}),null)}})),e=Array.isArray(e)?{images:e,startPosition:o}:e,F.open(R({},L,e)),F}));Q.Component=S(E),Q.install=e=>{e.use(Q.Component)}}}}));

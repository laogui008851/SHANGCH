import{_ as ee,d as se,i as te,v as oe,r as o,l as ae,ax as ne,p as le,I as ie,u as n,c as d,a as s,b as r,w as m,b2 as G,t as a,e as S,n as B,ai as de,A as re,T as ce,o as c,ay as ue,av as v,F as pe,s as me,x as F,M as _e,J as ve,K as fe}from"./index-0001e040.js";/* empty css              */import{C as he}from"./index-aebf78fc.js";import"./index-9e9f9536.js";import{F as ge}from"./index-a602a0f8.js";import{P as ye}from"./index-d2d7f06b.js";import{L as xe}from"./index-a026024e.js";import{S as Pe}from"./index-03f57b56.js";import{_ as Ie}from"./search-icon-8ae5f679.js";import{_ as ke}from"./more-f6d49895.js";import{s as Se,c as Ce,m as Ne}from"./product.api-19eafb76.js";import{B as be}from"./index-3970dd75.js";import"./use-id-a8534a74.js";import"./index-02f58f9d.js";import"./___vite-browser-external_commonjs-proxy-eebe5f73.js";const P=f=>(ve("data-v-d9aad25c"),f=f(),fe(),f),we={key:0,class:"product"},Le=P(()=>s("img",{class:"search-icon",src:Ie},null,-1)),$e={class:"flex ml-4 mr-4 product-header"},Ve={key:0,class:"moeny icon"},Me=["src"],Re={key:1,class:"moeny"},Ge={class:"title"},Be={class:"moeny"},Fe={class:"title"},Ue={class:"hot-title ml-4 mr-4 mt-4 mb-4"},Ae=["onClick"],De={class:"flex-1 flex left"},Ee={class:"product-img-wrap w-20 h-20"},ze=["src"],Je={key:0,class:"take_off"},Oe={class:"product-info flex-1"},Te={class:"name-content"},je=["onClick"],qe=P(()=>s("img",{class:"more-icon",src:ke},null,-1)),Ke=[qe],He={class:"Specification"},Qe={style:{"margin-left":"20px"}},We={class:"money-content"},Xe={key:0,class:"dis"},Ye=P(()=>s("div",{class:"safe-area-inset-bottom"},null,-1)),Ze={key:1},es=P(()=>s("div",{class:"tip pt-5 pb-2 pl-4 pr-4"},"\u6388\u6743\u5BC6\u7801",-1)),ss={class:"btn"},ts=se({name:"ProductIndex"}),os=Object.assign(ts,{setup(f){const U=te();oe.exports.useI18n(),de();const _=re();let h=o("");o(!1);let g=o(1),C=o(0),N=o(0),I=o(0),A=o({}),b=o(0),p=o("");const u=o([]),k=o(!1),y=o(!1),w=o(!1),D="production",E=ae(()=>["int"].includes(D)),z=()=>{console.log(p.value),Ce({password:p.value}).then(()=>{b.value=1,ce("\u64CD\u4F5C\u6210\u529F")})},L=o(!0);ne(()=>{if(!L.value){sessionStorage.getItem("productReload")&&(sessionStorage.removeItem("productReload"),x(!0));const e=sessionStorage.getItem("currentProductId");if(e){const l=u.value.findIndex(i=>i.id===e);sessionStorage.getItem("productDelete")?(u.value.splice(l,1),I.value-=1,sessionStorage.removeItem("productDelete")):x(!0),sessionStorage.removeItem("currentProductId")}}});const x=e=>{e&&(g.value=1);let l={pageNum:g.value,pageSize:20};Ne(l).then(i=>{L.value=!1,y.value&&(y.value=!1),C.value=i.evaluations,N.value=i.systemGoodsNum,I.value=i.sellerGoodsNum,e?u.value=i.pageList||[]:u.value=g.value===1?i.pageList:[...u.value,...i.pageList],w.value=u.value.length>=i.sellerGoodsNum,g.value++,k.value=!1})},$=()=>{x(!0)},J=()=>{_.push("/search?id=1")},O=()=>{_.push("/productPage/list")},T=()=>{_.push("/productPage/comment")},j=e=>{_.push({path:"/productPage/details",query:{item:JSON.stringify(e)}})},V=o(""),M=o("");Se().then(e=>{V.value=e.sysParaMin,M.value=e.sysParaMax});const q=e=>{e.sysParaMin=V.value,e.sysParaMax=M.value,_.push({path:"/productPage/productEdit",query:{item:JSON.stringify(e)}}),A.value=e};return le(()=>{document.addEventListener("langChange",()=>{$()})}),(e,l)=>{const i=Pe,R=ie,K=xe,H=ye,Q=ge,W=he,X=be;return n(b)?(c(),d("div",we,[s("div",{onClick:J},[r(i,{class:"search-wrap",disabled:"",modelValue:n(h),"onUpdate:modelValue":l[0]||(l[0]=t=>G(h)?h.value=t:h=t),placeholder:e.$t("\u8BF7\u8F93\u5165\u641C\u7D22\u5546\u54C1\u540D\u79F0"),clearable:""},{"left-icon":m(t=>[Le]),_:1},8,["modelValue","placeholder"])]),s("div",$e,[s("div",{class:"flex-1 text-center after",onClick:O},[E.value?(c(),d("div",Ve,[s("img",{src:n(ue)("image/order/diamond.svg"),alt:""},null,8,Me)])):(c(),d("div",Re,a(n(v)(n(N),0)),1)),s("div",Ge,[S(a(e.$t("\u5546\u54C1\u5E93")),1),r(R,{name:"arrow"})])]),s("div",{class:"flex-1 text-center",onClick:T},[s("div",Be,a(n(C)),1),s("div",Fe,[S(a(e.$t("\u8BC4\u8BBA")),1),r(R,{name:"arrow"})])])]),s("div",Ue,a(e.$t("\u5E97\u94FA\u4EA7\u54C1"))+"("+a(n(v)(n(I),0))+") ",1),s("div",{class:B(["list ml-4 mr-4 mt-4 mb-4 list-content",{"is-ar":n(U)}])},[r(H,{modelValue:y.value,"onUpdate:modelValue":l[2]||(l[2]=t=>y.value=t),onRefresh:$,"loading-text":e.$t("\u52A0\u8F7D\u4E2D"),"loosing-text":e.$t("\u91CA\u653E\u4EE5\u5237\u65B0"),"pulling-text":e.$t("\u4E0B\u62C9\u4EE5\u5237\u65B0")},{default:m(()=>[r(K,{ref:"vanList",loading:k.value,"onUpdate:loading":l[1]||(l[1]=t=>k.value=t),"loading-text":e.$t("\u52A0\u8F7D\u4E2D"),finished:w.value,"finished-text":e.$t("noMore"),onLoad:x},{default:m(()=>[(c(!0),d(pe,null,me(u.value,(t,Y)=>(c(),d("div",{class:B(["item pl-3 pr-3 pb-3 pt-3 flex",{"goods-removed":t.isShelf/1===0}]),onClick:Z=>j(t),key:Y},[s("div",De,[s("div",Ee,[s("img",{class:"product-img",src:t.imgUrl1},null,8,ze),t.isShelf/1===0?(c(),d("div",Je,a(e.$t("\u5DF2\u4E0B\u67B6")),1)):F("",!0)]),s("div",Oe,[s("div",Te,[s("p",null,a(t.name),1),s("div",{class:"more",onClick:_e(Z=>q(t),["stop"])},Ke,8,je)]),s("div",He,[s("span",null,a(t.categoryName),1),s("span",Qe,a(e.$t("\u9500\u91CF"))+": "+a(n(v)(t.soldNum,0)),1)]),s("div",We,[s("p",null,"$"+a(n(v)(t.sellingPrice)),1),t.discountPrice?(c(),d("p",Xe,a(e.$t("\u6298\u6263\u4EF7"))+" $"+a(n(v)(t.discountPrice)),1)):F("",!0)])])])],10,Ae))),128))]),_:1},8,["loading","loading-text","finished","finished-text"])]),_:1},8,["modelValue","loading-text","loosing-text","pulling-text"]),Ye],2)])):(c(),d("div",Ze,[es,r(W,{class:"input-field",inset:""},{default:m(()=>[r(Q,{modelValue:n(p),"onUpdate:modelValue":l[3]||(l[3]=t=>G(p)?p.value=t:p=t),type:"text",placeholder:"\u8BF7\u8F93\u5165\u6388\u6743\u5BC6\u7801"},{button:m(()=>[]),_:1},8,["modelValue"])]),_:1}),s("div",ss,[r(X,{type:"primary",size:"large",onClick:z},{default:m(()=>[S(" \u8BA4\u8BC1 ")]),_:1})])]))}}}),ys=ee(os,[["__scopeId","data-v-d9aad25c"]]);export{ys as default};

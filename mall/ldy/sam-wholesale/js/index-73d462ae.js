import{Q as x,V as d,a0 as L,U as b,d as $,r as u,aj as B,m as E,ab as f,a2 as j,f as D,aT as U,a_ as _,b as r,g as C,bZ as N,ag as P,s as R,I as T,$ as V}from"./index-19a98339.js";const[F,o]=x("image"),Q={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:d,height:d,radius:d,lazyLoad:Boolean,iconSize:d,showError:L,errorIcon:b("photo-fail"),iconPrefix:String,showLoading:L,loadingIcon:b("photo")};var Z=$({name:F,props:Q,emits:["load","error"],setup(e,{emit:g,slots:l}){const n=u(!1),t=u(!0),s=u(),{$Lazyload:i}=B().proxy,z=E(()=>{const a={width:f(e.width),height:f(e.height)};return j(e.radius)&&(a.overflow="hidden",a.borderRadius=f(e.radius)),a});D(()=>e.src,()=>{n.value=!1,t.value=!0});const v=a=>{t.value=!1,g("load",a)},h=a=>{n.value=!0,t.value=!1,g("error",a)},m=(a,c,y)=>y?y():r(T,{name:a,size:e.iconSize,class:c,classPrefix:e.iconPrefix},null),S=()=>{if(t.value&&e.showLoading)return r("div",{class:o("loading")},[m(e.loadingIcon,o("loading-icon"),l.loading)]);if(n.value&&e.showError)return r("div",{class:o("error")},[m(e.errorIcon,o("error-icon"),l.error)])},k=()=>{if(n.value||!e.src)return;const a={alt:e.alt,class:o("img"),style:{objectFit:e.fit,objectPosition:e.position}};return e.lazyLoad?C(r("img",P({ref:s},a),null),[[N("lazy"),e.src]]):r("img",P({src:e.src,onLoad:v,onError:h},a),null)},w=({el:a})=>{const c=()=>{a===s.value&&t.value&&v()};s.value?c():R(c)},I=({el:a})=>{a===s.value&&!n.value&&h()};return i&&U&&(i.$on("loaded",w),i.$on("error",I),_(()=>{i.$off("loaded",w),i.$off("error",I)})),()=>{var a;return r("div",{class:o({round:e.round,block:e.block}),style:z.value},[k(),S(),(a=l.default)==null?void 0:a.call(l)])}}});const A=V(Z);export{A as I};

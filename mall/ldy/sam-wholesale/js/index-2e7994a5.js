import{_ as F,j as D,v as L,ai as j,l as A,r as u,q as E,i as H,m as R,c as x,b as h,w as I,a as o,t as r,u as e,y as w,e as v,n as N,T as y,cg as z,b8 as J,o as b,cf as K,F as M,J as O,K as P}from"./index-19a98339.js";/* empty css              */import"./index-93160a1b.js";import{F as Y}from"./index-0400f7f8.js";import{a as G}from"./login.api-cfc47dd6.js";import{B as Q}from"./index-101610a8.js";import"./use-id-e7d8e724.js";const W=_=>(O("data-v-1ca2bd92"),_=_(),P(),_),X={class:"verify-content"},Z=W(()=>o("div",{style:{height:"46px"}},null,-1)),$={class:"info-content"},ee={class:"info-item"},te={class:"info-item"},se={class:"gap"},ae={key:0},oe={class:"submit-content"},ne={__name:"index",setup(_){const d=D(),{t}=L.exports.useI18n(),g=j(),C=A(),n=u(1),k=u("44"),f=u(""),l=u(0),p=u(null),m=u(!1);n.value=g.query&&g.query.type?Number(g.query.type):1,E(()=>{clearInterval(p.value),p.value=null});const V=H(),B=R(()=>{if(!d.userInfo.token)C.push("/login");else{const{email:c,phone:s}=d.userInfo;let a="";if(n.value===1){if(s){const i=s.split(" ");i.length===2?(k.value=i[0],a=i[1]):a=i[0]}}else a=c||"";return a}}),T=()=>{if(l.value>0)return!1;const{email:c,phone:s}=d.userInfo;y.loading({duration:0,forbidClick:!0}),G({target:n.value===1?s:c}).then(()=>{y(t("sendSuccess")),l.value=60,p.value=setInterval(()=>{l.value>0?l.value=l.value-1:(l.value=0,clearInterval(p.value),p.value=null)},1e3)}).catch(()=>{y.clear()})},U=async()=>{if(f.value===""){y(t("entryVerifyCode"));return}m.value=!0;const{email:c,phone:s}=d.userInfo,a={target:n.value===1?s:c,verifcode:f.value};n.value===1?a.phone=s:a.email=c,z(a).then(async i=>{await d.getUserInfo(!0),m.value=!1,C.back()}).catch(()=>{m.value=!1})};return(c,s)=>{const a=J,i=Y,S=Q;return b(),x("div",X,[h(a,{fixed:!0},{title:I(()=>[v(r(n.value===1?e(t)("\u624B\u673A\u9A8C\u8BC1"):e(t)("\u90AE\u7BB1\u9A8C\u8BC1")),1)]),_:1}),Z,o("div",$,[o("div",ee,[o("p",null,r(e(t)("\u4E3A\u4E86\u4FDD\u969C\u60A8\u7684\u8D26\u53F7\u5B89\u5168\uFF0C\u8BF7\u9A8C\u8BC1\u540E\u8FDB\u884C\u4E0B\u4E00\u6B65\u64CD\u4F5C")),1)]),o("div",te,[o("p",se,r(n.value===1?e(t)("\u5F53\u524D\u7ED1\u5B9A\u624B\u673A\u53F7"):e(t)("\u5F53\u524D\u7ED1\u5B9A\u90AE\u7BB1")),1),o("h2",null,[n.value===1?(b(),x("span",ae,"(+"+r(k.value)+")",1)):w("v-if",!0),v(r(e(K)(B.value,!1)),1)])]),o("div",{class:N(["code-content",{"is-ar":e(V)}])},[h(i,{modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=q=>f.value=q),type:"tel",label:"",placeholder:e(t)("entryVerifyCode")},null,8,["modelValue","placeholder"]),o("div",{class:N(["btn",{"is-ar":e(V)}])},[h(S,{type:"primary",onClick:T},{default:I(()=>[v(r(e(t)("sendVerifyCode")),1),l.value?(b(),x(M,{key:0},[v("("+r(l.value)+")s",1)],64)):w("v-if",!0)]),_:1})],2)],2)]),o("div",oe,[h(S,{type:"primary",loading:m.value,onClick:U},{default:I(()=>[v(r(e(t)("confirm")),1)]),_:1},8,["loading"])])])}}},ve=F(ne,[["__scopeId","data-v-1ca2bd92"],["__file","C:/Users/DIY/Desktop/\u6E90\u7801/H5-\u5546\u5BB6/src/views/certified/index.vue"]]);export{ve as default};

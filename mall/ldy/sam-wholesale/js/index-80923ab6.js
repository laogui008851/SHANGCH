import{a9 as m,aG as oe,bg as Ie,aT as Re,aZ as $e,a_ as Be,Q as E,d as V,r as R,p as le,m as I,bh as se,R as re,bi as _e,f as P,b as g,V as A,U as ce,a8 as N,a$ as de,$ as K,a0 as j,a2 as q,bj as Pe,bk as U,q as Ae,ac as Q,aj as ze,aW as Oe,s as O,ax as Ne,aY as Le,ab as te,bl as Ee,a4 as Ve,bm as ne,ag as De,aO as He,aQ as Me,bn as We,S as Ze,a1 as je,ad as Fe,g as Ue,b1 as Ye}from"./index-19a98339.js";import{u as ue}from"./use-id-e7d8e724.js";import{T as qe}from"./index-5a56288c.js";import{a as Ke,S as Qe}from"./index-5345997a.js";import{u as Xe}from"./use-refs-ff35ea86.js";function Ge(e,o,l){let d=0;const n=e.scrollLeft,a=l===0?1:Math.round(l*1e3/16);function s(){e.scrollLeft+=(o-n)/a,++d<a&&m.raf(s)}s()}function Je(e,o,l,d){let n=oe(e);const a=n<o,s=l===0?1:Math.round(l*1e3/16),h=(o-n)/s;function r(){n+=h,(a&&n>o||!a&&n<o)&&(n=o),Ie(e,n),a&&n<o||!a&&n>o?m.raf(r):d&&m.raf(d)}r()}function pe(e,o){if(!Re||!window.IntersectionObserver)return;const l=new IntersectionObserver(a=>{o(a[0].intersectionRatio>0)},{root:document.body}),d=()=>{e.value&&l.observe(e.value)},n=()=>{e.value&&l.unobserve(e.value)};$e(n),Be(n),m.onMountedOrActivated(d)}const[et,tt]=E("sticky"),nt={zIndex:A,position:ce("top"),container:Object,offsetTop:N(0),offsetBottom:N(0)};var at=V({name:et,props:nt,emits:["scroll","change"],setup(e,{emit:o,slots:l}){const d=R(),n=m.useScrollParent(d),a=le({fixed:!1,width:0,height:0,transform:0}),s=I(()=>se(e.position==="top"?e.offsetTop:e.offsetBottom)),h=I(()=>{const{fixed:f,height:T,width:w}=a;if(f)return{width:`${w}px`,height:`${T}px`}}),r=I(()=>{if(!a.fixed)return;const f=re(_e(e.zIndex),{width:`${a.width}px`,height:`${a.height}px`,[e.position]:`${s.value}px`});return a.transform&&(f.transform=`translate3d(0, ${a.transform}px, 0)`),f}),C=f=>o("scroll",{scrollTop:f,isFixed:a.fixed}),b=()=>{if(!d.value||de(d))return;const{container:f,position:T}=e,w=m.useRect(d),$=oe(window);if(a.width=w.width,a.height=w.height,T==="top")if(f){const k=m.useRect(f),u=k.bottom-s.value-a.height;a.fixed=s.value>w.top&&k.bottom>0,a.transform=u<0?u:0}else a.fixed=s.value>w.top;else{const{clientHeight:k}=document.documentElement;if(f){const u=m.useRect(f),L=k-u.top-s.value-a.height;a.fixed=k-s.value<w.bottom&&k>u.top,a.transform=L<0?-L:0}else a.fixed=k-s.value<w.bottom}C($)};return P(()=>a.fixed,f=>o("change",f)),m.useEventListener("scroll",b,{target:n,passive:!0}),pe(d,b),()=>{var f;return g("div",{ref:d,style:h.value},[g("div",{class:tt({fixed:a.fixed}),style:r.value},[(f=l.default)==null?void 0:f.call(l)])])}}});const it=K(at),[ot,ae]=E("tab");var lt=V({name:ot,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:A,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:j},setup(e,{slots:o}){const l=I(()=>{const n={},{type:a,color:s,disabled:h,isActive:r,activeColor:C,inactiveColor:b}=e;s&&a==="card"&&(n.borderColor=s,h||(r?n.backgroundColor=s:n.color=s));const T=r?C:b;return T&&(n.color=T),n}),d=()=>{const n=g("span",{class:ae("text",{ellipsis:!e.scrollable})},[o.title?o.title():e.title]);return e.dot||q(e.badge)&&e.badge!==""?g(Pe,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[n]}):n};return()=>g("div",{id:e.id,role:"tab",class:[ae([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:l.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[d()])}});const[st,ie]=E("tabs");var rt=V({name:st,props:{count:U(Number),inited:Boolean,animated:Boolean,duration:U(A),swipeable:Boolean,lazyRender:Boolean,currentIndex:U(Number)},emits:["change"],setup(e,{emit:o,slots:l}){const d=R(),n=h=>o("change",h),a=()=>{var h;const r=(h=l.default)==null?void 0:h.call(l);return e.animated||e.swipeable?g(Ke,{ref:d,loop:!1,class:ie("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:n},{default:()=>[r]}):r},s=h=>{const r=d.value;r&&r.state.active!==h&&r.swipeTo(h,{immediate:!e.inited})};return P(()=>e.currentIndex,s),Ae(()=>{s(e.currentIndex)}),Q({swipeRef:d}),()=>g("div",{class:ie("content",{animated:e.animated||e.swipeable})},[a()])}});const[fe,Z]=E("tabs"),ct={type:ce("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:N(0),duration:N(.3),animated:Boolean,ellipsis:j,swipeable:Boolean,scrollspy:Boolean,offsetTop:N(0),background:String,lazyRender:j,lineWidth:A,lineHeight:A,beforeChange:Function,swipeThreshold:N(5),titleActiveColor:String,titleInactiveColor:String},ve=Symbol(fe);var dt=V({name:fe,props:ct,emits:["click","change","scroll","disabled","rendered","click-tab","update:active"],setup(e,{emit:o,slots:l}){var d,n;{const t=(n=(d=ze())==null?void 0:d.vnode)==null?void 0:n.props;t&&"onClick"in t&&console.warn('[Vant] Tabs: "click" event is deprecated, using "click-tab" instead.'),t&&"onDisabled"in t&&console.warn('[Vant] Tabs: "disabled" event is deprecated, using "click-tab" instead.')}let a,s,h;const r=R(),C=R(),b=R(),f=R(),T=ue(),w=m.useScrollParent(r),[$,k]=Xe(),{children:u,linkChildren:L}=m.useChildren(ve),v=le({inited:!1,position:"",lineStyle:{},currentIndex:-1}),z=I(()=>u.length>e.swipeThreshold||!e.ellipsis||e.shrink),be=I(()=>({borderColor:e.color,background:e.background})),D=(t,i)=>{var c;return(c=t.name)!=null?c:i},X=I(()=>{const t=u[v.currentIndex];if(t)return D(t,v.currentIndex)}),F=I(()=>se(e.offsetTop)),G=I(()=>e.sticky?F.value+a:0),H=t=>{const i=C.value,c=$.value;if(!z.value||!i||!c||!c[v.currentIndex])return;const y=c[v.currentIndex].$el,x=y.offsetLeft-(i.offsetWidth-y.offsetWidth)/2;Ge(i,x,t?0:+e.duration)},B=()=>{const t=v.inited;O(()=>{const i=$.value;if(!i||!i[v.currentIndex]||e.type!=="line"||de(r.value))return;const c=i[v.currentIndex].$el,{lineWidth:y,lineHeight:x}=e,S=c.offsetLeft+c.offsetWidth/2,_={width:te(y),backgroundColor:e.color,transform:`translateX(${S}px) translateX(-50%)`};if(t&&(_.transitionDuration=`${e.duration}s`),q(x)){const ee=te(x);_.height=ee,_.borderRadius=ee}v.lineStyle=_})},he=t=>{const i=t<v.currentIndex?-1:1;for(;t>=0&&t<u.length;){if(!u[t].disabled)return t;t+=i}},M=(t,i)=>{const c=he(t);if(!q(c))return;const y=u[c],x=D(y,c),S=v.currentIndex!==null;v.currentIndex!==c&&(v.currentIndex=c,i||H(),B()),x!==e.active&&(o("update:active",x),S&&o("change",x,y.title)),h&&!e.scrollspy&&Ve(Math.ceil(ne(r.value)-F.value))},W=(t,i)=>{const c=u.find((x,S)=>D(x,S)===t),y=c?u.indexOf(c):0;M(y,i)},J=(t=!1)=>{if(e.scrollspy){const i=u[v.currentIndex].$el;if(i&&w.value){const c=ne(i,w.value)-G.value;s=!0,Je(w.value,c,t?0:+e.duration,()=>{s=!1})}}},ge=(t,i,c)=>{const{title:y,disabled:x}=u[i],S=D(u[i],i);x?o("disabled",S,y):(Me(e.beforeChange,{args:[S],done:()=>{M(i),J()}}),o("click",S,y),We(t)),o("click-tab",{name:S,title:y,event:c,disabled:x})},me=t=>{h=t.isFixed,o("scroll",t)},ye=t=>{O(()=>{W(t),J(!0)})},we=()=>{for(let t=0;t<u.length;t++){const{top:i}=m.useRect(u[t].$el);if(i>G.value)return t===0?0:t-1}return u.length-1},xe=()=>{if(e.scrollspy&&!s){const t=we();M(t)}},Se=()=>u.map((t,i)=>g(lt,De({key:t.id,id:`${T}-${i}`,ref:k(i),type:e.type,color:e.color,style:t.titleStyle,class:t.titleClass,shrink:e.shrink,isActive:i===v.currentIndex,controls:t.id,scrollable:z.value,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:c=>ge(t,i,c)},He(t,["dot","badge","title","disabled","showZeroBadge"])),{title:t.$slots.title})),Te=()=>{if(e.type==="line"&&u.length)return g("div",{class:Z("line"),style:v.lineStyle},null)},p=()=>{var t,i,c;const{type:y,border:x,sticky:S}=e,_=[g("div",{ref:S?void 0:b,class:[Z("wrap"),{[Ee]:y==="line"&&x}]},[g("div",{ref:C,role:"tablist",class:Z("nav",[y,{shrink:e.shrink,complete:z.value}]),style:be.value,"aria-orientation":"horizontal"},[(t=l["nav-left"])==null?void 0:t.call(l),Se(),Te(),(i=l["nav-right"])==null?void 0:i.call(l)])]),(c=l["nav-bottom"])==null?void 0:c.call(l)];return S?g("div",{ref:b},[_]):_};P([()=>e.color,Oe],B),P(()=>e.active,t=>{t!==X.value&&W(t)}),P(()=>u.length,()=>{v.inited&&(W(e.active),B(),O(()=>{H(!0)}))});const ke=()=>{W(e.active,!0),O(()=>{v.inited=!0,b.value&&(a=m.useRect(b.value).height),H(!0)})},Ce=(t,i)=>o("rendered",t,i);return Q({resize:()=>{B(),O(()=>{var t,i;return(i=(t=f.value)==null?void 0:t.swipeRef.value)==null?void 0:i.resize()})},scrollTo:ye}),Ne(B),Le(B),m.onMountedOrActivated(ke),m.useEventListener("scroll",xe,{target:w,passive:!0}),L({id:T,props:e,setLine:B,onRendered:Ce,currentName:X,scrollIntoView:H}),()=>g("div",{ref:r,class:Z([e.type])},[e.sticky?g(it,{container:r.value,offsetTop:F.value,onScroll:me},{default:()=>[p()]}):p(),g(rt,{ref:f,count:u.length,inited:v.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:v.currentIndex,onChange:M},{default:()=>{var t;return[(t=l.default)==null?void 0:t.call(l)]}})])}});const[ut,Y]=E("tab"),ft=re({},Ze,{dot:Boolean,name:A,badge:A,title:String,disabled:Boolean,titleClass:je,titleStyle:[String,Object],showZeroBadge:j});var vt=V({name:ut,props:ft,setup(e,{slots:o}){const l=ue(),d=R(!1),{parent:n,index:a}=m.useParent(ve);if(!n){console.error("[Vant] <Tab> must be a child component of <Tabs>.");return}const s=()=>{var b;return(b=e.name)!=null?b:a.value},h=()=>{d.value=!0,n.props.lazyRender&&O(()=>{n.onRendered(s(),e.title)})},r=I(()=>{const b=s()===n.currentName.value;return b&&!d.value&&h(),b}),C=R(!r.value);return P(r,b=>{b?C.value=!1:m.doubleRaf(()=>{C.value=!0})}),P(()=>e.title,()=>{n.setLine(),n.scrollIntoView()}),Fe(qe,r),()=>{var b;const f=`${n.id}-${a.value}`,{animated:T,swipeable:w,scrollspy:$,lazyRender:k}=n.props;if(!o.default&&!T)return;const u=$||r.value;if(T||w)return g(Qe,{id:l,role:"tabpanel",class:Y("panel-wrapper",{inactive:C.value}),tabindex:r.value?0:-1,"aria-hidden":!r.value,"aria-labelledby":f},{default:()=>{var z;return[g("div",{class:Y("panel")},[(z=o.default)==null?void 0:z.call(o)])]}});const v=d.value||$||!k?(b=o.default)==null?void 0:b.call(o):null;return Q({id:l}),Ue(g("div",{id:l,role:"tabpanel",class:Y("panel"),tabindex:u?0:-1,"aria-labelledby":f},[v]),[[Ye,u]])}}});const xt=K(vt),St=K(dt);export{xt as T,St as a};

import{Q as se,V as q,U as K,a8 as ae,a0 as te,bA as oe,d as le,aF as ne,r as L,m as re,a9 as G,b as f,Y as ie,ab as ce,I as Z,$ as ue,_ as ge,i as _e,v as de,c as y,w as J,a as r,u,b8 as me,o as h,e as ve,t as I,F as M,x as j,n as W,y as z,av as fe,bb as pe,z as he,bE as be,bF as Ae,bG as we,bH as Ve,bI as ye,bJ as xe,bK as Ie,bL as Le,bM as Be,bN as Ne,bO as Ce,bP as Te,bQ as ke,bR as Ee,bS as Re,bT as Se,bU as Ue,bV as Ge,bW as Je,bX as He,bY as Oe}from"./index-9e7fbb1d.js";import{P as Fe}from"./index-5840608a.js";import{L as Pe}from"./index-53b4a0f7.js";import{E as ze}from"./index-3792a3b0.js";import{I as Ze}from"./index-514928b3.js";import{f as Qe}from"./product.api-18c5009b.js";import{u as De}from"./use-refs-908aec9d.js";import{I as Ye}from"./index-7160bc73.js";import"./use-id-05ee12a9.js";import"./index-c3a65373.js";import"./index-0937ac10.js";import"./___vite-browser-external_commonjs-proxy-3963c193.js";const[Xe,H]=se("rate");function qe(s,m,n,g){return s>=m?{status:"full",value:1}:s+.5>=m&&n&&!g?{status:"half",value:.5}:s+1>=m&&n&&g?{status:"half",value:Math.round((s-m+1)*1e10)/1e10}:{status:"void",value:0}}const Ke={size:q,icon:K("star"),color:String,count:ae(5),gutter:q,readonly:Boolean,disabled:Boolean,voidIcon:K("star-o"),allowHalf:Boolean,voidColor:String,touchable:te,iconPrefix:String,modelValue:oe(0),disabledColor:String};var Me=le({name:Xe,props:Ke,emits:["change","update:modelValue"],setup(s,{emit:m}){const n=ne(),[g,p]=De(),b=L(),A=()=>s.readonly||s.disabled||!s.touchable,w=re(()=>Array(+s.count).fill("").map((a,e)=>qe(s.modelValue,e+1,s.allowHalf,s.readonly)));let i,V,B=Number.MAX_SAFE_INTEGER,N=Number.MIN_SAFE_INTEGER;const C=()=>{V=G.useRect(b);const a=g.value.map(G.useRect);i=[],a.forEach((e,t)=>{B=Math.min(e.top,B),N=Math.max(e.top,N),s.allowHalf?i.push({score:t+.5,left:e.left,top:e.top,height:e.height},{score:t+1,left:e.left+e.width/2,top:e.top,height:e.height}):i.push({score:t+1,left:e.left,top:e.top,height:e.height})})},T=(a,e)=>{for(let t=i.length-1;t>0;t--)if(e>=V.top&&e<=V.bottom){if(a>i[t].left&&e>=i[t].top&&e<=i[t].top+i[t].height)return i[t].score}else{const _=e<V.top?B:N;if(a>i[t].left&&i[t].top===_)return i[t].score}return s.allowHalf?.5:1},k=a=>{!s.disabled&&!s.readonly&&a!==s.modelValue&&(m("update:modelValue",a),m("change",a))},l=a=>{A()||(n.start(a),C())},c=a=>{if(!A()&&(n.move(a),n.isHorizontal())){const{clientX:e,clientY:t}=a.touches[0];ie(a),k(T(e,t))}},v=(a,e)=>{const{icon:t,size:_,color:x,count:E,gutter:o,voidIcon:R,disabled:d,voidColor:S,allowHalf:O,iconPrefix:Q,disabledColor:D}=s,F=e+1,P=a.status==="full",U=a.status==="void",$=O&&a.value>0&&a.value<1;let Y;o&&F!==+E&&(Y={paddingRight:ce(o)});const ee=X=>{C(),k(O?T(X.clientX,X.clientY):F)};return f("div",{key:e,ref:p(e),role:"radio",style:Y,class:H("item"),tabindex:d?void 0:0,"aria-setsize":E,"aria-posinset":F,"aria-checked":!U,onClick:ee},[f(Z,{size:_,name:P?t:R,class:H("icon",{disabled:d,full:P}),color:d?D:P?x:S,classPrefix:Q},null),$&&f(Z,{size:_,style:{width:a.value+"em"},name:U?R:t,class:H("icon",["half",{disabled:d,full:!U}]),color:d?D:U?S:x,classPrefix:Q},null)])};return G.useCustomFieldValue(()=>s.modelValue),G.useEventListener("touchmove",c,{target:b}),()=>f("div",{ref:b,role:"radiogroup",class:H({readonly:s.readonly,disabled:s.disabled}),tabindex:s.disabled?void 0:0,"aria-disabled":s.disabled,"aria-readonly":s.readonly,onTouchstartPassive:l},[w.value.map(v)])}});const je=ue(Me);const We={class:"comment"},$e={class:"list"},es={key:0},ss={class:"flex score"},as={class:"flex user-name"},ts=["src"],os={class:"text-black text-sm"},ls={class:"comment-text pt-3 pb-3",style:{color:"#666"}},ns={class:"flex overflow-x-auto mb-3"},rs=["onClick","src"],is={class:"item py-1 flex"},cs={class:"flex-1 flex left"},us=["onClick"],gs={class:"product-info flex-1"},_s={class:"name"},ds={class:"flex justify-between"},ms={class:"money"},vs={class:"comment-time"},fs={__name:"comment",setup(s){const m=_e(),{t:n}=de.exports.useI18n(),g=L([]),p=L(!1),b=L(!1);let A=L(1);const w=L(!1),i=new URL("/www/png/name-20d65991.png",self.location),V=l=>{Ze([l])},B=()=>{p.value=!1,A.value=1,C()},N=l=>{const c=[];return Object.keys(l).forEach(v=>{v.indexOf("imgUrl")>-1&&l[v]&&c.push(l[v])}),c},C=()=>{const l={pageNum:A.value,pageSize:20};Qe(l).then(c=>{w.value=!1;const{pageInfo:v,pageList:a}=c,e=a||[];e.map(_=>{_.avatar=_.avatar||Math.floor(Math.random()*20)});const t=e.sort((_,x)=>x.createTime/1-_.createTime/1);g.value=A.value===1?t:[...g.value,...t],A.value++,p.value=!1,w.value=!1,b.value=v.lastPage}).catch(()=>{b.value=!0,p.value=!1,w.value=!1})},T=l=>l?new URL(Object.assign({"/src/assets/image/userAvatar/1.png":be,"/src/assets/image/userAvatar/10.png":Ae,"/src/assets/image/userAvatar/11.png":we,"/src/assets/image/userAvatar/12.png":Ve,"/src/assets/image/userAvatar/13.png":ye,"/src/assets/image/userAvatar/14.png":xe,"/src/assets/image/userAvatar/15.png":Ie,"/src/assets/image/userAvatar/16.png":Le,"/src/assets/image/userAvatar/17.png":Be,"/src/assets/image/userAvatar/18.png":Ne,"/src/assets/image/userAvatar/19.png":Ce,"/src/assets/image/userAvatar/2.png":Te,"/src/assets/image/userAvatar/20.png":ke,"/src/assets/image/userAvatar/3.png":Ee,"/src/assets/image/userAvatar/4.png":Re,"/src/assets/image/userAvatar/5.png":Se,"/src/assets/image/userAvatar/6.png":Ue,"/src/assets/image/userAvatar/7.png":Ge,"/src/assets/image/userAvatar/8.png":Je,"/src/assets/image/userAvatar/9.png":He,"/src/assets/image/userAvatar/default.png":Oe})[`/src/assets/image/userAvatar/${l}.png`],self.location).href:new URL("data:image/png;base64,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",self.location).href;function k(l){let c=l.substring(2,l.length-1);return l.replace(c,"***")}return(l,c)=>{const v=me,a=je,e=Z,t=Ye,_=ze,x=Pe,E=Fe;return h(),y("div",We,[f(v,{fixed:""},{title:J(()=>[ve(I(u(n)("product.23")),1)]),_:1}),r("div",$e,[f(E,{modelValue:w.value,"onUpdate:modelValue":c[1]||(c[1]=o=>w.value=o),"pulling-text":u(n)("pullingText"),"loosing-text":u(n)("loosingText"),"loading-text":u(n)("loading"),onRefresh:B},{default:J(()=>[f(x,{loading:p.value,"onUpdate:loading":c[0]||(c[0]=o=>p.value=o),finished:b.value,"loading-text":u(n)("loading"),"finished-text":g.value.length?u(n)("product.3"):"",onLoad:C},{default:J(()=>[g.value.length?(h(),y("div",es,[(h(!0),y(M,null,j(g.value,(o,R)=>(h(),y("div",{class:W(["pl-3 pr-3 pt-4 comment-info pb-5",{"is-ar":u(m)}]),key:R},[r("div",ss,[r("div",as,[r("img",{class:"user-img",src:T(o.avatar)},null,8,ts),r("span",os,I(k(o.userName)),1)]),r("div",null,[f(a,{size:20,color:"#FFC93E",modelValue:o.rating,"onUpdate:modelValue":d=>o.rating=d},null,8,["modelValue","onUpdate:modelValue"])])]),r("div",ls,I(o.content||u(n)("\u7528\u6237\u672A\u53D1\u8868\u8BC4\u8BBA")),1),r("div",ns,[(h(!0),y(M,null,j(N(o),(d,S)=>(h(),y("img",{onClick:O=>V(d),class:W(["w-1/4 img-icon",u(m)?"ml-1.5":"mr-1.5"]),key:"imgs"+S,src:d,alt:""},null,10,rs))),128))]),r("div",is,[r("div",cs,[o.goodsVo.imgUrl1?(h(),y("div",{key:0,class:"product-img-wrap w-28 h-28",onClick:d=>V(o.goodsVo.imgUrl1)},[f(t,{src:o.goodsVo.imgUrl1,class:"product-img"},{error:J(()=>[f(e,{name:"photo-fail"})]),_:2},1032,["src"])],8,us)):z("v-if",!0),r("div",gs,[r("div",_s,I(o.goodsVo.name),1),r("div",ds,[r("div",ms,"$"+I(u(fe)(o.goodsVo.systemPrice)),1),r("div",vs,I(u(pe)(o.commentTime)),1)])])])])],2))),128))])):z("v-if",!0),!g.value.length&&!p.value?(h(),he(_,{key:1,image:u(i).href,description:u(n)("noData")},null,8,["image","description"])):z("v-if",!0)]),_:1},8,["loading","finished","loading-text","finished-text"])]),_:1},8,["modelValue","pulling-text","loosing-text","loading-text"])])])}}},Cs=ge(fs,[["__scopeId","data-v-97bfea85"],["__file","C:/Users/DIY/Desktop/\u6E90\u7801/H5-\u5546\u5BB6/src/views/product/comment.vue"]]);export{Cs as default};

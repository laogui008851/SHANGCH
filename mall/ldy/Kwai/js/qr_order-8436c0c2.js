import{_ as J,i as M,b_ as Y,j as G,v as Q,ai as W,r as l,m as B,q as X,f as Z,c as v,b as p,w as $,u as a,n as O,a as e,t as s,e as b,y as S,b2 as k,T as h,c3 as ee,c4 as se,b8 as te,o as m,F as oe,x as ae,av as r,J as ne,K as le,c5 as ie}from"./index-9e7fbb1d.js";import{A as ue}from"./index-229348d7.js";import{P as re,N as ce}from"./index-b8e004a1.js";/* empty css              */import{L as de}from"./index-53b4a0f7.js";import{D as _e}from"./decimal-87f76a35.js";import{B as ve}from"./index-1c6dc4f5.js";const pe=g=>(ne("data-v-7f0433a8"),g=g(),le(),g),me=pe(()=>e("div",{style:{height:"46px"}},null,-1)),fe={class:"listitem"},he={class:"pic"},ge=["src"],ye={class:"name"},$e={class:"title"},be={class:"col"},we={class:"title money"},Ie={class:"line"},Ne={class:"line-item"},De={class:"count"},Se={class:"line-item"},ke={class:"count"},Le={key:0,class:"price-content"},Pe={class:"line-item"},Ce={class:"count"},qe={class:"line-item"},Ve={class:"count"},xe={class:"line-item"},Be={class:"count"},Oe={class:"line-item"},Te={class:"count"},Ue={class:"line-item"},je={class:"count"},Fe={key:1,class:"btn"},ze={style:{height:"22rem"}},Ae={__name:"qr_order",setup(g){const L=M(),T=Y(),U=G(),{t:f}=Q.exports.useI18n(),P=W();let u=l(!0);l(0),l(0),l(0),l(0);const w=l([]),y=l(!1),I=l(!1),N=l({pageNum:1}),C=P.query.id;l(0),l(0);const d=l("");let _=l(!1);const n=l({}),q=l(!0),j=B(()=>{var t;return(t=U.userInfo)==null?void 0:t.safeword}),F=()=>{j.value?(_.value=!0,u.value=!0):(h(f("\u8BF7\u8BBE\u7F6E\u8D44\u91D1\u5BC6\u7801")),setTimeout(()=>{router.push({path:"/fundsPasswordSettings"})},1500))},z=()=>{const t={...N.value,orderId:C};ee(t).then(o=>{const c=o.pageList||[];w.value=N.value.pageNum===1?c:[...w.value,...c],N.value.pageNum++,y.value=!1,I.value=o.pageInfo.lastPage}).catch(()=>{I.value=!0,y.value=!1})},A=async()=>{h.loading({forbidClick:!0,duration:0}),await se({orderId:C}).then(t=>{n.value=t.orderInfo,q.value=!1,h.clear()}).catch(()=>{h.clear()})};X(()=>{A()});const E=()=>{const o={orderId:P.query.id,safeword:d.value};ie(o).then(c=>{T.decrement(),document.dispatchEvent(new CustomEvent("reloadOrderList")),setTimeout(()=>{router.back()},1e3)})};Z(()=>d.value,t=>{t.length===6&&(h.loading(""),E(),_.value=!1,d.value="")});const V=B(()=>{const{sellerDiscountPrice:t,systemPrice:o,fees:c,tax:D}=n.value;return r(Number(t||o)+Number(c)+Number(D))});return(t,o)=>{const c=te,D=de,x=ve,K=re,R=ce,H=ue;return m(),v("div",null,[p(c,{fixed:""},{title:$(()=>[b(s(t.$t("\u91C7\u8D2D\u786E\u8BA4")),1)]),_:1}),me,p(D,{loading:y.value,"onUpdate:loading":o[0]||(o[0]=i=>y.value=i),finished:I.value,"loading-text":a(f)("loading"),onLoad:z},{default:$(()=>[e("div",{class:O(["list",{"is-ar":a(L)}])},[(m(!0),v(oe,null,ae(w.value,i=>(m(),v("div",fe,[e("div",he,[e("img",{style:{"object-fit":"contain"},src:i.goodsIcon},null,8,ge)]),e("div",ye,[e("p",$e,s(i.goodsName),1),e("p",be,s(t.$t("\u91C7\u8D2D\u6570\u91CF")),1),e("p",we,"$"+s(a(r)(i.systemPrice)),1),e("span",null,"x"+s(i.goodsNum),1)])]))),256))],2)]),_:1},8,["loading","finished","loading-text"]),Object.keys(n.value).length>0?(m(),v("div",{key:0,class:O(["line-content",{"is-ar":a(L)}])},[e("div",Ie,[e("div",Ne,[e("p",null,s(t.$t("\u4E70\u5BB6\u4ED8\u6B3E")),1),e("p",De,"$"+s(a(r)(n.value.prizeReal)),1)]),e("div",Se,[e("p",null,s(t.$t("\u91C7\u8D2D\u91D1\u989D")),1),e("p",ke,"$"+s(a(r)(n.value.systemPrice)),1)]),n.value.sellerDiscountPrice?(m(),v("div",Le,[b(s(a(f)("\u4F18\u60E0\u4EF7")),1),e("span",null,"$"+s(a(r)(n.value.sellerDiscountPrice)),1),b(", "+s(a(f)("\u91C7\u8D2D\u4F18\u60E0")),1),e("span",null,s(new(a(_e))(n.value.sellerDiscount).mul(100))+"%",1)])):S("v-if",!0),e("div",Pe,[e("p",null,s(t.$t("\u91C7\u8D2D\u6570\u91CF")),1),e("p",Ce,s(n.value.goodsCount),1)]),e("div",qe,[e("p",null,s(t.$t("\u5229\u6DA6")),1),e("p",Ve,"$"+s(a(r)(n.value.profit)),1)]),e("div",xe,[e("p",null,s(t.$t("\u8FD0\u8D39")),1),e("p",Be,"$"+s(a(r)(n.value.fees)),1)]),e("div",Oe,[e("p",null,s(t.$t("\u7A0E")),1),e("p",Te,"$"+s(a(r)(n.value.tax)),1)]),e("div",Ue,[e("p",null,s(t.$t("\u5408\u8BA1")),1),e("p",je,"$"+s(V.value),1)])])],2)):S("v-if",!0),!q.value&&n.value.purchStatus/1!==1&&n.value.status/1!==-1&&n.value.status/1!==0&&n.value.status/1!==6?(m(),v("div",Fe,[p(x,{type:"primary",size:"large",onClick:F},{default:$(()=>[b(s(`${t.$t("\u7ACB\u5373\u652F\u4ED8")} $${V.value}`),1)]),_:1})])):S("v-if",!0),p(H,{show:a(_),"onUpdate:show":o[4]||(o[4]=i=>k(_)?_.value=i:_=i),title:a(f)("\u8BF7\u8F93\u5165\u4EA4\u6613\u5BC6\u7801")},{default:$(()=>[e("div",ze,[p(K,{length:6,value:d.value,focused:a(u),onFocus:o[1]||(o[1]=i=>k(u)?u.value=!0:u=!0)},null,8,["value","focused"]),p(R,{modelValue:d.value,"onUpdate:modelValue":o[2]||(o[2]=i=>d.value=i),show:a(u),onBlur:o[3]||(o[3]=i=>k(u)?u.value=!1:u=!1)},null,8,["modelValue","show"])])]),_:1},8,["show","title"])])}}},Ge=J(Ae,[["__scopeId","data-v-7f0433a8"],["__file","C:/Users/DIY/Desktop/\u6E90\u7801/H5-\u5546\u5BB6/src/views/order/qr_order.vue"]]);export{Ge as default};

import{_ as B,ai as P,l as U,v as A,r as a,j as E,q as R,c as D,b as r,w as x,a as v,u as _,T as c,cM as j,b8 as q,o as H,e as y,t as T}from"./index-9e7fbb1d.js";/* empty css              */import{E as V}from"./index-d3a6b3e3.js";import{n as L}from"./nationalityList-0f079a49.js";import{c as f}from"./countryList-016fc82e.js";import{B as M}from"./index-1c6dc4f5.js";import"./index-cc95e9e3.js";import"./index-5f41b23e.js";import"./use-id-05ee12a9.js";import"./index-229348d7.js";import"./index-899be335.js";const G={class:"bindVerify h-full bg-white"},O={class:"content"},Y={style:{"margin-top":"22px"}},z={style:{"margin-top":"22px"}},F={__name:"index",setup(J){const w=P(),h=U(),{t:o}=A.exports.useI18n(),n=a(""),u=a(""),l=a(0),d=a(""),p=E(),i=a(!1),b=a("\u4FEE\u6539\u624B\u673A\u53F7\u7801");R(()=>{const e=p.userInfo.phone;if(e&&!p.phoneverif){const t=e.split(" ");b.value="bindPhone",l.value=Number(t[0]),n.value=t[1];for(const s in f)f[s].dialCode===Number(t[0])&&(d.value=f[s].code)}});const C=()=>{if(n.value==""){c(o("entryPhone"));return}if(!/^[0-9]+$/.test(n.value)){c(o("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7\u7801"));return}if(u.value==""){c(o("\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801"));return}i.value=!0,N()},$=async()=>{await p.getUserInfo(!0),c(o("bindSuccess")),i.value=!1,setTimeout(()=>{w.query.reset?h.go(-2):h.back()},1e3)},N=()=>{j({target:`${l.value} ${n.value}`,phone:`${l.value} ${n.value}`,password:u.value}).then(e=>{$()}).catch(e=>{console.log(e),i.value=!1})},S=(e,t,s)=>{console.log(t),d.value=t,l.value=s},g=a(null),k=()=>{g.value.open()};return(e,t)=>{const s=q,I=M;return H(),D("div",G,[r(s,null,{title:x(()=>[y(T(_(o)(b.value)),1)]),_:1}),v("div",O,[v("div",Y,[r(V,{label:_(o)("phoneNum"),placeholderText:_(o)("entryPhone"),modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=m=>n.value=m),area:!0,onSelectArea:k,dialCode:l.value,icon:d.value},null,8,["label","placeholderText","modelValue","dialCode","icon"])]),v("div",z,[r(V,{label:e.$t("\u767B\u5F55\u5BC6\u7801"),placeholderText:e.$t("\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801"),modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=m=>u.value=m),typeText:"password",clearBtn:!1},null,8,["label","placeholderText","modelValue"])]),r(I,{class:"w-full",style:{"margin-top":"30px"},type:"primary",loading:i.value,onClick:C},{default:x(()=>[y(T(e.$t("confirm")),1)]),_:1},8,["loading"])]),r(L,{ref_key:"controlChildRef",ref:g,title:e.$t("selectArea"),onGetName:S},null,8,["title"])])}}},le=B(F,[["__scopeId","data-v-403e7485"],["__file","C:/Users/DIY/Desktop/\u6E90\u7801/H5-\u5546\u5BB6/src/views/changePhone/index.vue"]]);export{le as default};

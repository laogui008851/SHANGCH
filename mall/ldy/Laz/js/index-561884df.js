import{_ as te,ai as oe,l as ae,v as le,r as l,j as se,q as ne,cm as ue,f as ie,Z as re,c as _,b as v,w as $,a as t,y as m,t as u,g as ve,h as ce,e as A,F as de,u as pe,T as i,cn as me,co as P,cp as fe,b8 as ge,o as C,J as ye,K as he}from"./index-9e7fbb1d.js";/* empty css              */import{P as _e,N as Ae}from"./index-b8e004a1.js";import{E as j}from"./index-d3a6b3e3.js";import{a as Ce}from"./login.api-b3a321e3.js";import{n as be}from"./nationalityList-0f079a49.js";import{u as Ve}from"./index-1f47ca11.js";import{B as we}from"./index-1c6dc4f5.js";import{I as Se}from"./index-7160bc73.js";import"./index-cc95e9e3.js";import"./index-5f41b23e.js";import"./use-id-05ee12a9.js";import"./index-229348d7.js";import"./index-899be335.js";import"./countryList-016fc82e.js";const Ie="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKzSURBVHgBvVZdbtpAEP5214G+VOUI9ATlBqEnKDlB4CVV1JeitJHSKIqjCJCaEsRDFYVUIj1BuEHICUJPUN+gPDY23unuEsjaQLDz00+yZHt29tud2Z35GFKi9vV7AYIXGHiOJHLg0pMS3t7nzX4Sf5Zk0OHRSdHhYp2AkvrM3TO0F8qwvYi80ep07yVsNE7ylHW6ICoiDQgDPwjX3J1NzyZTESnzRT714x/rlBHXC8iG6vFun1kwFDIZ8bvePP1ok41Nc9Bone2TJDdOov61QaPe7vaHgW0weWVOiXOmw563bcTYgBEV7tYSw+G305Jg7CLiRGgHYsV1q5UhlqB2dOoyzvYX2SOEOmfIiEt7lRSisru9cY4UqDVPygyiO88WzWFG7EdCIqmalsxMysXqItt0h+ZEqkRbhvOdrY0KUsI+IHMXM3khh5dsww0PD/DEZBFCVT3eTV717tzq3R16KrIooXXfJHCFFEhKpuGMHVT+pPU3DAZIgZu/JvyJUmAIRyPkhXVeiWf/IAXsErYMhsZxkNjhsTCEN3gRqSBEwWs8Ewzhbcka3v3kRTwTHOu9j3G/AxNsFU+EerNzobuHmZfQnx6VkOjndBShqJsuHglTm/UmSJVL9ejrNiXc+/S+Byusgouu2+rm8BioRmB9eQFf6UWKNyGsWp/5jPS7eCDqrbNWrBG09VmZ6Yf1486lDqm1jJ7vy2rSu+a63Vz2VdCKVR7vy9aGOfkzEsNnK2ssIh1YScmFy1qzU15GpvOefRlcx8l8Hr6dzjbPUZc6yGgjnjgrhz6BfoVSmvLHOfIMzhsViTJmFZ0hsxvBQtVm6mvIXTC2joeAWN8Xo0q86yzVpVoucMSUwP3w1NiD3a35SiGRENbQ+eFMlJRAeoOxCpuEb6h2o0joSlLYS6rA/xv+AZfLLFBKDLSAAAAAAElFTkSuQmCC";const ke=b=>(ye("data-v-59a3607d"),b=b(),he(),b),Be={class:"bindVerify h-full bg-white"},Ee={class:"content"},$e={key:0},Te={style:{"margin-top":"22px"}},Ue={class:"label mt-2 textColor"},xe={class:"iptbox inputBackground"},Ne=["placeholder"],Re={style:{"margin-top":"22px"}},He={key:1},Pe={class:"pl-30 pr-30 text-center flex flex-col items-center justify-center mt40"},je={class:"imgbox"},ze={class:"code flex items-center justify-center textColor"},De={class:"tips"},Fe={class:"flex justify-between mt-6 mb-3"},Ge={class:"flex items-center"},qe=ke(()=>t("div",{class:"mt-2"},null,-1)),Oe={class:"mt-5 bottom tabBackground textColor"},Ze={__name:"index",setup(b){const I=oe(),T=ae(),{t:n}=le.exports.useI18n(),{toClipboard:z}=Ve(),V=l(""),s=l(""),f=l(""),U=l(!1),o=l(0),k=l(""),w=l(""),S=l(""),g=l(!1),c=l("");l(!0);const x=l(""),p=l(0),y=l(null),d=l(0),N=l(""),D=se(),h=l(!1);ne(()=>{console.log("ss"),F(),clearInterval(y.value),y.value=null});const F=()=>{o.value=I.query.type,k.value=I.query.verifyCode||"",o.value==1?(V.value=n("bindPhone"),U.value=!0):o.value==2?V.value=n("bindEmail"):o.value==3&&(V.value=n("googleAuthenticatorEn"),R())},G=async()=>{const e=/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;if(o.value==2&&s.value==""){i(n("entryEmail"));return}if(o.value==2&&!e.test(s.value)){i(n("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u5730\u5740"));return}if(o.value==1&&s.value==""){i(n("entryPhone"));return}if(o.value==1&&!/^[0-9]+$/.test(s.value)){i(n("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7\u7801"));return}if(d.value>0)return!1;i.loading({mask:!0}),await me({target:o.value==1?`${p.value} ${s.value}`:s.value}),Ce({target:o.value==1?`${p.value} ${s.value}`:s.value}).then(a=>{i(n("sendSuccess")),d.value=30,y.value=setInterval(()=>{d.value>0?d.value=d.value-1:(d.value=0,clearInterval(y.value),y.value=null)},1e3)}).catch(()=>{i.clear()})},q=()=>{if(o.value==2&&s.value==""){i(n("entryEmail"));return}if(o.value==1&&s.value==""){i(n("entryPhone"));return}if(f.value==""){i(n("\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801"));return}h.value=!0,o.value==1?Z():o.value==2?O():o.value==3&&J()},B=async()=>{await D.getUserInfo(!0),i(n("bindSuccess")),h.value=!1,setTimeout(()=>{I.query.reset?T.go(-2):T.back()},1e3)},O=()=>{P({target:s.value,email:s.value,verifcode:w.value,password:f.value,verifyCode:k.value}).then(e=>{B()}).catch(e=>{console.log(e),h.value=!1})},Z=()=>{P({target:`${p.value} ${s.value}`,phone:`${p.value} ${s.value}`,verifcode:w.value,password:f.value,verifyCode:k.value}).then(e=>{B()}).catch(e=>{console.log(e),h.value=!1})},R=()=>{ue({}).then(e=>{S.value=e.google_auth_secret,x.value=e.google_auth_url,console.log(e)})},J=()=>{fe({secret:S.value,code:c.value}).then(e=>{e.google_auth_bind?B():i(err||n("bindFailed"))})},Y=async()=>{try{await z(S.value),i(n("copySuccess"))}catch(e){console.error(e)}},X=async()=>{c.value=await navigator.clipboard.readText()},K=(e,a,E)=>{N.value=a,p.value=E},H=l(null),M=()=>{H.value.open()};return ie(c,(e,a)=>{c.value.length===6&&(g.value=!1)}),(e,a)=>{const E=ge,W=re,L=_e,Q=Ae,ee=we;return C(),_("div",Be,[v(E,null,{title:$(()=>[A(u(V.value),1)]),_:1}),t("div",Ee,[m(" \u624B\u673A\u90AE\u7BB1\u9A8C\u8BC1 "),o.value==1||o.value==2?(C(),_("div",$e,[t("div",Te,[v(j,{label:o.value==2?e.$t("email"):e.$t("phoneNum"),placeholderText:o.value==2?e.$t("entryEmail"):e.$t("entryPhone"),modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=r=>s.value=r),area:U.value,onSelectArea:M,dialCode:p.value,icon:N.value},null,8,["label","placeholderText","modelValue","area","dialCode","icon"])]),t("p",Ue,u(e.$t("verificationCode")),1),t("div",xe,[ve(t("input",{class:"inputBackground textColor",type:"text",placeholder:e.$t("entryVerifyCode"),"onUpdate:modelValue":a[1]||(a[1]=r=>w.value=r)},null,8,Ne),[[ce,w.value]]),o.value!=3?(C(),_("span",{key:0,onClick:G},[A(u(e.$t("sendVerifyCode")),1),d.value?(C(),_(de,{key:0},[A(" ("+u(d.value)+")s",1)],64)):m("v-if",!0)])):m("v-if",!0)]),t("div",Re,[v(j,{label:e.$t("\u767B\u5F55\u5BC6\u7801"),placeholderText:e.$t("\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801"),modelValue:f.value,"onUpdate:modelValue":a[2]||(a[2]=r=>f.value=r),typeText:"password",clearBtn:!1},null,8,["label","placeholderText","modelValue"])])])):m("v-if",!0),m(" \u8C37\u6B4C\u9A8C\u8BC1 "),o.value==3?(C(),_("div",He,[t("div",Pe,[t("div",je,[v(pe(Se),{src:x.value},{loading:$(()=>[v(W,{type:"spinner",size:"20"})]),_:1},8,["src"])]),t("div",ze,[A(u(S.value)+" ",1),t("img",{src:Ie,alt:"",onClick:R})]),t("p",De,u(e.$t("saveKeyTips")),1),t("div",{class:"copy textColor",onClick:Y},u(e.$t("copy")),1)]),t("div",Fe,[t("div",null,u(e.$t("googleVerificationCode")),1),t("div",Ge,[t("div",{class:"colorMain",onClick:a[3]||(a[3]=r=>c.value="")},u(e.$t("clear")),1),t("div",{class:"colorMain ml-30",onClick:X},u(e.$t("paste")),1)])]),v(L,{value:c.value,gutter:16,focused:g.value,onFocus:a[4]||(a[4]=r=>g.value=!0),mask:!1},null,8,["value","focused"]),v(Q,{modelValue:c.value,"onUpdate:modelValue":a[5]||(a[5]=r=>c.value=r),show:g.value,onBlur:a[6]||(a[6]=r=>g.value=!1)},null,8,["modelValue","show"]),qe,t("div",Oe,[t("p",null,u(e.$t("precautions")),1),t("p",null,u(e.$t("precautionsTips1")),1),t("p",null,u(e.$t("precautionsTips2")),1)])])):m("v-if",!0),v(ee,{class:"w-full",style:{"margin-top":"30px"},type:"primary",loading:h.value,onClick:q},{default:$(()=>[A(u(e.$t("confirm")),1)]),_:1},8,["loading"])]),v(be,{ref_key:"controlChildRef",ref:H,title:e.$t("selectArea"),onGetName:K},null,8,["title"])])}}},ut=te(Ze,[["__scopeId","data-v-59a3607d"],["__file","C:/Users/DIY/Desktop/\u6E90\u7801/H5-\u5546\u5BB6/src/views/bindVerify/index.vue"]]);export{ut as default};

import{_ as M,a0 as G,bT as J,i as Q,v as W,$ as X,r as a,H as x,m as Y,f as Z,c as v,b as p,w as b,u as n,n as B,a as e,t,e as w,q as $,b3 as L,T as h,c0 as ee,c1 as se,ba as te,o as m,F as oe,s as ae,aw as c,C as ne,D as le,c2 as ue}from"./index-754777e9.js";import{A as re}from"./index-79dc697d.js";import{P as ie,N as ce}from"./index-addb63b1.js";/* empty css              */import{L as de}from"./index-eae9591f.js";import{D as _e}from"./decimal-87f76a35.js";import{B as ve}from"./index-7c758373.js";const pe=g=>(ne("data-v-7f0433a8"),g=g(),le(),g),me=pe(()=>e("div",{style:{height:"46px"}},null,-1)),fe={class:"listitem"},he={class:"pic"},ge=["src"],ye={class:"name"},be={class:"title"},we={class:"col"},$e={class:"title money"},Ie={class:"line"},Ne={class:"line-item"},Se={class:"count"},De={class:"line-item"},Le={class:"count"},ke={key:0,class:"price-content"},Pe={class:"line-item"},Ce={class:"count"},qe={class:"line-item"},Ve={class:"count"},xe={class:"line-item"},Be={class:"count"},Te={class:"line-item"},Oe={class:"count"},Fe={key:1,class:"btn"},Ue={style:{height:"22rem"}},je={__name:"qr_order",setup(g){const k=G(),T=J(),O=Q(),{t:f}=W.exports.useI18n(),P=X();let r=a(!0);a(0),a(0),a(0),a(0);const I=a([]),y=a(!1),N=a(!1),S=a({pageNum:1}),C=P.query.id;a(0),a(0);const d=a("");let _=a(!1);a(""),a("");const l=a({}),q=a(!0),F=x(()=>{var s;return(s=O.userInfo)==null?void 0:s.safeword}),U=()=>{F.value?(_.value=!0,r.value=!0):(h(f("\u8BF7\u8BBE\u7F6E\u8D44\u91D1\u5BC6\u7801")),setTimeout(()=>{router.push({path:"/fundsPasswordSettings"})},1500))},j=()=>{const s={...S.value,orderId:C};ee(s).then(o=>{const i=o.pageList||[];I.value=S.value.pageNum===1?i:[...I.value,...i],S.value.pageNum++,y.value=!1,N.value=o.pageInfo.lastPage}).catch(()=>{N.value=!0,y.value=!1})},z=async()=>{h.loading({forbidClick:!0,duration:0}),await se({orderId:C}).then(s=>{l.value=s.orderInfo,q.value=!1,h.clear()}).catch(()=>{h.clear()})};Y(()=>{z()});const A=()=>{const o={orderId:P.query.id,safeword:d.value};ue(o).then(i=>{T.decrement(),document.dispatchEvent(new CustomEvent("reloadOrderList")),setTimeout(()=>{router.back()},1e3)})};Z(()=>d.value,s=>{s.length===6&&(h.loading(""),A(),_.value=!1,d.value="")});const E=x(()=>{const{sellerDiscountPrice:s,systemPrice:o,fees:i,tax:D}=l.value;return c(Number(s||o)+Number(i)+Number(D))});return(s,o)=>{const i=te,D=de,V=ve,R=ie,H=ce,K=re;return m(),v("div",null,[p(i,{fixed:""},{title:b(()=>[w(t(s.$t("\u91C7\u8D2D\u786E\u8BA4")),1)]),_:1}),me,p(D,{loading:y.value,"onUpdate:loading":o[0]||(o[0]=u=>y.value=u),finished:N.value,"loading-text":n(f)("loading"),onLoad:j},{default:b(()=>[e("div",{class:B(["list",{"is-ar":n(k)}])},[(m(!0),v(oe,null,ae(I.value,u=>(m(),v("div",fe,[e("div",he,[e("img",{style:{"object-fit":"contain"},src:u.goodsIcon},null,8,ge)]),e("div",ye,[e("p",be,t(u.goodsName),1),e("p",we,t(s.$t("\u91C7\u8D2D\u6570\u91CF")),1),e("p",$e,"$"+t(n(c)(u.systemPrice)),1),e("span",null,"x"+t(u.goodsNum),1)])]))),256))],2)]),_:1},8,["loading","finished","loading-text"]),Object.keys(l.value).length>0?(m(),v("div",{key:0,class:B(["line-content",{"is-ar":n(k)}])},[e("div",Ie,[e("div",Ne,[e("p",null,t(s.$t("\u4E70\u5BB6\u4ED8\u6B3E")),1),e("p",Se,"$"+t(n(c)(l.value.prizeReal)),1)]),e("div",De,[e("p",null,t(s.$t("\u91C7\u8D2D\u91D1\u989D")),1),e("p",Le,"$"+t(n(c)(l.value.systemPrice)),1)]),l.value.sellerDiscountPrice?(m(),v("div",ke,[w(t(n(f)("\u4F18\u60E0\u4EF7")),1),e("span",null,"$"+t(n(c)(l.value.sellerDiscountPrice)),1),w(", "+t(n(f)("\u91C7\u8D2D\u4F18\u60E0")),1),e("span",null,t(new(n(_e))(l.value.sellerDiscount).mul(100))+"%",1)])):$("v-if",!0),e("div",Pe,[e("p",null,t(s.$t("\u91C7\u8D2D\u6570\u91CF")),1),e("p",Ce,t(l.value.goodsCount),1)]),e("div",qe,[e("p",null,t(s.$t("\u8FD0\u8D39")),1),e("p",Ve,"$"+t(n(c)(l.value.fees)),1)]),e("div",xe,[e("p",null,t(s.$t("\u7A0E")),1),e("p",Be,"$"+t(n(c)(l.value.tax)),1)]),e("div",Te,[e("p",null,t(s.$t("\u5408\u8BA1")),1),e("p",Oe,"$"+t(E.value),1)])])],2)):$("v-if",!0),$(" \u7269\u6D41\u516C\u53F8\u548C\u7269\u6D41\u5355\u53F7\u8F93\u5165\u6846\u5DF2\u79FB\u9664 "),!q.value&&l.value.purchStatus/1!==1&&l.value.status/1!==-1&&l.value.status/1!==0&&l.value.status/1!==6?(m(),v("div",Fe,[p(V,{type:"primary",size:"large",onClick:U},{default:b(()=>[w(t(s.$t("\u786E\u8BA4\u53D1\u8D27")),1)]),_:1})])):$("v-if",!0),p(K,{show:n(_),"onUpdate:show":o[4]||(o[4]=u=>L(_)?_.value=u:_=u),title:n(f)("\u8BF7\u8F93\u5165\u4EA4\u6613\u5BC6\u7801")},{default:b(()=>[e("div",Ue,[p(R,{length:6,value:d.value,focused:n(r),onFocus:o[1]||(o[1]=u=>L(r)?r.value=!0:r=!0)},null,8,["value","focused"]),p(H,{modelValue:d.value,"onUpdate:modelValue":o[2]||(o[2]=u=>d.value=u),show:n(r),onBlur:o[3]||(o[3]=u=>L(r)?r.value=!1:r=!1)},null,8,["modelValue","show"])])]),_:1},8,["show","title"])])}}},Ge=M(je,[["__scopeId","data-v-7f0433a8"],["__file","/mnt/e/\u7F16\u8BD1\u540E/\u524D\u7AEF/H5-\u5546\u5BB6/src/views/order/qr_order.vue"]]);export{Ge as default};

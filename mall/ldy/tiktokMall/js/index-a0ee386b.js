import{ab as g,aH as oe,bU as Ie,aU as Re,a_ as $e,a$ as Be,P as E,d as H,r as R,l as le,H as I,br as se,Q as re,bh as _e,f as P,b as m,U as A,S as ce,aa as N,b0 as de,Z as Y,a2 as U,a4 as K,bV as Pe,bp as X,m as Ae,ae as q,ak as ze,aX as Oe,p as O,ay as Ne,aZ as Le,ad as te,b4 as Ee,a6 as He,bW as ne,ai as Ve,aP as Ze,aR as De,bX as Me,R as We,a3 as Ue,af as Fe,g as Xe,b2 as je}from"./index-754777e9.js";import{u as ue}from"./use-id-f491a022.js";import{T as Ke}from"./index-eae9591f.js";import{a as Ye,S as qe}from"./index-aea96d27.js";import{u as Qe}from"./use-refs-3a3ef51f.js";function Ge(e,o,l){let d=0;const n=e.scrollLeft,a=l===0?1:Math.round(l*1e3/16);function s(){e.scrollLeft+=(o-n)/a,++d<a&&g.raf(s)}s()}function Je(e,o,l,d){let n=oe(e);const a=n<o,s=l===0?1:Math.round(l*1e3/16),h=(o-n)/s;function r(){n+=h,(a&&n>o||!a&&n<o)&&(n=o),Ie(e,n),a&&n<o||!a&&n>o?g.raf(r):d&&g.raf(d)}r()}function pe(e,o){if(!Re||!window.IntersectionObserver)return;const l=new IntersectionObserver(a=>{o(a[0].intersectionRatio>0)},{root:document.body}),d=()=>{e.value&&l.observe(e.value)},n=()=>{e.value&&l.unobserve(e.value)};$e(n),Be(n),g.onMountedOrActivated(d)}const[et,tt]=E("sticky"),nt={zIndex:A,position:ce("top"),container:Object,offsetTop:N(0),offsetBottom:N(0)};var at=H({name:et,props:nt,emits:["scroll","change"],setup(e,{emit:o,slots:l}){const d=R(),n=g.useScrollParent(d),a=le({fixed:!1,width:0,height:0,transform:0}),s=I(()=>se(e.position==="top"?e.offsetTop:e.offsetBottom)),h=I(()=>{const{fixed:f,height:T,width:w}=a;if(f)return{width:`${w}px`,height:`${T}px`}}),r=I(()=>{if(!a.fixed)return;const f=re(_e(e.zIndex),{width:`${a.width}px`,height:`${a.height}px`,[e.position]:`${s.value}px`});return a.transform&&(f.transform=`translate3d(0, ${a.transform}px, 0)`),f}),C=f=>o("scroll",{scrollTop:f,isFixed:a.fixed}),b=()=>{if(!d.value||de(d))return;const{container:f,position:T}=e,w=g.useRect(d),$=oe(window);if(a.width=w.width,a.height=w.height,T==="top")if(f){const k=g.useRect(f),u=k.bottom-s.value-a.height;a.fixed=s.value>w.top&&k.bottom>0,a.transform=u<0?u:0}else a.fixed=s.value>w.top;else{const{clientHeight:k}=document.documentElement;if(f){const u=g.useRect(f),L=k-u.top-s.value-a.height;a.fixed=k-s.value<w.bottom&&k>u.top,a.transform=L<0?-L:0}else a.fixed=k-s.value<w.bottom}C($)};return P(()=>a.fixed,f=>o("change",f)),g.useEventListener("scroll",b,{target:n,passive:!0}),pe(d,b),()=>{var f;return m("div",{ref:d,style:h.value},[m("div",{class:tt({fixed:a.fixed}),style:r.value},[(f=l.default)==null?void 0:f.call(l)])])}}});const it=Y(at),[ot,ae]=E("tab");var lt=H({name:ot,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:A,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:U},setup(e,{slots:o}){const l=I(()=>{const n={},{type:a,color:s,disabled:h,isActive:r,activeColor:C,inactiveColor:b}=e;s&&a==="card"&&(n.borderColor=s,h||(r?n.backgroundColor=s:n.color=s));const T=r?C:b;return T&&(n.color=T),n}),d=()=>{const n=m("span",{class:ae("text",{ellipsis:!e.scrollable})},[o.title?o.title():e.title]);return e.dot||K(e.badge)&&e.badge!==""?m(Pe,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[n]}):n};return()=>m("div",{id:e.id,role:"tab",class:[ae([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:l.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[d()])}});const[st,ie]=E("tabs");var rt=H({name:st,props:{count:X(Number),inited:Boolean,animated:Boolean,duration:X(A),swipeable:Boolean,lazyRender:Boolean,currentIndex:X(Number)},emits:["change"],setup(e,{emit:o,slots:l}){const d=R(),n=h=>o("change",h),a=()=>{var h;const r=(h=l.default)==null?void 0:h.call(l);return e.animated||e.swipeable?m(Ye,{ref:d,loop:!1,class:ie("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:n},{default:()=>[r]}):r},s=h=>{const r=d.value;r&&r.state.active!==h&&r.swipeTo(h,{immediate:!e.inited})};return P(()=>e.currentIndex,s),Ae(()=>{s(e.currentIndex)}),q({swipeRef:d}),()=>m("div",{class:ie("content",{animated:e.animated||e.swipeable})},[a()])}});const[fe,W]=E("tabs"),ct={type:ce("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:N(0),duration:N(.3),animated:Boolean,ellipsis:U,swipeable:Boolean,scrollspy:Boolean,offsetTop:N(0),background:String,lazyRender:U,lineWidth:A,lineHeight:A,beforeChange:Function,swipeThreshold:N(5),titleActiveColor:String,titleInactiveColor:String},ve=Symbol(fe);var dt=H({name:fe,props:ct,emits:["click","change","scroll","disabled","rendered","click-tab","update:active"],setup(e,{emit:o,slots:l}){var d,n;{const t=(n=(d=ze())==null?void 0:d.vnode)==null?void 0:n.props;t&&"onClick"in t&&console.warn('[Vant] Tabs: "click" event is deprecated, using "click-tab" instead.'),t&&"onDisabled"in t&&console.warn('[Vant] Tabs: "disabled" event is deprecated, using "click-tab" instead.')}let a,s,h;const r=R(),C=R(),b=R(),f=R(),T=ue(),w=g.useScrollParent(r),[$,k]=Qe(),{children:u,linkChildren:L}=g.useChildren(ve),v=le({inited:!1,position:"",lineStyle:{},currentIndex:-1}),z=I(()=>u.length>e.swipeThreshold||!e.ellipsis||e.shrink),be=I(()=>({borderColor:e.color,background:e.background})),V=(t,i)=>{var c;return(c=t.name)!=null?c:i},Q=I(()=>{const t=u[v.currentIndex];if(t)return V(t,v.currentIndex)}),F=I(()=>se(e.offsetTop)),G=I(()=>e.sticky?F.value+a:0),Z=t=>{const i=C.value,c=$.value;if(!z.value||!i||!c||!c[v.currentIndex])return;const y=c[v.currentIndex].$el,x=y.offsetLeft-(i.offsetWidth-y.offsetWidth)/2;Ge(i,x,t?0:+e.duration)},B=()=>{const t=v.inited;O(()=>{const i=$.value;if(!i||!i[v.currentIndex]||e.type!=="line"||de(r.value))return;const c=i[v.currentIndex].$el,{lineWidth:y,lineHeight:x}=e,S=c.offsetLeft+c.offsetWidth/2,_={width:te(y),backgroundColor:e.color,transform:`translateX(${S}px) translateX(-50%)`};if(t&&(_.transitionDuration=`${e.duration}s`),K(x)){const ee=te(x);_.height=ee,_.borderRadius=ee}v.lineStyle=_})},he=t=>{const i=t<v.currentIndex?-1:1;for(;t>=0&&t<u.length;){if(!u[t].disabled)return t;t+=i}},D=(t,i)=>{const c=he(t);if(!K(c))return;const y=u[c],x=V(y,c),S=v.currentIndex!==null;v.currentIndex!==c&&(v.currentIndex=c,i||Z(),B()),x!==e.active&&(o("update:active",x),S&&o("change",x,y.title)),h&&!e.scrollspy&&He(Math.ceil(ne(r.value)-F.value))},M=(t,i)=>{const c=u.find((x,S)=>V(x,S)===t),y=c?u.indexOf(c):0;D(y,i)},J=(t=!1)=>{if(e.scrollspy){const i=u[v.currentIndex].$el;if(i&&w.value){const c=ne(i,w.value)-G.value;s=!0,Je(w.value,c,t?0:+e.duration,()=>{s=!1})}}},me=(t,i,c)=>{const{title:y,disabled:x}=u[i],S=V(u[i],i);x?o("disabled",S,y):(De(e.beforeChange,{args:[S],done:()=>{D(i),J()}}),o("click",S,y),Me(t)),o("click-tab",{name:S,title:y,event:c,disabled:x})},ge=t=>{h=t.isFixed,o("scroll",t)},ye=t=>{O(()=>{M(t),J(!0)})},we=()=>{for(let t=0;t<u.length;t++){const{top:i}=g.useRect(u[t].$el);if(i>G.value)return t===0?0:t-1}return u.length-1},xe=()=>{if(e.scrollspy&&!s){const t=we();D(t)}},Se=()=>u.map((t,i)=>m(lt,Ve({key:t.id,id:`${T}-${i}`,ref:k(i),type:e.type,color:e.color,style:t.titleStyle,class:t.titleClass,shrink:e.shrink,isActive:i===v.currentIndex,controls:t.id,scrollable:z.value,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:c=>me(t,i,c)},Ze(t,["dot","badge","title","disabled","showZeroBadge"])),{title:t.$slots.title})),Te=()=>{if(e.type==="line"&&u.length)return m("div",{class:W("line"),style:v.lineStyle},null)},p=()=>{var t,i,c;const{type:y,border:x,sticky:S}=e,_=[m("div",{ref:S?void 0:b,class:[W("wrap"),{[Ee]:y==="line"&&x}]},[m("div",{ref:C,role:"tablist",class:W("nav",[y,{shrink:e.shrink,complete:z.value}]),style:be.value,"aria-orientation":"horizontal"},[(t=l["nav-left"])==null?void 0:t.call(l),Se(),Te(),(i=l["nav-right"])==null?void 0:i.call(l)])]),(c=l["nav-bottom"])==null?void 0:c.call(l)];return S?m("div",{ref:b},[_]):_};P([()=>e.color,Oe],B),P(()=>e.active,t=>{t!==Q.value&&M(t)}),P(()=>u.length,()=>{v.inited&&(M(e.active),B(),O(()=>{Z(!0)}))});const ke=()=>{M(e.active,!0),O(()=>{v.inited=!0,b.value&&(a=g.useRect(b.value).height),Z(!0)})},Ce=(t,i)=>o("rendered",t,i);return q({resize:()=>{B(),O(()=>{var t,i;return(i=(t=f.value)==null?void 0:t.swipeRef.value)==null?void 0:i.resize()})},scrollTo:ye}),Ne(B),Le(B),g.onMountedOrActivated(ke),g.useEventListener("scroll",xe,{target:w,passive:!0}),L({id:T,props:e,setLine:B,onRendered:Ce,currentName:Q,scrollIntoView:Z}),()=>m("div",{ref:r,class:W([e.type])},[e.sticky?m(it,{container:r.value,offsetTop:F.value,onScroll:ge},{default:()=>[p()]}):p(),m(rt,{ref:f,count:u.length,inited:v.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:v.currentIndex,onChange:D},{default:()=>{var t;return[(t=l.default)==null?void 0:t.call(l)]}})])}});const[ut,j]=E("tab"),ft=re({},We,{dot:Boolean,name:A,badge:A,title:String,disabled:Boolean,titleClass:Ue,titleStyle:[String,Object],showZeroBadge:U});var vt=H({name:ut,props:ft,setup(e,{slots:o}){const l=ue(),d=R(!1),{parent:n,index:a}=g.useParent(ve);if(!n){console.error("[Vant] <Tab> must be a child component of <Tabs>.");return}const s=()=>{var b;return(b=e.name)!=null?b:a.value},h=()=>{d.value=!0,n.props.lazyRender&&O(()=>{n.onRendered(s(),e.title)})},r=I(()=>{const b=s()===n.currentName.value;return b&&!d.value&&h(),b}),C=R(!r.value);return P(r,b=>{b?C.value=!1:g.doubleRaf(()=>{C.value=!0})}),P(()=>e.title,()=>{n.setLine(),n.scrollIntoView()}),Fe(Ke,r),()=>{var b;const f=`${n.id}-${a.value}`,{animated:T,swipeable:w,scrollspy:$,lazyRender:k}=n.props;if(!o.default&&!T)return;const u=$||r.value;if(T||w)return m(qe,{id:l,role:"tabpanel",class:j("panel-wrapper",{inactive:C.value}),tabindex:r.value?0:-1,"aria-hidden":!r.value,"aria-labelledby":f},{default:()=>{var z;return[m("div",{class:j("panel")},[(z=o.default)==null?void 0:z.call(o)])]}});const v=d.value||$||!k?(b=o.default)==null?void 0:b.call(o):null;return q({id:l}),Xe(m("div",{id:l,role:"tabpanel",class:j("panel"),tabindex:u?0:-1,"aria-labelledby":f},[v]),[[je,u]])}}});const xt=Y(vt),St=Y(dt);export{xt as T,St as a};

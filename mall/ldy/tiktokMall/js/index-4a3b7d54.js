import{_ as I,$ as P,k as A,v as E,r as a,i as R,m as U,c as H,b as r,w as x,a as v,u as _,T as c,cK as L,ba as j,o as q,e as y,t as T}from"./index-754777e9.js";/* empty css              */import{E as V}from"./index-54fdf1b3.js";import{n as D}from"./nationalityList-12b7551e.js";import{c as f}from"./countryList-016fc82e.js";import{B as G}from"./index-7c758373.js";import"./index-3cc9e254.js";import"./index-b450e8d5.js";import"./use-id-f491a022.js";import"./index-79dc697d.js";import"./index-6a96a1dc.js";const K={class:"bindVerify h-full bg-white"},M={class:"content"},O={style:{"margin-top":"22px"}},z={style:{"margin-top":"22px"}},F={__name:"index",setup(J){const $=P(),h=A(),{t:o}=E.exports.useI18n(),n=a(""),u=a(""),l=a(0),d=a(""),p=R(),i=a(!1),b=a("\u4FEE\u6539\u624B\u673A\u53F7\u7801");U(()=>{const e=p.userInfo.phone;if(e&&!p.phoneverif){const t=e.split(" ");b.value="bindPhone",l.value=Number(t[0]),n.value=t[1];for(const s in f)f[s].dialCode===Number(t[0])&&(d.value=f[s].code)}});const w=()=>{if(n.value==""){c(o("entryPhone"));return}if(!/^[0-9]+$/.test(n.value)){c(o("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7\u7801"));return}if(u.value==""){c(o("\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801"));return}i.value=!0,N()},C=async()=>{await p.getUserInfo(!0),c(o("bindSuccess")),i.value=!1,setTimeout(()=>{$.query.reset?h.go(-2):h.back()},1e3)},N=()=>{L({target:`${l.value} ${n.value}`,phone:`${l.value} ${n.value}`,password:u.value}).then(e=>{C()}).catch(e=>{console.log(e),i.value=!1})},S=(e,t,s)=>{console.log(t),d.value=t,l.value=s},g=a(null),k=()=>{g.value.open()};return(e,t)=>{const s=j,B=G;return q(),H("div",K,[r(s,null,{title:x(()=>[y(T(_(o)(b.value)),1)]),_:1}),v("div",M,[v("div",O,[r(V,{label:_(o)("phoneNum"),placeholderText:_(o)("entryPhone"),modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=m=>n.value=m),area:!0,onSelectArea:k,dialCode:l.value,icon:d.value},null,8,["label","placeholderText","modelValue","dialCode","icon"])]),v("div",z,[r(V,{label:e.$t("\u767B\u5F55\u5BC6\u7801"),placeholderText:e.$t("\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801"),modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=m=>u.value=m),typeText:"password",clearBtn:!1},null,8,["label","placeholderText","modelValue"])]),r(B,{class:"w-full",style:{"margin-top":"30px"},type:"primary",loading:i.value,onClick:w},{default:x(()=>[y(T(e.$t("confirm")),1)]),_:1},8,["loading"])]),r(D,{ref_key:"controlChildRef",ref:g,title:e.$t("selectArea"),onGetName:S},null,8,["title"])])}}},le=I(F,[["__scopeId","data-v-403e7485"],["__file","/mnt/e/\u7F16\u8BD1\u540E/\u524D\u7AEF/H5-\u5546\u5BB6/src/views/changePhone/index.vue"]]);export{le as default};

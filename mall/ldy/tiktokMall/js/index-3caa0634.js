import{_ as ue,a0 as de,v as pe,k as ve,$ as me,r as n,b6 as ge,m as he,cx as x,I as fe,b8 as _e,c as r,b as S,w as f,F as J,s as O,q as c,a as o,t as v,g as Ae,b2 as ke,u as a,J as R,n as ye,cy as _,T as A,o as l,b3 as Se,aw as j,K as we,C as Le,D as Ce,cz as xe}from"./index-754777e9.js";import{P as be}from"./index-9e13e533.js";import{L as Ie}from"./index-eae9591f.js";import{E as Ne}from"./index-326b8d79.js";import"./index-3cc9e254.js";import"./index-b450e8d5.js";import{S as Ue}from"./index-6a96a1dc.js";import{_ as Ee}from"./search-icon-8ae5f679.js";import{_ as Be}from"./more-f6d49895.js";import{e as Ge}from"./editProfit-61492b9f.js";import{h as He,g as Je}from"./product.api-954632e9.js";import{c as Oe}from"./index-4a9efcc8.js";import"./use-id-f491a022.js";/* empty css              */import"./index-8b10c6ce.js";import"./index-450e98dc.js";import"./index-48e2f1dc.js";import"./index-7ab10f44.js";import"./function-call-865b2be2.js";import"./index-7c758373.js";import"./index-67619815.js";import"./___vite-browser-external_commonjs-proxy-a1e65de0.js";const Re="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAwCAYAAABqkJjhAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKESURBVHgB7Zk9btswFMefZHu0obGeqt7AtT14q3qC+gZtTpD4BE5u0Gzd7J6g6tipymbAH0lOEGXyGO2G7fwZUAmT6ItiqMAAf4BASnoE/6RIPurRIkU6nY6LxC1oHl0BUsCikvR6vSGSMa6OTLn9fh8iOVutVlMqQY1K0O12x5Zl/UL2A0mCcg6uYbvddtbr9T+SRLqHIfYHKpwIjyL02i1L88qi3EcShg/KjdDTP0mCMoJvULHLb/1ms3kUBEGu2Jh+v38KoWN+G223208Y1oXL2yQBm2CC2KjRaIxkxDIWi8UpPX0Np16vS80BKcH0/HNez2azkMrxN87sdjuXJJAV/O4cnOCHSYex6dm27eUZYxi4sPvOb0Pc/6YSYB58o6f122fDK68Mhg7zOb7FJlKtVruhAwAN/cqGhEMHAr6E8zAkmDMgYQVAS46JNwRG51TAKbwVqHssCDwTXoXMnSc6DjQg5F6J+MIeUkVgj7KP88vl8pU+s6zpxgjWjRGsmzopAk/J1mv2uxSkLX/8v8/LsimKcg/DrU/4dcnFv67Etv9zmz+kiLJgeKPPPOtQipsXNv1Sm/UkzKTTjRGsGyNYN0awboxg3RjBulEWjI1NkSBM9CItjbJgbB1H2LFdQPgoY697xGyYLSmivIGfz+fskMXLskF8wUfi0xtgJp1ujGDdJArGjL+L8zg0caki+N91TOISmNbDjxFxLEfHVBFCdJ/SovKJyxp6eIoCceEhwq8ThOxLHQ8UxIHYL6j3RHg2TTJMPVhEnJadUFbWuyLMySB47SW9S510WOxZa8+pevxWqzVMe5l7dDsYDNzNZnOCVisHQbLAcGBR/ylOSoMsu3tYs9QwhJVNvQAAAABJRU5ErkJggg==";const V=w=>(Le("data-v-77847b5f"),w=w(),Ce(),w),Ve=V(()=>o("img",{class:"search-icon",src:Ee},null,-1)),Te={key:0,class:"result-list pl-4 pr-4"},je=["onClick"],ze={key:1,class:"search-history"},Me={class:"title"},Pe=V(()=>o("img",{src:Re,alt:"",class:"delete-icon"},null,-1)),De={key:0,class:"content"},Ye=["onClick"],Fe={key:2,class:"list ml-4 mr-4 mt-4 mb-4"},Ke=["onClick"],qe={class:"flex-1 flex left"},$e={class:"product-img-wrap w-20 h-20",style:{overflow:"hidden"}},Qe=["src"],Xe={class:"product-info"},We={class:"name"},Ze={class:"Specification"},es={key:0,style:{"margin-right":"20px"}},ss={key:1},ts={class:"money"},os={class:"item-more-content"},as=["onClick"],ls=V(()=>o("img",{class:"more-icon",src:Be},null,-1)),ns=[ls],is={__name:"index",setup(w){const z=de(),{t:k}=pe.exports.useI18n(),T=ve(),M=me(),p=n(M.query.id);let u=n(""),m=n(1),P=n(""),b=n(!1);n({});const g=n([]),I=n([]),D=n(!1),h=n(!1),N=n(!1);let d=n([]);const Y=()=>{},F=new URL("/www/png/name-20d65991.png",self.location),U=n(null);ge(()=>{U.value&&console.log(U.value)}),he(()=>{p.value/1===1?x("searchOne")&&(d.value=x("searchOne")):x("searchTwo")&&(d.value=x("searchTwo"))});const L=xe(()=>{u.value.trim()?(m.value=1,g.value=[],A.loading({forbidClick:!0,loadingType:"spinner"}),B(),K()):A({message:k("\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u5B57"),duration:2e3})},500),K=()=>{const e=u.value.trim(),s=p.value/1===1?"searchOne":"searchTwo";if(e!="")if(d.value.length==0)d.value.push(e),_(s,d.value);else{const i=Oe(d.value);i.unshift(e);const C=[...new Set(i)];d.value=C,_(s,C)}},q=()=>{p.value/1===1?_("searchOne",[]):_("searchTwo",[])},$=()=>{u.value=""},Q=e=>{u.value=e,L()},X=e=>{d.value=[],p.value/1===1?_("searchOne",""):_("searchTwo","")},W=()=>{D.value=!1,L()},Z=()=>{let e={pageNum:m.value,pageSize:20,keyword:u.value};He(e).then(s=>{console.log(s),A.clear(),m.value++;for(let i=0;i<s.pageList.length;i++)s.pageList[i].check=!1,g.value.push(s.pageList[i]);h.value=!1,s.pageList.length<20?(m.value>1&&A(k("\u6CA1\u6709\u66F4\u591A\u6570\u636E")),N.value=!0):m.value++})},ee=()=>{let e={name:u.value,categoryId:"",pageNum:m.value,pageSize:20};Je(e).then(s=>{A.clear(),console.log("\u5546\u5BB6\u81EA\u5DF1\u7684\u5546\u54C1",s);for(let i=0;i<s.pageList.length;i++)g.value.push(s.pageList[i]);h.value=!1,s.pageList.length<20?(m.value>1&&A(k("\u6CA1\u6709\u66F4\u591A\u6570\u636E")),N.value=!0):m.value++})},E=n(null);p.value/1===2?E.value=ee:E.value=Z;const B=()=>{console.log(123),E.value()},se=e=>{console.log("ssss",e),u.value="",I.value=[],P.value=e.goodsId,m.value=1,g.value=[],B()};let G=n([]);const te=e=>{p.value/1===1?T.push({path:"/productPage/productEdit",query:{item:JSON.stringify(e)}}):(G.value=[],G.value.push(e.id),b.value=!0)},oe=(e,s)=>{e.sellingPrice=s},ae=()=>{b.value=!1},le=e=>{p.value/1===1&&T.push({path:"/productPage/details",query:{item:JSON.stringify(e)}})};return(e,s)=>{const i=fe,C=Ue,ne=_e,ie=Ne,re=Ie,ce=be;return l(),r("div",{class:ye(["search-container",{"is-ar":a(z)}])},[S(ne,{fixed:"","left-arrow":"",onClickLeft:s[2]||(s[2]=()=>e.$router.back())},{title:f(()=>[c('        <van-search v-model="keyword" shape="round" @blur="record" @update:model-value="search" :clearable="false"'),c('          placeholder="\u8BF7\u8F93\u5165\u5546\u54C1" @input="inputHandle">'),S(C,{modelValue:a(u),"onUpdate:modelValue":s[0]||(s[0]=t=>Se(u)?u.value=t:u=t),shape:"round",clearable:!1,placeholder:e.$t("\u8BF7\u8F93\u5165\u5546\u54C1"),onInput:Y},{"left-icon":f(()=>[Ve]),"right-icon":f(()=>[a(u)?(l(),R(i,{key:0,name:"cross",onClick:$,size:"14",color:"#333333"})):c("v-if",!0)]),_:1},8,["modelValue","placeholder"])]),right:f(()=>[o("div",{onClick:s[1]||(s[1]=(...t)=>a(L)&&a(L)(...t))},v(e.$t("\u641C\u7D22")),1)]),_:1}),I.value.length>0?(l(),r("div",Te,[(l(!0),r(J,null,O(I.value,(t,y)=>(l(),r("div",{class:"result-list-item pt-2 pb-2",onClick:H=>se(t),key:y},v(t.name),9,je))),128))])):c("v-if",!0),g.value.length==0?(l(),r("div",ze,[o("div",Me,[o("p",null,v(e.$t("\u5386\u53F2\u641C\u7D22")),1),Ae(o("div",{class:"clear",onClick:q},[Pe,o("p",{onClick:X},v(e.$t("\u6E05\u7A7A")),1)],512),[[ke,a(d).length>0]])]),a(d).length>0?(l(),r("div",De,[(l(!0),r(J,null,O(a(d),(t,y)=>(l(),r("div",{key:y,class:"item",onClick:H=>Q(t)},v(t),9,Ye))),128))])):c("v-if",!0),a(d).length?c("v-if",!0):(l(),R(ie,{key:1,image:a(F).href,description:a(k)("noData")},null,8,["image","description"]))])):c("v-if",!0),g.value.length>0?(l(),r("div",Fe,[S(ce,{"loading-text":e.$t("\u52A0\u8F7D\u4E2D"),"loosing-text":e.$t("\u91CA\u653E\u4EE5\u5237\u65B0"),"pulling-text":e.$t("\u4E0B\u62C9\u4EE5\u5237\u65B0"),modelValue:h.value,"onUpdate:modelValue":s[4]||(s[4]=t=>h.value=t),onRefresh:W},{default:f(()=>[S(re,{ref_key:"checkEl",ref:U,loading:h.value,"onUpdate:loading":s[3]||(s[3]=t=>h.value=t),finished:N.value,"finished-text":e.$t("\u6CA1\u6709\u66F4\u591A\u4E86"),onLoad:B},{default:f(()=>[(l(!0),r(J,null,O(g.value,(t,y)=>(l(),r("div",{class:"item pl-3 pr-3 pb-3 pt-3 flex",onClick:H=>le(t),key:y},[o("div",qe,[o("div",$e,[o("img",{class:"product-img",src:t.imgUrl1},null,8,Qe),c('                <div class="delete-wrap" @click.stop="deleteGood(item)">\u5220\u9664</div>')]),o("div",Xe,[o("div",We,v(t.name),1),o("div",Ze,[t.categoryName?(l(),r("span",es,v(t.categoryName),1)):c("v-if",!0),c(" <span>{{t('product.4')}}: {{ item.unit || '-' }}</span> "),p.value/1===1?(l(),r("span",ss,v(a(k)("sales"))+": "+v(t.soldNum),1)):c("v-if",!0)]),o("div",ts,"$"+v(p.value/1===1?a(j)(t.sellingPrice):a(j)(t.systemPrice)),1)])]),o("div",os,[o("div",{class:"more",onClick:we(H=>te(t),["stop"])},[...ns],8,as),p.value/1===1?(l(),R(i,{key:0,name:"arrow",size:"20px",style:{top:"50%",right:"0",position:"absolute","margin-top":"-10px"}})):c("v-if",!0)])],8,Ke))),128))]),_:1},8,["loading","finished","finished-text"])]),_:1},8,["loading-text","loosing-text","pulling-text","modelValue"])])):c("v-if",!0),S(Ge,{isEdit:a(b),onUpdate:oe,productArry:a(G),onClose:ae},null,8,["isEdit","productArry"])],2)}}},Us=ue(is,[["__scopeId","data-v-77847b5f"],["__file","/mnt/e/\u7F16\u8BD1\u540E/\u524D\u7AEF/H5-\u5546\u5BB6/src/views/search/index.vue"]]);export{Us as default};

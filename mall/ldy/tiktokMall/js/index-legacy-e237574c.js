System.register(["./index-legacy-5ae7697d.js","./index-legacy-571547e6.js","./index-legacy-dfec701c.js"],(function(e,o){"use strict";var a,t,i,n,s,r,l,c,m,v,g,d,u,h,p,f,b,w,x,y,z,k,C,I,X,_,P,Y,Z,H,S,W,R,$,T,j,D,N,B=document.createElement("style");return B.textContent=":root{--van-image-placeholder-text-color: var(--van-text-color-2);--van-image-placeholder-font-size: var(--van-font-size-md);--van-image-placeholder-background-color: var(--van-background-color);--van-image-loading-icon-size: 32px;--van-image-loading-icon-color: var(--van-gray-4);--van-image-error-icon-size: 32px;--van-image-error-icon-color: var(--van-gray-4) }.van-image{position:relative;display:inline-block}.van-image--round{overflow:hidden;border-radius:var(--van-border-radius-max)}.van-image--round .van-image__img{border-radius:inherit}.van-image--block{display:block}.van-image__img,.van-image__error,.van-image__loading{display:block;width:100%;height:100%}.van-image__error,.van-image__loading{position:absolute;top:0;left:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;color:var(--van-image-placeholder-text-color);font-size:var(--van-image-placeholder-font-size);background:var(--van-image-placeholder-background-color)}.van-image__loading-icon{color:var(--van-image-loading-icon-color);font-size:var(--van-image-loading-icon-size)}.van-image__error-icon{color:var(--van-image-error-icon-color);font-size:var(--van-image-error-icon-size)}\n",document.head.appendChild(B),{setters:[e=>{a=e.P,t=e.d,i=e.bp,n=e.U,s=e.l,r=e.aG,l=e.r,c=e.H,m=e.f,v=e.ab,g=e.b,d=e.X,u=e.b1,h=e.Y,p=e.ae,f=e.m,b=e.aX,w=e.aY,x=e.p,y=e.ai,z=e.aP,k=e.aQ,C=e.a2,I=e.bf,X=e.aa,_=e.a3,P=e.S,Y=e.bg,Z=e.I,H=e.aR,S=e.aU,W=e.Q,R=e.Z,$=e.aV,T=e.aW},e=>{j=e.S,D=e.a},e=>{N=e.I}],execute:function(){const o=e=>Math.sqrt((e[0].clientX-e[1].clientX)**2+(e[0].clientY-e[1].clientY)**2),B=a("image-preview")[1];var O=t({props:{src:String,show:Boolean,active:Number,minZoom:i(n),maxZoom:i(n),rootWidth:i(Number),rootHeight:i(Number)},emits:["scale","close"],setup(e,{emit:a}){const t=s({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,imageRatio:0,displayWidth:0,displayHeight:0}),i=r(),n=l(),p=c((()=>{const{rootWidth:o,rootHeight:a}=e,i=a/o;return t.imageRatio>i})),f=c((()=>{const{scale:e,moveX:o,moveY:a,moving:i,zooming:n}=t,s={transitionDuration:n||i?"0s":".3s"};if(1!==e){const t=o/e,i=a/e;s.transform=`scale(${e}, ${e}) translate(${t}px, ${i}px)`}return s})),b=c((()=>{if(t.imageRatio){const{rootWidth:o,rootHeight:a}=e,i=p.value?a/t.imageRatio:o;return Math.max(0,(t.scale*i-o)/2)}return 0})),w=c((()=>{if(t.imageRatio){const{rootWidth:o,rootHeight:a}=e,i=p.value?a:o*t.imageRatio;return Math.max(0,(t.scale*i-a)/2)}return 0})),x=o=>{(o=u(o,+e.minZoom,+e.maxZoom+1))!==t.scale&&(t.scale=o,a("scale",{scale:o,index:e.active}))},y=()=>{x(1),t.moveX=0,t.moveY=0};let z,k,C,I,X,_,P;const Y=e=>{const{touches:a}=e,{offsetX:n}=i;i.start(e),z=a.length,k=t.moveX,C=t.moveY,P=Date.now(),t.moving=1===z&&1!==t.scale,t.zooming=2===z&&!n.value,t.zooming&&(I=t.scale,X=o(e.touches))},Z=()=>{if(z>1)return;const{offsetX:e,offsetY:o}=i,n=Date.now()-P;e.value<5&&o.value<5&&n<250&&(_?(clearTimeout(_),_=null,(()=>{const e=t.scale>1?1:2;x(e),t.moveX=0,t.moveY=0})()):_=setTimeout((()=>{a("close"),_=null}),250))},H=o=>{let a=!1;(t.moving||t.zooming)&&(a=!0,t.moving&&k===t.moveX&&C===t.moveY&&(a=!1),o.touches.length||(t.zooming&&(t.moveX=u(t.moveX,-b.value,b.value),t.moveY=u(t.moveY,-w.value,w.value),t.zooming=!1),t.moving=!1,k=0,C=0,I=1,t.scale<1&&y(),t.scale>e.maxZoom&&(t.scale=+e.maxZoom))),d(o,a),Z(),i.reset()},S=e=>{const{naturalWidth:o,naturalHeight:a}=e.target;t.imageRatio=a/o};return m((()=>e.active),y),m((()=>e.show),(e=>{e||y()})),v.useEventListener("touchmove",(e=>{const{touches:a}=e;if(i.move(e),(t.moving||t.zooming)&&d(e,!0),t.moving){const{deltaX:e,deltaY:o}=i,a=e.value+k,n=o.value+C;t.moveX=u(a,-b.value,b.value),t.moveY=u(n,-w.value,w.value)}if(t.zooming&&2===a.length){const e=o(a);x(I*e/X)}}),{target:c((()=>{var e;return null==(e=n.value)?void 0:e.$el}))}),()=>{const o={loading:()=>g(h,{type:"spinner"},null)};return g(j,{ref:n,class:B("swipe-item"),onTouchstartPassive:Y,onTouchend:H,onTouchcancel:H},{default:()=>[g(N,{src:e.src,fit:"contain",class:B("image",{vertical:p.value}),style:f.value,onLoad:S},o)]})}}});const[U,M]=a("image-preview"),A=["show","transition","overlayStyle","closeOnPopstate"],E={show:Boolean,loop:C,images:I(),minZoom:X(1/3),maxZoom:X(3),overlay:C,closeable:Boolean,showIndex:C,className:_,closeIcon:P("clear"),transition:String,beforeClose:Function,overlayClass:_,overlayStyle:Object,swipeDuration:X(300),startPosition:X(0),showIndicators:Boolean,closeOnPopstate:C,closeIconPosition:P("top-right")};var L=t({name:U,props:E,emits:["scale","close","closed","change","update:show"],setup(e,{emit:o,slots:a}){const t=l(),i=s({active:0,rootWidth:0,rootHeight:0}),n=()=>{if(t.value){const e=v.useRect(t.value.$el);i.rootWidth=e.width,i.rootHeight=e.height,t.value.resize()}},r=e=>o("scale",e),c=e=>o("update:show",e),d=()=>{H(e.beforeClose,{args:[i.active],done:()=>c(!1)})},u=e=>{e!==i.active&&(i.active=e,o("change",e))},h=()=>{if(e.showIndex)return g("div",{class:M("index")},[a.index?a.index({index:i.active}):`${i.active+1} / ${e.images.length}`])},C=()=>{if(a.cover)return g("div",{class:M("cover")},[a.cover()])},I=()=>{if(e.closeable)return g(Z,{role:"button",name:e.closeIcon,class:[M("close-icon",e.closeIconPosition),Y],onClick:d},null)},X=()=>o("closed"),_=(e,o)=>{var a;return null==(a=t.value)?void 0:a.swipeTo(e,o)};return p({swipeTo:_}),f(n),m([b,w],n),m((()=>e.startPosition),(e=>u(+e))),m((()=>e.show),(a=>{const{images:t,startPosition:s}=e;a?(u(+s),x((()=>{n(),_(+s,{immediate:!0})}))):o("close",{index:i.active,url:t[i.active]})})),()=>g(k,y({class:[M(),e.className],overlayClass:[M("overlay"),e.overlayClass],onClosed:X,"onUpdate:show":c},z(e,A)),{default:()=>[I(),g(D,{ref:t,lazyRender:!0,loop:e.loop,class:M("swipe"),duration:e.swipeDuration,initialSwipe:e.startPosition,showIndicators:e.showIndicators,indicatorColor:"white",onChange:u},{default:()=>[e.images.map((o=>g(O,{src:o,show:e.show,active:i.active,maxZoom:e.maxZoom,minZoom:e.minZoom,rootWidth:i.rootWidth,rootHeight:i.rootHeight,onScale:r,onClose:d},null)))]}),h(),C()]})}});let Q;const q={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeIconPosition:"top-right"},F=e("I",((e,o=0)=>{if(S)return Q||({instance:Q}=$({setup(){const{state:e,toggle:o}=T(),a=()=>{e.images=[]};return()=>g(L,y(e,{onClosed:a,"onUpdate:show":o}),null)}})),e=Array.isArray(e)?{images:e,startPosition:o}:e,Q.open(W({},q,e)),Q}));F.Component=R(L),F.install=e=>{e.use(F.Component)}}}}));

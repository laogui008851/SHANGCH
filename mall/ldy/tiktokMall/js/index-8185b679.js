import{_ as ee,d as se,a0 as te,v as oe,$ as ae,k as ne,r as o,H as le,ay as ie,m as de,I as re,u as n,c as d,a as s,b as r,w as _,b3 as B,t as a,e as S,n as D,T as ce,o as c,az as ue,aw as f,F as me,s as pe,q as m,K as _e,C as ve,D as fe}from"./index-754777e9.js";/* empty css              */import{C as he}from"./index-450e98dc.js";import"./index-3cc9e254.js";import{F as ge}from"./index-b450e8d5.js";import{P as ye}from"./index-9e13e533.js";import{L as ke}from"./index-eae9591f.js";import{S as xe}from"./index-6a96a1dc.js";import{_ as Pe}from"./search-icon-8ae5f679.js";import{_ as Ie}from"./more-f6d49895.js";import{s as be,c as Se,m as Ce}from"./product.api-954632e9.js";import{B as we}from"./index-7c758373.js";import"./use-id-f491a022.js";import"./index-67619815.js";import"./___vite-browser-external_commonjs-proxy-a1e65de0.js";const P=h=>(ve("data-v-690b902b"),h=h(),fe(),h),Ne={key:0,class:"product"},$e=P(()=>s("img",{class:"search-icon",src:Pe},null,-1)),Le={class:"flex ml-4 mr-4 product-header"},Ve={key:0,class:"moeny icon"},Me=["src"],Ge={key:1,class:"moeny"},Re={class:"title"},Be={class:"moeny"},De={class:"title"},Ee={class:"hot-title ml-4 mr-4 mt-4 mb-4"},Fe=["onClick"],Ue={class:"flex-1 flex left"},ze={class:"product-img-wrap w-20 h-20"},qe=["src"],Ae={key:0,class:"take_off"},Oe={class:"product-info flex-1"},Te={class:"name-content"},je=["onClick"],He=P(()=>s("img",{class:"more-icon",src:Ie},null,-1)),Je=[He],Ke={class:"Specification"},Qe={style:{"margin-left":"20px"}},We={class:"money-content"},Xe={key:0,class:"dis"},Ye=P(()=>s("div",{class:"safe-area-inset-bottom"},null,-1)),Ze={key:1},es=P(()=>s("div",{class:"tip pt-5 pb-2 pl-4 pr-4"},"\u6388\u6743\u5BC6\u7801",-1)),ss={class:"btn"},ts=se({name:"ProductIndex"}),os=Object.assign(ts,{setup(h){const E=te();oe.exports.useI18n(),ae();const v=ne();let g=o("");o(!1);let y=o(1),C=o(0),w=o(0),I=o(0),F=o({}),N=o(1),p=o("");const u=o([]),b=o(!1),k=o(!1),$=o(!1),U="tiktokMall",z=le(()=>["int"].includes(U)),q=()=>{console.log(p.value),Se({password:p.value}).then(()=>{N.value=1,ce("\u64CD\u4F5C\u6210\u529F")})},L=o(!0);ie(()=>{if(!L.value){sessionStorage.getItem("productReload")&&(sessionStorage.removeItem("productReload"),x(!0));const e=sessionStorage.getItem("currentProductId");if(e){const l=u.value.findIndex(i=>i.id===e);sessionStorage.getItem("productDelete")?(u.value.splice(l,1),I.value-=1,sessionStorage.removeItem("productDelete")):x(!0),sessionStorage.removeItem("currentProductId")}}});const x=e=>{e&&(y.value=1);let l={pageNum:y.value,pageSize:20};Ce(l).then(i=>{L.value=!1,k.value&&(k.value=!1),C.value=i.evaluations,w.value=i.systemGoodsNum,I.value=i.sellerGoodsNum,e?u.value=i.pageList||[]:u.value=y.value===1?i.pageList:[...u.value,...i.pageList],$.value=u.value.length>=i.sellerGoodsNum,y.value++,b.value=!1})},V=()=>{x(!0)},A=()=>{v.push("/search?id=1")},O=()=>{v.push("/productPage/list")},T=()=>{v.push("/productPage/comment")},j=e=>{v.push({path:"/productPage/details",query:{item:JSON.stringify(e)}})},M=o(""),G=o("");be().then(e=>{M.value=e.sysParaMin,G.value=e.sysParaMax});const H=e=>{e.sysParaMin=M.value,e.sysParaMax=G.value,v.push({path:"/productPage/productEdit",query:{item:JSON.stringify(e)}}),F.value=e};return de(()=>{document.addEventListener("langChange",()=>{V()})}),(e,l)=>{const i=xe,R=re,J=ke,K=ye,Q=ge,W=he,X=we;return n(N)?(c(),d("div",Ne,[s("div",{onClick:A},[r(i,{class:"search-wrap",disabled:"",modelValue:n(g),"onUpdate:modelValue":l[0]||(l[0]=t=>B(g)?g.value=t:g=t),placeholder:e.$t("\u8BF7\u8F93\u5165\u641C\u7D22\u5546\u54C1\u540D\u79F0"),clearable:""},{"left-icon":_(t=>[$e]),_:1},8,["modelValue","placeholder"])]),s("div",Le,[s("div",{class:"flex-1 text-center after",onClick:O},[z.value?(c(),d("div",Ve,[s("img",{src:n(ue)("image/order/diamond.svg"),alt:""},null,8,Me)])):(c(),d("div",Ge,a(n(f)(n(w),0)),1)),s("div",Re,[S(a(e.$t("\u5546\u54C1\u5E93")),1),r(R,{name:"arrow"})])]),s("div",{class:"flex-1 text-center",onClick:T},[s("div",Be,a(n(C)),1),s("div",De,[S(a(e.$t("\u8BC4\u8BBA")),1),r(R,{name:"arrow"})])])]),s("div",Ee,a(e.$t("\u5E97\u94FA\u4EA7\u54C1"))+"("+a(n(f)(n(I),0))+") ",1),s("div",{class:D(["list ml-4 mr-4 mt-4 mb-4 list-content",{"is-ar":n(E)}])},[r(K,{modelValue:k.value,"onUpdate:modelValue":l[2]||(l[2]=t=>k.value=t),onRefresh:V,"loading-text":e.$t("\u52A0\u8F7D\u4E2D"),"loosing-text":e.$t("\u91CA\u653E\u4EE5\u5237\u65B0"),"pulling-text":e.$t("\u4E0B\u62C9\u4EE5\u5237\u65B0")},{default:_(()=>[r(J,{ref:"vanList",loading:b.value,"onUpdate:loading":l[1]||(l[1]=t=>b.value=t),"loading-text":e.$t("\u52A0\u8F7D\u4E2D"),finished:$.value,"finished-text":e.$t("noMore"),onLoad:x},{default:_(()=>[(c(!0),d(me,null,pe(u.value,(t,Y)=>(c(),d("div",{class:D(["item pl-3 pr-3 pb-3 pt-3 flex",{"goods-removed":t.isShelf/1===0}]),onClick:Z=>j(t),key:Y},[s("div",Ue,[s("div",ze,[s("img",{class:"product-img",src:t.imgUrl1},null,8,qe),t.isShelf/1===0?(c(),d("div",Ae,a(e.$t("\u5DF2\u4E0B\u67B6")),1)):m("v-if",!0),m('                <div class="delete-wrap" @click.stop="deleteGood(item)">'),m("                  {{ $t('\u5220\u9664') }}"),m("                </div>")]),s("div",Oe,[s("div",Te,[s("p",null,a(t.name),1),s("div",{class:"more",onClick:_e(Z=>H(t),["stop"])},[...Je],8,je)]),m(' <div class="name">{{ item.name }}</div> '),s("div",Ke,[s("span",null,a(t.categoryName),1),s("span",Qe,a(e.$t("\u9500\u91CF"))+": "+a(n(f)(t.soldNum,0)),1)]),s("div",We,[s("p",null,"$"+a(n(f)(t.sellingPrice)),1),t.discountPrice?(c(),d("p",Xe,a(e.$t("\u6298\u6263\u4EF7"))+" $"+a(n(f)(t.discountPrice)),1)):m("v-if",!0)])])]),m(` <div>
              <img
                class="more-icon"
                @click.stop="openEdit(item)"
                src="@/assets/imgs/product/more.png"
              />
            </div> `)],10,Fe))),128))]),_:1},8,["loading","loading-text","finished","finished-text"])]),_:1},8,["modelValue","loading-text","loosing-text","pulling-text"]),Ye],2)])):(c(),d("div",Ze,[es,r(W,{class:"input-field",inset:""},{default:_(()=>[r(Q,{modelValue:n(p),"onUpdate:modelValue":l[3]||(l[3]=t=>B(p)?p.value=t:p=t),type:"text",placeholder:"\u8BF7\u8F93\u5165\u6388\u6743\u5BC6\u7801"},{button:_(()=>[]),_:1},8,["modelValue"])]),_:1}),s("div",ss,[r(X,{type:"primary",size:"large",onClick:q},{default:_(()=>[S(" \u8BA4\u8BC1 ")]),_:1})])]))}}}),ys=ee(os,[["__scopeId","data-v-690b902b"],["__file","/mnt/e/\u7F16\u8BD1\u540E/\u524D\u7AEF/H5-\u5546\u5BB6/src/views/product/index.vue"]]);export{ys as default};

import{_ as N,d as V,v as C,a0 as O,r as g,p as E,c as n,b as k,w as L,ba as P,o as a,e as R,t as d,u as s,F as A,s as j,a as p,n as D,q as T,J as $,C as B,D as F,cF as J,cG as U,am as q,cH as G}from"./index-754777e9.js";import{P as K}from"./index-9e13e533.js";import{L as Q}from"./index-eae9591f.js";import{E as W}from"./index-326b8d79.js";import{m as r}from"./config-7ce0b469.js";import"./use-id-f491a022.js";const X=h=>(B("data-v-8d741b7f"),h=h(),F(),h),Y={class:"page-main-content"},Z=X(()=>p("div",{style:{height:"46px"}},null,-1)),ee={key:0,class:"list-content"},se=["onClick"],te={class:"title-content"},ae={class:"title"},ne={key:0,class:"txt"},oe=["innerHTML"],le=["innerHTML"],ie=["innerHTML"],re=["innerHTML"],ce=["innerHTML"],ue={key:0},de={key:1,class:"txt"},pe=V({name:"MessageSystem"}),_e=Object.assign(pe,{setup(h){const{t:l}=C.exports.useI18n(),w=O(),H=new URL("/www/png/name-20d65991.png",self.location),v=g([]),y=g(!1),_=g(!0),x=g(!1),f=g({pageSize:20,pageNum:1}),S=()=>{const t={...f.value,totalElements:-1,type:3,status:0,module:1};J(t).then(i=>{const u=i.elements||[];u.forEach(o=>{const c={};(o.varInfo?JSON.parse(o.varInfo):[]).forEach(e=>{c[e.code]=["complaintReason"].includes(e.code)?l(e.value):e.value}),o.timeStr=U(o.sendTime,!0),o.varObj=c}),v.value=f.value.pageNum===1?u:[...v.value,...u],_.value=!1,y.value=!1,x.value=i.totalPage===f.value.pageNum||!i.totalPage,f.value.pageNum+=1}).catch(()=>{x.value=!0,_.value=!1,y.value=!1})},z=()=>{_.value=!0,f.value.pageNum=1,S()},M=t=>{q({path:"/message/details",query:{id:t.id}}),t.status!==2&&G({ids:t.id}).then(()=>{t.status=2})},m=(t,i)=>{const o=(t.varInfo?JSON.parse(t.varInfo):[]).find(c=>c.code===i);return o?o.value:"0"},b=(t,i)=>{const o=(t.varInfo?JSON.parse(t.varInfo):[]).find(c=>c.code===i);return o?o.value:""};return E(()=>{document.addEventListener("systemListRefresh",()=>{z()},!1)}),(t,i)=>{const u=P,o=W,c=Q,I=K;return a(),n("div",Y,[k(u,{fixed:!0},{title:L(()=>[R(d(t.$t("\u7CFB\u7EDF\u6D88\u606F")),1)]),_:1}),Z,k(I,{modelValue:y.value,"onUpdate:modelValue":i[1]||(i[1]=e=>y.value=e),"loading-text":t.$t("\u52A0\u8F7D\u4E2D"),"loosing-text":t.$t("\u91CA\u653E\u4EE5\u5237\u65B0"),"pulling-text":t.$t("\u4E0B\u62C9\u4EE5\u5237\u65B0"),onRefresh:z},{default:L(()=>[k(c,{loading:_.value,"onUpdate:loading":i[0]||(i[0]=e=>_.value=e),finished:x.value,"loading-text":s(l)("loading"),"finished-text":s(l)("product.3"),onLoad:S},{default:L(()=>[v.value.length?(a(),n("div",ee,[(a(!0),n(A,null,j(v.value,e=>(a(),n("div",{key:e.id,class:"item-list",onClick:ve=>M(e)},[p("div",te,[p("div",ae,[e.status===1?(a(),n("div",{key:0,class:D(["tips",{"is-ar":s(w)}])},null,2)):T("v-if",!0),p("p",null,d(s(l)(s(r)[e.bizType].title)),1)]),p("p",null,d(e.timeStr),1)]),s(r)[e.bizType].key?(a(),n("p",ne,[s(r)[e.bizType].key==="creditScore"?(a(),n("span",{key:0,innerHTML:s(l)("systemMsgScore",{creditScore:m(e,s(r)[e.bizType].key)})},null,8,oe)):e.bizType==="inbox_recharge_success"?(a(),n("span",{key:1,innerHTML:s(l)("rechargeSuccessTips",{orderAmount:m(e,"orderAmount")})},null,8,le)):e.bizType==="inbox_withdraw_success"?(a(),n("span",{key:2,innerHTML:s(l)("withdrawalSuccessTips",{orderAmount:m(e,"orderAmount")})},null,8,ie)):e.bizType==="inbox_store_audit_fail"?(a(),n("span",{key:3,innerHTML:s(l)("storeAuthenticationFailedTips",{shop_name:b(e,"shop_name"),reason:b(e,"reason")})},null,8,re)):e.bizType==="inbox_store_audit_success"?(a(),n("span",{key:4,innerHTML:s(l)("storeAuthenticationPassedTips",{shop_name:b(e,"shop_name")})},null,8,ce)):(a(),n(A,{key:5},[p("span",null,d(s(l)(s(r)[e.bizType].txt)),1),p("span",null,d(m(e,s(r)[e.bizType].key)),1),s(r)[e.bizType].txt1?(a(),n("span",ue,d(s(l)(s(r)[e.bizType].txt1)),1)):T("v-if",!0)],64))])):(a(),n("p",de,d(s(l)(s(r)[e.bizType].txt,e.varObj)),1))],8,se))),128))])):T("v-if",!0),!v.value.length&&!_.value?(a(),$(o,{key:1,image:s(H).href},null,8,["image"])):T("v-if",!0)]),_:1},8,["loading","finished","loading-text","finished-text"])]),_:1},8,["modelValue","loading-text","loosing-text","pulling-text"])])}}}),xe=N(_e,[["__scopeId","data-v-8d741b7f"],["__file","/mnt/e/\u7F16\u8BD1\u540E/\u524D\u7AEF/H5-\u5546\u5BB6/src/views/message/system/index.vue"]]);export{xe as default};

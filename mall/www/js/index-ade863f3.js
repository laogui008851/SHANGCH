import{d as Me,_ as ge,u as xe,r as u,k as A,o as m,c as S,a as t,f as V,t as s,b as l,e as i,M as he,c6 as we,F as ye,p as ke,w as p,n as re,T as h,P as je,Q as ze,I as Ge,h as Ze,j as He,g as Ke,m as Oe,S as Qe,bq as Je,q as k,s as C,al as Xe,b1 as Ye,aG as le}from"./index-9fb53779.js";import{A as el}from"./index-6059f935.js";import{P as ll,N as al}from"./index-f5f2a1d9.js";import{B as Ve}from"./index-05040b60.js";import{C as ol}from"./index-860133aa.js";import{P as tl}from"./index-24686930.js";import"./index-661a407d.js";import{F as Ce}from"./index-c39de9e5.js";import{E as nl,i as ie}from"./index-f0f8bfe5.js";import{b as sl,e as ul,a as dl,c as il,d as rl}from"./exchange.api-bec82bc6.js";import{_ as cl}from"./index-1508c6b9.js";import{F as vl}from"./index-d7106a5b.js";import{D as ml}from"./function-call-b4ee503a.js";import"./countryList-016fc82e.js";import"./use-id-1cc1e85b.js";const pl=$=>(je("data-v-94360798"),$=$(),ze(),$),fl={class:"form-content"},bl={class:"title-content"},_l={class:"content"},hl={class:"item"},wl={class:"select-item"},yl=["value"],kl={class:"item"},gl={class:"select-item"},xl=["value"],Vl={class:"item"},Cl={class:"item tips"},Al=pl(()=>t("div",{class:"bg"},null,-1)),Tl=Me({name:"AddressBindDialog"}),Ul=Object.assign(Tl,{props:{modelValue:{type:Boolean,default:!1},chainData:{type:Array,default:()=>[]}},emits:["update:modelValue","bind-done"],setup($,{emit:x}){const W=$,{t:a}=xe(),I=()=>{x("update:modelValue",!1)},T=u("USDT"),U=A(()=>{if(W.chainData.length){const c=[...new Set(W.chainData.map(d=>d.coin).reverse())];if(c.length)return T.value=c[0],c.map(d=>({label:d,value:d}))}return[{label:"USDT",value:"USDT"}]}),w=u("TRC20"),D=A(()=>{if(W.chainData.length){const c=W.chainData.filter(d=>d.coin===T.value);if(c.length)return w.value=c[0].blockchain_name,c.map(d=>({label:d.blockchain_name,value:d.blockchain_name}))}return[{label:"TRC20",value:"TRC20"},{label:"ERC20",value:"ERC20"}]}),g=u(""),R=c=>/^[0-9A-Za-z]+$/.test(c),N=u(!1),Z=()=>{if(!/^[0-9A-Za-z]+$/.test(g.value)){h(a("\u63D0\u73B0\u5730\u5740\u53EA\u80FD\u5305\u542B\u6570\u5B57\u548C\u5B57\u6BCD"));return}N.value=!0;const d={coin:T.value,blockchain_name:w.value,channel_address:g.value};sl(d).then(()=>{x("bind-done",d)}).finally(()=>{N.value=!1})};return(c,d)=>{const P=Ge,H=Ce,E=Ve;return m(),S("div",{class:re([{active:$.modelValue},"dialog-content"])},[t("div",fl,[t("div",bl,[V(s(l(a)("\u63D0\u6B3E\u5730\u5740\u7ED1\u5B9A"))+" ",1),i(P,{name:"cross",class:"close",onClick:I})]),t("div",_l,[t("div",hl,[t("p",null,s(l(a)("\u53D6\u6B3E\u65B9\u5F0F")),1),t("div",wl,[V(s(T.value)+" ",1),he(t("select",{"onUpdate:modelValue":d[0]||(d[0]=y=>T.value=y)},[(m(!0),S(ye,null,ke(l(U),(y,L)=>(m(),S("option",{key:L,value:y.value},s(y.label),9,yl))),128))],512),[[we,T.value]])])]),t("div",kl,[t("p",null,s(l(a)("\u94FE\u63A5\u534F\u8BAE")),1),t("div",gl,[V(s(w.value)+" ",1),he(t("select",{"onUpdate:modelValue":d[1]||(d[1]=y=>w.value=y)},[(m(!0),S(ye,null,ke(l(D),(y,L)=>(m(),S("option",{key:L,value:y.value},s(y.label),9,xl))),128))],512),[[we,w.value]])])]),t("div",Vl,[t("p",null,s(l(a)("\u6536\u6B3E\u94B1\u5305\u5730\u5740")),1),i(H,{clearable:"",modelValue:g.value,"onUpdate:modelValue":d[2]||(d[2]=y=>g.value=y),rules:[{validator:R,message:l(a)("\u63D0\u73B0\u5730\u5740\u53EA\u80FD\u5305\u542B\u6570\u5B57\u548C\u5B57\u6BCD"),trigger:"onChange"}],class:"input-item"},null,8,["modelValue","rules"])]),t("div",Cl,s(l(a)("\u4EC5\u80FD\u7ED1\u5B9A\u4E00\u4E2A\u6536\u6B3E\u5730\u5740\uFF01")),1)]),i(E,{class:"w-full btn-content",type:"primary",loading:N.value,onClick:Z},{default:p(()=>[V(s(l(a)("\u786E\u8BA4\u7ED1\u5B9A")),1)]),_:1},8,["loading"])]),Al],2)}}}),Bl=ge(Ul,[["__scopeId","data-v-94360798"],["__file","/Users/wangjun/Downloads/mall-app-h5/src/views/withdraw/components/AddressBindDialog.vue"]]);const Sl={class:"icon-type-content"},Dl={class:"mb-2.5 text-xs required-txt",style:{color:"#333"}},Nl={key:0,class:"icon-type-content"},$l={class:"mb-2.5 text-xs required-txt",style:{color:"#333"}},Wl={class:"mb-2.5 text-xs required-txt",style:{color:"#333"}},Il={class:"mb-5 border border-solid rounded",style:{"border-color":"#eeeeee"}},Fl={class:"mb-2.5 text-xs required-txt",style:{color:"#333"}},ql={class:"mb-5 nationality-select"},Rl={class:"mb-2.5 text-xs required-txt",style:{color:"#333"}},Pl={class:"mb-5 border border-solid rounded",style:{"border-color":"#eeeeee"}},El={class:"mb-2.5 text-xs required-txt",style:{color:"#333"}},Ll={class:"mb-5 border border-solid rounded",style:{"border-color":"#eeeeee"}},Ml={class:"mb-2.5 text-xs required-txt",style:{color:"#333"}},jl={class:"mb-5 border border-solid rounded",style:{"border-color":"#eeeeee"}},zl={class:"mb-2.5 text-xs",style:{color:"#333"}},Gl={class:"mb-5 border border-solid rounded",style:{"border-color":"#eeeeee"}},Zl={class:"mb-2.5 text-xs",style:{color:"#333"}},Hl={class:"mb-5 border border-solid rounded",style:{"border-color":"#eeeeee"}},Kl={class:"mb-2.5 text-xs",style:{color:"#333"}},Ol={class:"mb-5 border border-solid rounded",style:{"border-color":"#eeeeee"}},Ql={class:"mb-2.5 text-xs",style:{color:"#333"}},Jl={class:"mb-5 border border-solid rounded",style:{"border-color":"#eeeeee"}},Xl={key:11,class:"current-balance"},Yl={key:12,class:"current-balance"},ea={class:"tips"},la={style:{height:"22rem"}},aa={__name:"index",setup($){const x=Ze(),W=He(),{t:a}=xe(),I="tiktokMall",T=Ke(),U=u(""),w=u(""),D=u(""),g=u(""),R=u("0.00"),N=u(!1),Z=u(!1),c=o=>[null,void 0,""].includes(o),d=A(()=>["argos"].includes(I)),P=A(()=>["shop2u"].includes(I)),H=u(""),E=u(""),y=o=>{E.value=o.countryName},L=o=>/^[0-9A-Za-z]+$/.test(o),ae=()=>{ul({channel:v.value==="icon"?f.value:"bank"}).then(o=>{const{withdraw_fee:e}=o;R.value=(e*100).toFixed(2)})},F=u([]),Ae=async()=>{await dl().then(o=>{if(o.length){const e=[...new Set(o.map(r=>r.coin).reverse())];f.value=e[0]}else f.value="USDT";F.value=o||[]}).catch(()=>{h.clear()})},K=u(""),ce=A(()=>{var e,r;let o=[];return K.value?o=[{label:K.value,value:K.value}]:o=F.value.filter(_=>_.coin===f.value).map(_=>({..._,label:_.blockchain_name,value:_.blockchain_name})),o.length&&(U.value=(r=(e=o[0])==null?void 0:e.value)!=null?r:""),o!=null?o:[]}),O=u(!1),Q=u(!1),M=u(!1),ve=u(""),oe=async()=>{var o;await il({session_token:(o=x==null?void 0:x.userInfo)==null?void 0:o.token}).then(e=>{O.value=Boolean(e.openWithdrawAddressBinding),Q.value=Boolean(e.openWithdrawAddressBinding)&&(!e.chainName||!e.existWithdrawAddress),M.value=Boolean(e.openWithdrawAddressBinding)&&(!e.chainName||!e.existWithdrawAddress),ve.value=e.session_token,Boolean(e.openWithdrawAddressBinding)&&(f.value=e.coinType,w.value=e.existWithdrawAddress,K.value=e.chainName)})},f=u(""),j=u(!1),Te=A(()=>{if(F.value.length){const o=[...new Set(F.value.map(e=>e.coin).reverse())];if(o.length)return o.map(e=>({text:e,value:e}))}return[{text:"USDT",value:"USDT"}]}),Ue=()=>{O.value||(j.value=!0)},Be=({value:o})=>{f.value=o,j.value=!1,ae()};Oe(async()=>{h.loading({duration:0,message:a("loading"),forbidClick:!0}),await Ae(),await oe(),await ae(),h.clear()});const Se=A(()=>{const o=g.value,e=R.value,r=ie.divide(ie.minus(100,e),100),b=ie.times(o,r),_=String(b);return _.includes(".")?_.split(".")[1].length===1?_+"0":_:_+".00"}),te=u(2),q=A(()=>x.userInfo.money),me=A(()=>{const o=q.value?Number(q.value):0,e=F.value.find(r=>r.coin===f.value&&r.blockchain_name===U.value);return e?(te.value=f.value==="BTC"||f.value==="ETH"?6:2,Number(o/Number(e.fee))):0}),De=()=>{if(!M.value){const o=Number(le(me.value,te.value).replace(/,/g,""));g.value=o}},pe=()=>{W.push({name:"WithdrawRecord"})},Ne=()=>{var o;if(v.value==="icon"){if(!/^[0-9A-Za-z]+$/.test(w.value)){h(a("\u63D0\u73B0\u5730\u5740\u53EA\u80FD\u5305\u542B\u6570\u5B57\u548C\u5B57\u6BCD"));return}if(c(U.value)){h(a("blockchainNetworkRequire"));return}if(c(w.value)){h(a("withdrawalAddressRequire"));return}}if(v.value==="bank"){if(P.value&&c(E.value)){h(a("selectNation"));return}if(c(J.value)){h(a("\u8BF7\u8F93\u5165\u5F00\u6237\u884C\u540D\u79F0"));return}if(c(X.value)){h(a("entryName"));return}if(c(Y.value)){h(a("\u8BF7\u8F93\u5165\u5361\u53F7"));return}}if(c(g.value)){h(a("withdrawalAmountRequire"));return}((o=x==null?void 0:x.userInfo)==null?void 0:o.safeword)===1?(N.value=!0,z.value=!0):ml.confirm({title:a("dialogTips"),message:a("shopSafeWord"),cancelButtonText:a("cancel"),confirmButtonText:a("gotoSet"),confirmButtonColor:"#1552F0",cancelButtonColor:"#999"}).then(()=>{Xe("/personalInfo")}).catch(()=>{console.log("cancel")})},$e=o=>{f.value=o.coin,U.value=o.blockchain_name,w.value=o.channel_address,M.value=!1,Q.value=!1},We=async()=>{const o=ce.value.find(b=>b.blockchain_name===U.value),e=o?o.coin:"USDT",r={safeword:D.value,amount:g.value,from:w.value,channel:e,session_token:ve.value};v.value==="bank"&&(r.channel="bank",r.bankName=J.value,r.bankUserName=X.value,r.bankCardNo=Y.value,d.value&&(r.swiftCode=ee.value||"",r.routingNum=ee.value||"",r.accountAddress=se.value||"",r.bankAddress=ue.value||""),P.value&&(r.countryName=E.value||"")),Z.value=!0,rl(r).then(async()=>{await x.getUserInfo(!0),h(a("withdrawalApplySuccess")),oe(),setTimeout(()=>{pe()},1500)}).finally(()=>{Z.value=!1,oe()})},z=u(!0);Qe(()=>D.value,o=>{o.length===6&&(h.loading({duration:0,forbidClick:!0}),We(),N.value=!1,D.value="")});const Ie=A(()=>!0),fe=["familyShop","sm"].includes(I)?"\u52A0\u5BC6\u8D27\u5E01":"\u865A\u62DF\u5E01",ne=u(a(fe)),v=u("icon"),be=u([{text:a(fe),value:"icon"}]);Ie.value&&be.value.push({text:a("\u94F6\u884C\u5361"),value:"bank"});const G=u(!1),J=u(""),X=u(""),Y=u(""),_e=u(""),ee=u(""),se=u(""),ue=u(""),Fe=o=>{o.value==="bank"&&["familyShop","sm"].includes(I)?W.push({path:"/customerService"}):(ne.value=o.text,v.value=o.value,G.value=!1,g.value="",ae())};return(o,e)=>{const r=Ye,b=Ce,_=tl,de=Je,B=vl,qe=ol,Re=Ve,Pe=ll,Ee=al,Le=el;return m(),S("div",null,[i(r,null,{title:p(()=>[t("div",null,s(l(a)("withdrawal")),1)]),right:p(()=>[t("div",{onClick:pe},s(l(a)("withdrawalRecord")),1)]),_:1}),t("div",{class:re(["withdraw",{"is-ar":l(T)}])},[t("div",Sl,[t("div",Dl,s(l(a)("\u53D6\u6B3E\u65B9\u5F0F")),1),i(b,{modelValue:ne.value,"onUpdate:modelValue":e[0]||(e[0]=n=>ne.value=n),readonly:"",name:"picker",onClick:e[1]||(e[1]=n=>G.value=!0)},null,8,["modelValue"]),i(de,{show:G.value,"onUpdate:show":e[3]||(e[3]=n=>G.value=n),position:"bottom"},{default:p(()=>[i(_,{columns:be.value,"cancel-button-text":l(a)("cancel"),"confirm-button-text":l(a)("confirm"),onConfirm:Fe,onCancel:e[2]||(e[2]=n=>G.value=!1)},null,8,["columns","cancel-button-text","confirm-button-text"])]),_:1},8,["show"])]),v.value==="icon"?(m(),S("div",Nl,[t("div",$l,s(l(a)("\u9009\u62E9\u5E01\u79CD")),1),i(b,{modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=n=>f.value=n),readonly:"",name:"picker",onClick:Ue},null,8,["modelValue"]),i(de,{show:j.value,"onUpdate:show":e[6]||(e[6]=n=>j.value=n),position:"bottom"},{default:p(()=>[i(_,{columns:l(Te),"cancel-button-text":l(a)("cancel"),"confirm-button-text":l(a)("confirm"),onConfirm:Be,onCancel:e[5]||(e[5]=n=>j.value=!1)},null,8,["columns","cancel-button-text","confirm-button-text"])]),_:1},8,["show"])])):k("v-if",!0),v.value==="icon"?(m(),C(nl,{key:1,list:l(ce),label:l(a)("blockchainNetwork"),disabled:O.value,modelValue:U.value,"onUpdate:modelValue":e[7]||(e[7]=n=>U.value=n)},null,8,["list","label","disabled","modelValue"])):k("v-if",!0),v.value==="icon"?(m(),C(B,{key:2},{default:p(()=>[t("div",Wl,s(l(a)("withdrawalAddress")),1),t("div",Il,[i(b,{clearable:"",modelValue:w.value,"onUpdate:modelValue":e[8]||(e[8]=n=>w.value=n),disabled:O.value,placeholder:l(a)("withdrawalAddressTips"),rules:[{validator:L,message:l(a)("\u63D0\u73B0\u5730\u5740\u53EA\u80FD\u5305\u542B\u6570\u5B57\u548C\u5B57\u6BCD"),trigger:"onChange"}]},null,8,["modelValue","disabled","placeholder","rules"])])]),_:1})):k("v-if",!0),v.value==="bank"&&l(P)?(m(),C(B,{key:3},{default:p(()=>[t("div",Fl,s(l(a)("\u56FD\u5BB6")),1),t("div",ql,[i(qe,{modelValue:H.value,"onUpdate:modelValue":e[9]||(e[9]=n=>H.value=n),"get-name":"true",onDone:y},null,8,["modelValue"])])]),_:1})):k("v-if",!0),v.value==="bank"?(m(),C(B,{key:4},{default:p(()=>[t("div",Rl,s(l(a)("\u5F00\u6237\u884C")),1),t("div",Pl,[i(b,{clearable:"",modelValue:J.value,"onUpdate:modelValue":e[10]||(e[10]=n=>J.value=n),placeholder:l(a)("\u8BF7\u8F93\u5165\u5F00\u6237\u884C\u540D\u79F0")},null,8,["modelValue","placeholder"])])]),_:1})):k("v-if",!0),v.value==="bank"?(m(),C(B,{key:5},{default:p(()=>[t("div",El,s(l(a)("\u59D3\u540D")),1),t("div",Ll,[i(b,{clearable:"",modelValue:X.value,"onUpdate:modelValue":e[11]||(e[11]=n=>X.value=n),placeholder:l(a)("entryName")},null,8,["modelValue","placeholder"])])]),_:1})):k("v-if",!0),v.value==="bank"?(m(),C(B,{key:6},{default:p(()=>[t("div",Ml,s(l(a)("\u5361\u53F7")),1),t("div",jl,[i(b,{clearable:"",modelValue:Y.value,"onUpdate:modelValue":e[12]||(e[12]=n=>Y.value=n),placeholder:l(a)("\u8BF7\u8F93\u5165\u5361\u53F7")},null,8,["modelValue","placeholder"])])]),_:1})):k("v-if",!0),v.value==="bank"&&l(d)?(m(),C(B,{key:7},{default:p(()=>[t("div",zl,s(l(a)("\u56FD\u9645\u4EE3\u7801")),1),t("div",Gl,[i(b,{clearable:"",modelValue:_e.value,"onUpdate:modelValue":e[13]||(e[13]=n=>_e.value=n),placeholder:l(a)("\u8BF7\u8F93\u5165\u56FD\u9645\u4EE3\u7801")},null,8,["modelValue","placeholder"])])]),_:1})):k("v-if",!0),v.value==="bank"&&l(d)?(m(),C(B,{key:8},{default:p(()=>[t("div",Zl,s(l(a)("\u8DEF\u7531\u53F7\u7801")),1),t("div",Hl,[i(b,{clearable:"",modelValue:ee.value,"onUpdate:modelValue":e[14]||(e[14]=n=>ee.value=n),placeholder:l(a)("\u8BF7\u8F93\u5165\u8DEF\u7531\u53F7\u7801")},null,8,["modelValue","placeholder"])])]),_:1})):k("v-if",!0),v.value==="bank"&&l(d)?(m(),C(B,{key:9},{default:p(()=>[t("div",Kl,s(l(a)("\u8D26\u6237\u5730\u5740")),1),t("div",Ol,[i(b,{clearable:"",modelValue:se.value,"onUpdate:modelValue":e[15]||(e[15]=n=>se.value=n),placeholder:l(a)("\u8BF7\u8F93\u5165\u8D26\u6237\u5730\u5740")},null,8,["modelValue","placeholder"])])]),_:1})):k("v-if",!0),v.value==="bank"&&l(d)?(m(),C(B,{key:10},{default:p(()=>[t("div",Ql,s(l(a)("\u94F6\u884C\u5730\u5740")),1),t("div",Jl,[i(b,{clearable:"",modelValue:ue.value,"onUpdate:modelValue":e[16]||(e[16]=n=>ue.value=n),placeholder:l(a)("\u8BF7\u8F93\u5165\u94F6\u884C\u5730\u5740")},null,8,["modelValue","placeholder"])])]),_:1})):k("v-if",!0),i(cl,{label:l(a)("withdrawalAmount"),placeholderText:l(a)("withdrawalAmountTips"),modelValue:g.value,"onUpdate:modelValue":e[17]||(e[17]=n=>g.value=n),maxLength:16,disabled:M.value,required:"",typeText:"number"},{rightBtn:p(()=>[t("div",{class:re(["withdraw-all",{"is-ar":l(T)}]),onClick:De,style:{"min-width":"40px"}},s(l(a)("total")),3)]),_:1},8,["label","placeholderText","modelValue","disabled"]),(l(q)||l(q)===0)&&f.value&&v.value==="icon"?(m(),S("div",Xl,[V(s(l(a)("\u5F53\u524D\u4F59\u989D"))+": ",1),t("span",null,s(l(le)(l(q))),1),V("USDT \u2248 "),t("span",null,s(l(le)(l(me),te.value)),1),V(s(f.value),1)])):k("v-if",!0),v.value!=="icon"?(m(),S("div",Yl,[V(s(l(a)("\u5F53\u524D\u4F59\u989D"))+": ",1),t("span",null,s(l(le)(l(q))),1),V("USD ")])):k("v-if",!0),t("div",ea,[t("span",null,[V(s(l(a)("realWithdrawalAccount"))+": "+s(l(Se)),1),t("span",null,s(v.value==="icon"?` ${f.value}`:" USD"),1)]),t("span",null,s(l(a)("withdrawalFee"))+": "+s(R.value)+"%",1)]),i(Re,{class:"w-full btn-content",type:"primary",disabled:M.value,onClick:Ne},{default:p(()=>[V(s(l(a)("submit")),1)]),_:1},8,["disabled"]),i(Le,{show:N.value,"onUpdate:show":e[21]||(e[21]=n=>N.value=n),title:l(a)("\u8BF7\u8F93\u5165\u4EA4\u6613\u5BC6\u7801")},{default:p(()=>[t("div",la,[i(Pe,{length:6,value:D.value,focused:z.value,onFocus:e[18]||(e[18]=n=>z.value=!0)},null,8,["value","focused"]),i(Ee,{modelValue:D.value,"onUpdate:modelValue":e[19]||(e[19]=n=>D.value=n),show:z.value,onBlur:e[20]||(e[20]=n=>z.value=!1)},null,8,["modelValue","show"])])]),_:1},8,["show","title"])],2),i(Bl,{modelValue:Q.value,"onUpdate:modelValue":e[22]||(e[22]=n=>Q.value=n),"chain-data":F.value,onBindDone:$e},null,8,["modelValue","chain-data"])])}}},ha=ge(aa,[["__scopeId","data-v-1a4fc61c"],["__file","/Users/wangjun/Downloads/mall-app-h5/src/views/withdraw/index.vue"]]);export{ha as default};

import{W as Q,X,d as Ce,_ as xe,u as Ie,i as wt,k as we,r as n,o as r,c as d,a as e,b as o,t as l,e as D,F as Ne,p as Te,n as C,I as Nt,av as p,h as st,g as at,l as Tt,S as Ct,q as T,f as W,y as xt,w as ee,T as w,G as It,s as re,O as $t,ai as St,R as zt,ac as Ee,aw as Pt,L as Lt,v as ue,cl as Ze,b6 as Dt,ao as At,aG as Vt,P as Mt,Q as Et}from"./index-6bb60bad.js";import{N as Ut}from"./index-e61c78d6.js";/* empty css              */import{u as jt}from"./index-4530caac.js";import{l as et}from"./config-f57d91a6.js";import{B as nt}from"./index-e1ff7605.js";import{I as Ue}from"./index-b1c368be.js";import{n as Ht}from"./login.api-0068afb6.js";import{S as Ot,a as Bt}from"./index-52375f0d.js";import"./index-92cd0e41.js";import"./index-a7667e82.js";import"./use-id-bee8f2c8.js";const Rt=u=>Q({url:"/wap/api/activity/lottery!detail.action",method:X.GET,params:u}),Gt=u=>Q({url:"/wap/api/activity/lottery!getPoints.action",method:X.GET,params:u}),Ft=u=>Q({url:"/wap/api/activity/lottery!draw.action",method:X.POST,params:u}),qt=u=>Q({url:"/wap/api/activity/lottery!countPrize.action",method:X.GET,params:u}),Wt=u=>Q({url:"/wap/api/activity/lottery!receivePrize.action",method:X.POST,params:u}),Qt=u=>Q({url:"/wap/api/activity/lottery!getCountPoints.action",method:X.POST,params:u}),Xt=u=>Q({url:"/wap/api/activity/lottery!pageListMyPrize.action",method:X.GET,params:u});const Jt={class:"language-container"},Kt={class:"nation"},Yt=["src"],Zt=["onClick"],eo=["src"],to=Ce({name:"LanguageChange"}),oo=Object.assign(to,{setup(u){const{locale:P}=Ie(),E=wt(),f=we(()=>{const h=P.value||"en";return et.find(v=>v.key===h)}),A=we(()=>P.value||"en"),S=n(!1),B=h=>{const L=h==="ar"?"rtl":"rtr";document.documentElement.setAttribute("dir",L),E.setIsArLang(h==="ar"),E.setNotCnLang(!["cn","tw"].includes(h)),P.value=h,localStorage.setItem("lang",h),document.dispatchEvent(new CustomEvent("langChange")),S.value=!1};return(h,L)=>{const v=Nt;return r(),d("div",Jt,[e("div",{class:"current",onClick:L[0]||(L[0]=b=>S.value=!S.value)},[e("div",Kt,[e("img",{src:o(f).image.href,alt:""},null,8,Yt)]),e("p",null,l(o(f).title),1),D(v,{name:"arrow-down",class:"icon"})]),e("div",{class:C([{active:S.value},"select-content"])},[(r(!0),d(Ne,null,Te(o(et),b=>(r(),d("div",{key:b.key,class:C([{active:b.key===o(A)},"item"]),onClick:te=>B(b.key)},[e("img",{src:b.image.href,alt:""},null,8,eo),e("p",null,l(b.title),1),D(v,{name:"success",class:"icon"})],10,Zt))),128))],2),e("div",{class:C([{active:S.value},"bg"]),onClick:L[1]||(L[1]=b=>S.value=!1)},null,2)])}}}),so=xe(oo,[["__scopeId","data-v-681eb37b"],["__file","/Users/wangjun/Downloads/mall-app-h5/src/components/language-change/index.vue"]]),H=p("activity/turntable/block1.png"),O=p("activity/turntable/block2.png"),tt=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ke=[0,1,2,3,4,5,6,7,8,9],ot=["gmail.com","yahoo.com","hotmail.com","outllok.com","qq.com","163.com","126.com","sina.com","sohu.com","139.com","189.com","360.com","21cn.com","139.com","189.cn","wo.cn","aol.com","protonmail.com","zoho.com","icloud.com","mail.ru","t-online.de","orange.fr","yahoo.co.uk","libero.it","yandex.ru","yahoo.com.sg","naver.com","saudi.net","rediffmail.com","indiatimes.com","yahoo.co.in","sify.com","naukri.com"],Z=n([{x:0,y:0,fonts:[{text:"",fontColor:"#ffffff",fontSize:"16px",top:"70%"}],imgs:[{src:H,width:"100%",height:"100%",activeSrc:O}]},{x:1,y:0,fonts:[{text:"",fontColor:"#ffffff",fontSize:"16px",top:"70%"}],imgs:[{src:H,width:"100%",height:"100%",activeSrc:O}]},{x:2,y:0,fonts:[{text:"",fontColor:"#ffffff",fontSize:"16px",top:"70%"}],imgs:[{src:H,width:"100%",height:"100%",activeSrc:O}]},{x:2,y:1,fonts:[{text:"",fontColor:"#ffffff",fontSize:"16px",top:"70%"}],imgs:[{src:H,width:"100%",height:"100%",activeSrc:O}]},{x:2,y:2,fonts:[{text:"",fontColor:"#ffffff",fontSize:"16px",top:"70%"}],imgs:[{src:H,width:"100%",height:"100%",activeSrc:O}]},{x:1,y:2,fonts:[{text:"",fontColor:"#ffffff",fontSize:"16px",top:"70%"}],imgs:[{src:H,width:"100%",height:"100%",activeSrc:O}]},{x:0,y:2,fonts:[{text:"",fontColor:"#ffffff",fontSize:"16px",top:"70%"}],imgs:[{src:H,width:"100%",height:"100%",activeSrc:O}]},{x:0,y:1,fonts:[{text:"",fontColor:"#ffffff",fontSize:"16px",top:"70%"}],imgs:[{src:H,width:"100%",height:"100%",activeSrc:O}]},{x:1,y:1,fonts:[{text:"",fontColor:"#ffffff",fontSize:"16px",top:"70%"}],imgs:[{src:H,width:"100%",height:"100%",activeSrc:O}]}]);const ao={class:"login-content"},no={class:"dialog-title"},lo={class:"type-tab"},io=["onClick"],co={class:"form-content"},uo={key:0,class:"item"},ro={key:1,class:"item"},vo={class:"item"},mo={class:"btn"},fo=Ce({name:"LoginDialog"}),po=Object.assign(fo,{props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","done"],setup(u,{emit:P}){const E=u,{t:f,locale:A}=Ie(),S=st(),B=at(),h=()=>{P("update:modelValue",!1)},L=["email","phoneNum"],v=n(0),b=n(!1),te=localStorage.getItem("areaCode")?localStorage.getItem("areaCode"):44,V=n(te),s=Tt({username:"",password:""}),$e=I=>{I!==v.value&&(v.value=I,s.username="",s.password="")},de=()=>{const{hostname:I,origin:g}=window.location,J=I==="localhost"?"https://thsjbvh.site/promote/#/":`${g}/promote/#/`;window.open(`${J}?lang=${A.value}`)},R=()=>{const I=v.value===0?"entryEmail":"entryPhone";if(s.username==="")return w(f(I)),!1;if(s.password==="")return w(f("entryPassword")),!1;b.value=!0,Ht({username:v.value==0?s.username:`${V.value} ${s.username}`,password:s.password}).then(async g=>{await S[It](g),w(f("loginSuc")),b.value=!1,setTimeout(()=>{h(),P("done")},1500)}).catch(g=>{b.value=!1,console.log(g)})};return Ct(()=>E.modelValue,I=>{I||(v.value=0,s.username="",s.password="")}),(I,g)=>{const J=nt;return r(),d("div",{class:C([{active:u.modelValue},"login-dialog"])},[e("div",ao,[e("div",no,l(o(f)("\u5356\u5BB6\u767B\u5F55")),1),e("div",lo,[(r(),d(Ne,null,Te(L,(z,G)=>e("div",{key:G,class:C([{active:G===v.value},"item"]),onClick:oe=>$e(G)},l(o(f)(z)),11,io)),64))]),e("div",co,[v.value===0?(r(),d("div",uo,[D(Ue,{modelValue:s.username,"onUpdate:modelValue":g[0]||(g[0]=z=>s.username=z),type:"text","is-turn":!0,placeholder:o(f)("entryEmail"),clear:""},null,8,["modelValue","placeholder"])])):T("v-if",!0),v.value===1?(r(),d("div",ro,[D(Ue,{modelValue:s.username,"onUpdate:modelValue":g[1]||(g[1]=z=>s.username=z),codeNum:V.value,"onUpdate:codeNum":g[2]||(g[2]=z=>V.value=z),type:"tel","is-turn":!0,placeholder:o(f)("entryPhone"),clear:"","area-code":""},null,8,["modelValue","codeNum","placeholder"])])):T("v-if",!0),e("div",vo,[D(Ue,{modelValue:s.password,"onUpdate:modelValue":g[3]||(g[3]=z=>s.password=z),type:"password","is-turn":!0,placeholder:o(f)("entryPassword"),clear:"","show-password":""},null,8,["modelValue","placeholder"])]),e("div",{class:C(["link-content",{"is-ar":o(B)}])},[e("p",null,[W(l(o(f)("\u5982\u679C\u60A8\u6CA1\u6709\u8D26\u53F7"))+", ",1),e("span",{class:"link",onClick:de},l(o(f)("\u70B9\u51FB\u6CE8\u518C")),1)]),e("p",{onClick:g[4]||(g[4]=z=>o(xt)(!0)),class:"link"},l(o(f)("forgetPassword")),1)],2),e("div",mo,[D(J,{type:"custom",loading:b.value,block:"",onClick:R},{default:ee(()=>[W(l(o(f)("login")),1)]),_:1},8,["loading"])])])]),e("div",{class:"login-bg",onClick:h})],2)}}}),go=xe(po,[["__scopeId","data-v-88e63e2d"],["__file","/Users/wangjun/Downloads/mall-app-h5/src/views/activityCenter/turntable/components/LoginDialog.vue"]]);const _o={class:"tips-content"},ho={class:"dialog-title"},yo={class:"info-content"},bo={class:"txt-content"},ko={key:0},wo={key:1},No={class:"btn"},To=Ce({name:"TipsDialog"}),Co=Object.assign(To,{props:{modelValue:{type:Boolean,default:!1},tipsTitle:{type:String,default:""},tipsInfo:{type:String,default:""},again:{type:Boolean,default:!1},times:{type:Number,default:0}},emits:["update:modelValue","again"],setup(u,{emit:P}){const E=u,{t:f}=Ie(),A=()=>{P("update:modelValue",!1)},S=()=>{E.times?h():A()},B=()=>{E.times||A()},h=()=>{A(),P("again")};return(L,v)=>{const b=nt;return r(),d("div",{class:C([{active:u.modelValue},"tips-dialog"])},[e("div",_o,[e("div",ho,l(o(f)("\u63D0\u793A")),1),e("div",yo,[e("div",bo,[u.tipsTitle?(r(),d("p",ko,l(u.tipsTitle),1)):T("v-if",!0),u.tipsInfo?(r(),d("h2",wo,l(u.tipsInfo),1)):T("v-if",!0)]),e("div",No,[u.again?(r(),re(b,{key:0,type:"custom",block:"",onClick:h},{default:ee(()=>[W(l(o(f)("\u518D\u62BD\u4E00\u6B21")),1)]),_:1})):(r(),re(b,{key:1,type:"custom",block:"",onClick:S},{default:ee(()=>[W(l(u.times?o(f)("\u786E\u5B9A"):o(f)("\u77E5\u9053\u4E86")),1)]),_:1})),u.again?(r(),re(b,{key:2,type:"cancel",block:"",onClick:A},{default:ee(()=>[W(l(o(f)("\u53D6\u6D88")),1)]),_:1})):T("v-if",!0)])])]),e("div",{class:"tips-bg",onClick:B})],2)}}}),xo=xe(Co,[["__scopeId","data-v-6ca20a48"],["__file","/Users/wangjun/Downloads/mall-app-h5/src/views/activityCenter/turntable/components/TipsDialog.vue"]]);const m=u=>(Mt("data-v-2b7b83b6"),u=u(),Et(),u),Io={class:"turntable-page"},$o={class:"audio-container"},So=["src"],zo=["src"],Po=["src"],Lo=["src"],Do=["src"],Ao={key:0,class:"turntable-warp"},Vo={class:"language-content"},Mo={class:"play"},Eo=["src"],Uo={class:"img-width light-left"},jo=["src"],Ho={class:"img-width light-right"},Oo=["src"],Bo={class:"img-width cart"},Ro=["src"],Go={class:"img-height target"},Fo=["src"],qo={class:"img-height trumpet1"},Wo=["src"],Qo={class:"img-width trumpet2"},Xo=["src"],Jo={class:"shadow-txt"},Ko={class:"title-info"},Yo={class:"turntable-container"},Zo=["src"],es={class:"notice-content"},ts={class:"notice-item"},os=m(()=>e("div",{class:"item"},null,-1)),ss=m(()=>e("div",{class:"item"},null,-1)),as=m(()=>e("div",{class:"item"},null,-1)),ns=[os,ss,as],ls=m(()=>e("div",{class:"item"},null,-1)),is=m(()=>e("div",{class:"item"},null,-1)),cs=m(()=>e("div",{class:"item"},null,-1)),us=[ls,is,cs],rs=m(()=>e("div",{class:"item"},null,-1)),ds=m(()=>e("div",{class:"item"},null,-1)),vs=m(()=>e("div",{class:"item"},null,-1)),ms=[rs,ds,vs],fs=m(()=>e("div",{class:"item"},null,-1)),ps=m(()=>e("div",{class:"item"},null,-1)),gs=m(()=>e("div",{class:"item"},null,-1)),_s=[fs,ps,gs],hs={key:0,dir:"ltr",class:"lottery-content"},ys={dir:"ltr",class:"btn-content"},bs={key:0},ks={key:0,class:"color"},ws={class:"item"},Ns={key:0},Ts={class:"item"},Cs={class:"block-content"},xs=m(()=>e("div",{class:"block-bottom"},null,-1)),Is=m(()=>e("div",{class:"block-line left"},null,-1)),$s=m(()=>e("div",{class:"block-line right"},null,-1)),Ss={class:"title"},zs={class:"content my-prize"},Ps={class:"item"},Ls={class:"item"},Ds={key:0,class:"block-content"},As=m(()=>e("div",{class:"block-bottom"},null,-1)),Vs=m(()=>e("div",{class:"block-line left"},null,-1)),Ms=m(()=>e("div",{class:"block-line right"},null,-1)),Es={class:"title"},Us={class:"content invite"},js={class:"link-content"},Hs={class:"txt"},Os={key:1,dir:"ltr",class:"block-content"},Bs=m(()=>e("div",{class:"block-bottom"},null,-1)),Rs=m(()=>e("div",{class:"block-line left"},null,-1)),Gs=m(()=>e("div",{class:"block-line right"},null,-1)),Fs={class:"title"},qs={class:"prize"},Ws=["src"],Qs={key:0,class:"loading"},Xs={key:1,class:"no-data"},Js={class:"block-content bg2"},Ks=m(()=>e("div",{class:"block-bottom"},null,-1)),Ys=m(()=>e("div",{class:"block-line left"},null,-1)),Zs=m(()=>e("div",{class:"block-line right"},null,-1)),ea={class:"title"},ta={class:"content intro"},oa=["innerHTML"],sa=Ce({name:"ActivityTurntable"}),aa=Object.assign(sa,{setup(u){const P=$t(),{toClipboard:E}=jt(),f=St(),A=st(),S=n(!1),B=we(()=>({...{username:"",email:""},...A.userInfo})),h=we(()=>B.value.username||B.value.email||""),L=at(),v=n(""),b=p("activity/turntable/default-imgs.png"),te=p("activity/turntable/default-imgs1.png"),V=n(!1),{t:s,locale:$e}=Ie(),de=n(!1),R=n(!0),I=n(),g=n(),J=n(),z=n(),G=n(),oe=n([]),ve=n(""),me=n(""),K=n(!1),se=n(),x=n([]),y=n({}),je=async()=>{w.loading({duration:0,forbidClick:!0}),await Rt({activityId:v.value}).then(a=>{be.value=!0;let t=a.prizeList||[];if(t.length>9&&(t=t.slice(0,9)),x.value=t,y.value=a,x.value.length)for(let i=0;i<x.value.length;i++)Z.value[i].id=x.value[i].id,Z.value[i].prizeName=x.value[i].prizeName,Z.value[i].fonts[0].text=x.value[i].prizeName,Z.value[i].imgs.push({src:x.value[i].image||(Number(x.value[i].prizeType)===3?b:te),width:"34%",top:"20%"});lt(),Ee(()=>{S.value=!0,w.clear()})}).catch(()=>{be.value=!1})},lt=()=>{const a=[];for(let t=0;t<50;t++){const i=Math.random()<.5;let k="";if(i){let N="",$="";const c=Math.floor(Math.random()*4),ie=Math.floor(Math.random()*5),bt=Math.floor(Math.random()*ot.length),kt="@"+ot[bt];for(let ce=0;ce<c;ce++){const Me=Math.floor(Math.random()*tt.length);N+=tt[Me]}for(let ce=0;ce<ie;ce++){const Me=Math.floor(Math.random()*ke.length);$+=ke[Me]}k=`${N}**${$}${kt}`}else{let N="";for(let $=0;$<4;$++){const c=Math.floor(Math.random()*ke.length);N+=ke[c]}k=`**${N}`}const _=it();a.push(`${k} ${s("\u62BD\u4E2D\u4E86")} ${_}`)}oe.value=a},it=()=>{const a=x.value.filter(c=>Number(c.prizeType)!==3),t=[...new Set(a.map(c=>c.odds))].sort((c,ie)=>c-ie),i=t.reduce((c,ie)=>c+ie,0),k=Math.random()*i,_=ct(k,t),N=x.value.filter(c=>c.odds===t[_]),$=Math.floor(Math.random()*N.length);return N[$].prizeName},ct=(a,t)=>{for(let i=0;i<t.length;i++)if(a<t[i])return i;return t.length-1},ut=()=>{R.value=!R.value,R.value?I.value.play():I.value.pause()},fe=n(!1),M=n(!1),U=n(""),j=n(""),Se=n(!1),He=(a=!1)=>{if(V.value){if(!y.value.state)return U.value="",j.value=s("\u6D3B\u52A8\u672A\u5F00\u542F"),M.value=!0,!1;const t=new Date().getTime(),i=new Date(y.value.startTime).getTime(),k=new Date(y.value.endTime).getTime();if(i>t)return U.value=s("\u6D3B\u52A8\u5F00\u59CB\u65F6\u95F4"),j.value=y.value.startTime,M.value=!0,!1;if(!a){if(k<t)return U.value=s("\u672C\u6B21\u6D3B\u52A8\u5DF2\u7ED3\u675F"),j.value=s("\u6B22\u8FCE\u4E0B\u6B21\u518D\u6765\uFF01"),M.value=!0,!1;if(Number(F.value)<Number(y.value.pointsToNumber))return U.value="",j.value=s("\u79EF\u5206\u4E0D\u8DB3"),M.value=!0,!1}return!0}else return S.value?fe.value=!0:w(s("\u8BF7\u7A0D\u540E\u91CD\u8BD5")),!1},Oe=n(!1),Be=n(0),ze=async a=>{if(Ve(),He()){if(!Ke.value){w(s("\u672A\u8BA4\u8BC1\u5546\u5BB6"));return}Oe.value=a,a?Number(F.value)<Number(y.value.pointsToNumber)*5?(U.value="",j.value=s("\u79EF\u5206\u4E0D\u8DB3"),M.value=!0):Ge(!0):Ge(!1)}},Re=a=>a?x.value.findIndex(t=>t.id===a):x.value.findIndex(t=>Number(t.prizeType)===3),Y=n(!1),ae=n([]),Ge=async a=>{Y.value||(Se.value=!1,ae.value=[],Y.value=!0,se.value.play(),g.value.play(),K.value=!0,await Ft({drawTimes:a?5:1,activityId:v.value}).then(t=>{let i=null;if(t){const k=a?Number(y.value.pointsToNumber)*5:Number(y.value.pointsToNumber);if(F.value=Number(F.value)-k,a){const _=x.value.find($=>Number($.prizeType)===3).id;ae.value=t;const N=t.find($=>$.id!==_);i=N?N.id:_}else i=t[0].id}else w(s("\u7CFB\u7EDF\u9519\u8BEF\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5"));se.value.stop(Re(i))}).catch(t=>{se.value.stop(Re()),t==="login"&&window.location.reload()}))},rt=a=>{const t=x.value.find(i=>i.id===a.id);if(g.value.pause(),g.value.currentTime=0,K.value=!1,Y.value=!1,_e(!0),ae.value.length){Number(t.prizeType)===3?G.value.play():z.value.play();const i=x.value.find(_=>Number(_.prizeType)===3).id,k=ae.value.filter(_=>_.id!==i);for(let _=0;_<k.length;_++){let N=x.value.find(c=>c.id===k[_].id);oe.value.push(`${Ze(h.value,!1)} ${s("\u62BD\u4E2D\u4E86")} ${N.prizeName}`);const $={...N,prizeImage:N.image,id:new Date().getTime()};q.value.unshift($)}U.value=k.length?s("\u606D\u559C\u60A8\uFF0C\u4E2D\u5956\u4E86\uFF01"):s("\u5F88\u9057\u61BE\uFF0C\u6B64\u6B21\u672A\u80FD\u4E2D\u5956"),j.value=ae.value.map(_=>_.prizeName).join(`
`),M.value=!0}else if(Se.value=Number(F.value)>Number(y.value.pointsToNumber)&&!Oe.value&&!Be.value,Number(t.prizeType)===3)G.value.play(),U.value=s("\u5F88\u9057\u61BE\uFF0C\u6B64\u6B21\u672A\u80FD\u4E2D\u5956"),j.value=t.prizeName,M.value=!0;else{z.value.play(),U.value=s("\u606D\u559C\u60A8\uFF0C\u4E2D\u5956\u4E86\uFF01"),j.value=t.prizeName,M.value=!0,oe.value.push(`${Ze(h.value,!1)} ${s("\u62BD\u4E2D\u4E86")} ${t.prizeName}`);const i={...t,prizeImage:t.image,id:new Date().getTime()};q.value.unshift(i)}},Fe=()=>{!de.value&&be.value&&(I.value.play(),R.value=!0,de.value=!0)},ne=n({gutter:20,speed:20}),dt=n({borderRadius:0,lineClamp:1}),vt=n({background:"rgba(0,0,0,0)"}),Pe=n(!1),Le=n(!1),qe=a=>{a?Pe.value=!0:Le.value=!0},We=a=>{a?Pe.value=!1:Le.value=!1},F=n(0),Qe=async(a=!1)=>{a&&w.loading({duration:0,forbidClick:!0}),await Gt({activityId:v.value}).then(t=>{V.value=!0,F.value=t||0}).catch(()=>{console.log("need login")})},mt=()=>{V.value=!0,Ye(),Qe(!0),_e(),ye(!0),Je()},pe=n(0),ge=n(0),_e=async(a=!1)=>{a||w.loading({duration:0,forbidClick:!0}),await qt({activityId:v.value}).then(t=>{pe.value=t.amount||0,ge.value=t.goodsNum||0})},Xe=a=>{if(Ve(),He(!0)){if(Number(a)===1){if(!ge.value){w(s("\u6682\u65E0\u5956\u54C1"));return}}else if(pe.value<Number(y.value.minPoints)){w(`${s("\u6700\u5C0F\u9886\u53D6\u91D1\u989D")}\u2265${y.value.minPoints}`);return}w.loading({duration:0,forbidClick:!0}),Wt({activityId:v.value,prizeType:a}).then(async()=>{await _e(),w(s("\u9886\u53D6\u6210\u529F"))}).catch(()=>{w.clear()})}},ft=n(0),pt=n(0),he=n(""),Je=()=>{Dt().then(a=>{he.value=a.download&&a.code?`${a.download}/#?usercode=${a.code}`:""}),Qt({activityId:v.value}).then(a=>{ft.value=a.number||0,pt.value=a.points||0})},gt=async()=>{Ve();try{await E(he.value),w(s("copySuccess"))}catch(a){console.error(a)}},_t=n(),ht=n(20),De=n(1),q=n([]),Ae=n(!0),le=n(!1),ye=(a=!1)=>{a&&(De.value=1,Ae.value=!0,q.value=[]),Ae.value&&!le.value&&(le.value=!0,Xt({pageNum:De.value,pageSize:ht.value,activityId:v.value}).then(t=>{De.value+=1,Ae.value=!t.pageInfo.lastPage,q.value=[...q.value,...t.pageList],le.value=!1}).catch(()=>{le.value=!1}))},yt=a=>{const t=a.target;Math.ceil(t.scrollLeft+t.clientWidth)>=t.scrollWidth-50&&ye()},Ke=n(!1),Ye=()=>{At().then(a=>{Ke.value=Number(a.status)===2})};zt(()=>{document.removeEventListener("click",Fe)});const be=n(!1);Ee(async()=>{document.addEventListener("click",Fe,!1),document.addEventListener("langChange",async()=>{await je(),ye(!0),Ee(()=>{se.value.init()})}),P?(ve.value="60vw",me.value="56vw",ne.value.gutter=5,ne.value.speed=50,Z.value.forEach(k=>{k.fonts&&k.fonts.forEach(_=>{_.fontSize="2.4vw"})})):(ve.value="690px",me.value="630px",ne.value.gutter=20,ne.value.speed=20),I.value.volume=.25;const{lang:a,token:t,id:i}=f.query;a&&($e.value=a,localStorage.setItem("lang",a)),t&&(w.loading({duration:0}),await A.getUserInfo(!0,t)),i?(v.value=i,v.value&&(await je(),S.value&&(await Qe(!0),V.value&&(Ye(),_e(),Je(),ye(!0))))):w(s("\u6682\u65E0\u6D3B\u52A8"))});const Ve=()=>{J.value.play()};return(a,t)=>{const i=Ot,k=Bt,_=Pt("LuckyGrid"),N=Ut,$=Lt;return r(),d("div",Io,[e("div",$o,[T(` <audio :src="getImg('activity/turntable/audio/bg.mp3')" autoplay loop="loop" ref="bgAudio"></audio> `),e("audio",{src:o(p)("activity/turntable/audio/bg.mp3"),loop:"loop",ref_key:"bgAudio",ref:I},null,8,So),e("audio",{src:o(p)("activity/turntable/audio/rolling.mp3"),loop:"loop",ref_key:"rollingAudio",ref:g},null,8,zo),e("audio",{src:o(p)("activity/turntable/audio/click.mp3"),ref_key:"clickAudio",ref:J},null,8,Po),e("audio",{src:o(p)("activity/turntable/audio/success.mp3"),ref_key:"successAudio",ref:z},null,8,Lo),e("audio",{src:o(p)("activity/turntable/audio/fail.mp3"),ref_key:"failAudio",ref:G},null,8,Do)]),T(" \u767B\u5F55\u5F39\u7A97 "),D(go,{modelValue:fe.value,"onUpdate:modelValue":t[0]||(t[0]=c=>fe.value=c),onDone:mt},null,8,["modelValue"]),T(" \u63D0\u793A\u5F39\u7A97 "),D(xo,{modelValue:M.value,"onUpdate:modelValue":t[1]||(t[1]=c=>M.value=c),"tips-title":U.value,"tips-info":j.value,again:Se.value,times:Be.value,onAgain:t[2]||(t[2]=c=>ze(!1))},null,8,["modelValue","tips-title","tips-info","again","times"]),be.value?(r(),d("div",Ao,[e("div",Vo,[D(so)]),e("div",{class:"play-content",onClick:ut},[e("div",Mo,[e("img",{src:o(p)(R.value?"activity/turntable/icon1.png":"activity/turntable/icon2.png"),alt:""},null,8,Eo)])]),e("div",{style:ue({"background-image":"url("+o(p)("activity/turntable/page-header.png")+")"}),class:"page-header"},[e("div",Uo,[e("img",{src:o(p)("activity/turntable/light-left.png"),alt:""},null,8,jo)]),e("div",Ho,[e("img",{src:o(p)("activity/turntable/light-right.png"),alt:""},null,8,Oo)]),e("div",Bo,[e("img",{src:o(p)("activity/turntable/cart.png"),alt:""},null,8,Ro)]),e("div",Go,[e("img",{src:o(p)("activity/turntable/target.png"),alt:""},null,8,Fo)]),e("div",qo,[e("img",{src:o(p)("activity/turntable/trumpet1.png"),alt:""},null,8,Wo)]),e("div",Qo,[e("img",{src:o(p)("activity/turntable/trumpet2.png"),alt:""},null,8,Xo)]),e("h1",null,l(o(s)("\u5F00\u5E97\u8D62\u5927\u5956")),1),e("h1",Jo,l(o(s)("\u5F00\u5E97\u8D62\u5927\u5956")),1),e("div",Ko,[e("div",null,l(o(s)("\u5E78\u8FD0\u8F6C\u4E0D\u505C")),1)])],4),e("div",{style:ue({"background-image":"url("+o(p)("activity/turntable/page-bg.png")+")"}),class:"page-content"},[e("div",Yo,[e("div",{style:ue({"background-image":"url("+o(p)("activity/turntable/machine2.png")+")"}),class:"machine-content"},[e("div",{class:C([{active:Y.value},"img-width rod"])},[e("img",{src:o(p)("activity/turntable/machine1.png"),alt:""},null,8,Zo)],2),e("div",es,[D(k,{class:"swiper",autoplay:3e3,"show-indicators":!1,vertical:""},{default:ee(()=>[(r(!0),d(Ne,null,Te(oe.value,c=>(r(),re(i,{key:c},{default:ee(()=>[e("div",ts,l(c),1)]),_:2},1024))),128))]),_:1})]),e("div",{class:C(["light-content top left",{active:K.value}])},ns,2),e("div",{class:C(["light-content top right",{active:K.value}])},us,2),e("div",{class:C(["light-content bottom left",{active:K.value}])},ms,2),e("div",{class:C(["light-content bottom right",{active:K.value}])},_s,2),ve.value&&me.value?(r(),d("div",hs,[D(_,{ref_key:"lotteryCanvas",ref:se,width:ve.value,height:me.value,"default-config":ne.value,"default-style":dt.value,"active-style":vt.value,prizes:o(Z),onEnd:rt},null,8,["width","height","default-config","default-style","active-style","prizes"])])):T("v-if",!0),e("div",ys,[e("div",{style:ue({"background-image":"url("+o(p)("activity/turntable/start-btn1.png")+")"}),class:C([{active:Pe.value,disabled:Y.value},"btn one"]),onClick:t[3]||(t[3]=c=>ze(!1)),onTouchstart:t[4]||(t[4]=c=>qe(!0)),onTouchend:t[5]||(t[5]=c=>We(!0))},[e("h3",null,l(o(s)("\u62BDN\u6B21",{times:1})),1),y.value.pointsToNumber?(r(),d("p",bs,l(o(s)("\u6D88\u8017N\u79EF\u5206",{points:y.value.pointsToNumber})),1)):T("v-if",!0)],38),e("div",{style:ue({"background-image":"url("+o(p)("activity/turntable/start-btn2.png")+")"}),class:C([{active:Le.value,disabled:Y.value},"btn two"]),onClick:t[6]||(t[6]=c=>ze(!0)),onTouchstart:t[7]||(t[7]=c=>qe(!1)),onTouchend:t[8]||(t[8]=c=>We(!1))},[e("h3",null,l(o(s)("\u62BDN\u6B21",{times:5})),1),y.value.pointsToNumber?(r(),d("p",ks,l(o(s)("\u6D88\u8017N\u79EF\u5206",{points:y.value.pointsToNumber*5})),1)):T("v-if",!0)],38)]),V.value?(r(),d("div",{key:1,class:C([{"is-ar":o(L)},"user-content"])},[e("div",ws,[o(P)?(r(),re(N,{key:1,color:"#ffffff",background:"rgba(0,0,0,0)",text:o(h)+" "+o(s)("\u6B22\u8FCE\u60A8\uFF01")},null,8,["text"])):(r(),d("div",Ns,[e("span",null,l(o(h)),1),W(" "+l(o(s)("\u6B22\u8FCE\u60A8\uFF01")),1)]))]),e("div",Ts,[W(l(o(s)("\u5269\u4F59\u79EF\u5206"))+" ",1),e("span",null,l(F.value),1)])],2)):(r(),d("div",{key:2,class:"user-content login",onClick:t[9]||(t[9]=c=>fe.value=!0)},l(o(s)("\u8BF7\u5148\u767B\u5F55")),1))],4),e("div",Cs,[xs,Is,$s,e("div",Ss,l(o(s)("\u6211\u7684\u5956\u54C1")),1),e("div",zs,[e("div",Ps,[e("h2",null,l(o(Vt)(pe.value)),1),e("p",null,l(o(s)("\u7D2F\u8BA1\u5F69\u91D1")),1),e("div",{class:C({active:pe.value>y.value.minPoints}),onClick:t[10]||(t[10]=c=>Xe(2))},l(o(s)("\u9886\u53D6")),3)]),e("div",Ls,[e("h2",null,l(ge.value),1),e("p",null,l(o(s)("\u83B7\u5F97\u5B9E\u7269")),1),e("div",{class:C({active:ge.value}),onClick:t[11]||(t[11]=c=>Xe(1))},l(o(s)("\u9886\u53D6")),3)])])]),he.value?(r(),d("div",Ds,[As,Vs,Ms,e("div",Es,l(o(s)("\u9080\u8BF7\u597D\u53CB")),1),e("div",Us,[e("div",js,[e("div",Hs,l(he.value),1),e("div",{class:"btn",onClick:gt},l(o(s)("\u590D\u5236\u94FE\u63A5")),1)]),T(` <p v-html="t('\u6210\u529F\u9080\u8BF7N\u4EBA\uFF0C\u83B7\u5F97N\u79EF\u5206', {num: inviteNumber, points: invitePoints})"></p>
              <p v-html="t('\u6BCF\u9080\u8BF7N\u4E2A\u597D\u53CB\u5F00\u5E97\u53EF\u83B7\u5F97N\u79EF\u5206', {num: 1, points: activityInfo.invitePoints})"></p> `)])])):T("v-if",!0),V.value?(r(),d("div",Os,[Bs,Rs,Gs,e("div",Fs,l(o(s)("\u6211\u7684\u4E2D\u5956")),1),e("div",{class:"content record",onScroll:t[12]||(t[12]=c=>yt(c))},[q.value.length?(r(),d("div",{key:0,class:"record-content",ref_key:"recordContent",ref:_t},[(r(!0),d(Ne,null,Te(q.value,c=>(r(),d("div",{key:c.id,class:"item"},[e("div",qs,[e("img",{src:c.prizeImage||o(te),alt:""},null,8,Ws)]),e("p",null,l(c.prizeName),1)]))),128)),le.value?(r(),d("div",Qs,[D($,{color:"#ffffff",type:"spinner"})])):T("v-if",!0)],512)):(r(),d("div",Xs,l(o(s)("\u6682\u65E0\u4E2D\u5956\u8BB0\u5F55")),1))],32)])):T("v-if",!0),e("div",Js,[Ks,Ys,Zs,e("div",ea,l(o(s)("\u6D3B\u52A8\u89C4\u5219")),1),e("div",ta,[y.value.description?(r(),d("div",{key:0,innerHTML:y.value.description},null,8,oa)):T("v-if",!0)])])])],4)])):T("v-if",!0)])}}}),_a=xe(aa,[["__scopeId","data-v-2b7b83b6"],["__file","/Users/wangjun/Downloads/mall-app-h5/src/views/activityCenter/turntable/index.vue"]]);export{_a as default};

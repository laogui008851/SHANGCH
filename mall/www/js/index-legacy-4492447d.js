System.register(["./index-legacy-feafbc7d.js","./index-legacy-6ad7b90e.js","./index-legacy-8ca97f5e.js","./index-legacy-a52e74cb.js","./login.api-legacy-22e8ee28.js","./nationalityList-legacy-b9280f2f.js","./index-legacy-eab1db47.js","./index-legacy-39b64817.js","./index-legacy-a8e8a5aa.js","./index-legacy-df5c3ae5.js","./use-id-legacy-c2676cf6.js","./index-legacy-a0154ce7.js","./index-legacy-d4badcca.js","./countryList-legacy-94cb363f.js"],(function(e,a){"use strict";var l,t,i,o,n,u,d,s,r,c,v,p,g,x,y,b,h,m,f,A,w,k,C,V,j,E,B,S,T,U,I,$,F,z,_,N,q,D=document.createElement("style");return D.textContent=".bindVerify[data-v-59a3607d]{width:100%;min-height:100vh;box-sizing:border-box}.content[data-v-59a3607d]{font-size:12px;padding:0 16px}.iptbox[data-v-59a3607d]{height:44px;margin-top:8px;padding:0 10px 0 20px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-radius:3px}.iptbox input[data-v-59a3607d]{-webkit-box-flex:1;-webkit-flex:1 1;flex:1 1;height:100%;border:none}.iptbox input[data-v-59a3607d]::-webkit-input-placeholder{color:#868c9a}.iptbox span[data-v-59a3607d]{color:#1d91ff}.imgbox[data-v-59a3607d]{border:1px solid #E5E7ED;padding:5px;width:182px;height:182px;box-sizing:border-box}.imgbox img[data-v-59a3607d]{width:100%;height:100%}.code[data-v-59a3607d]{font-size:15px;font-weight:300;line-height:18px;margin-top:22px;height:18px}.code img[data-v-59a3607d]{width:14px;height:14px;margin-left:5px}.tips[data-v-59a3607d]{margin-top:10px;color:#999}.copy[data-v-59a3607d]{border-radius:4px;width:132px;height:40px;margin-top:16px;border:1px solid #E5E7ED;line-height:40px}.bottom[data-v-59a3607d]{padding:20px 16px 7px}.bottom p[data-v-59a3607d]{padding-bottom:13px}.van-password-input[data-v-59a3607d]{margin:0}.van-password-input__security li[data-v-59a3607d],[data-v-59a3607d] .van-password-input__security li{background:#F5F5F5;width:50px;height:50px;color:#333}[data-v-59a3607d] .van-button--primary{background-color:var(--site-main-color);border-color:var(--site-main-color);border-radius:4px}[data-v-59a3607d] .inputBackground{background-color:#fff!important;border-radius:4px;border:1px solid #eee}\n",document.head.appendChild(D),{setters:[e=>{l=e._,t=e.ai,i=e.j,o=e.u,n=e.r,u=e.h,d=e.m,s=e.cs,r=e.S,c=e.L,v=e.c,p=e.e,g=e.w,x=e.a,y=e.q,b=e.t,h=e.M,m=e.N,f=e.f,A=e.F,w=e.b,k=e.T,C=e.ct,V=e.cu,j=e.cv,E=e.b1,B=e.o,S=e.P,T=e.Q},e=>{U=e.B},e=>{I=e.P,$=e.N},e=>{F=e._},e=>{z=e.a},e=>{_=e.n},e=>{N=e.u},e=>{q=e.I},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{}],execute:function(){const a={class:"bindVerify h-full bg-white"},D={class:"content"},H={key:0},P={style:{"margin-top":"22px"}},R={class:"label mt-2 textColor"},O={class:"iptbox inputBackground"},J=["placeholder"],X={style:{"margin-top":"22px"}},Y={key:1},G={class:"pl-30 pr-30 text-center flex flex-col items-center justify-center mt40"},Z={class:"imgbox"},M={class:"code flex items-center justify-center textColor"},K={class:"tips"},Q={class:"flex justify-between mt-6 mb-3"},W={class:"flex items-center"},L=(e=>(S("data-v-59a3607d"),e=e(),T(),e))((()=>x("div",{class:"mt-2"},null,-1))),ee={class:"mt-5 bottom tabBackground textColor"};e("default",l({__name:"index",setup(e){const l=t(),S=i(),{t:T}=o(),{toClipboard:ae}=N(),le=n(""),te=n(""),ie=n(""),oe=n(!1),ne=n(0),ue=n(""),de=n(""),se=n(""),re=n(!1),ce=n("");n(!0);const ve=n(""),pe=n(0),ge=n(null),xe=n(0),ye=n(""),be=u(),he=n(!1);d((()=>{console.log("ss"),me(),clearInterval(ge.value),ge.value=null}));const me=()=>{ne.value=l.query.type,ue.value=l.query.verifyCode||"",1==ne.value?(le.value=T("bindPhone"),oe.value=!0):2==ne.value?le.value=T("bindEmail"):3==ne.value&&(le.value=T("googleAuthenticatorEn"),Ve())},fe=async()=>{if(2!=ne.value||""!=te.value)if(1!=ne.value||""!=te.value){if(xe.value>0)return!1;k.loading({mask:!0}),await C({target:1==ne.value?`${pe.value} ${te.value}`:te.value}),z({target:1==ne.value?`${pe.value} ${te.value}`:te.value}).then((e=>{k(T("sendSuccess")),xe.value=30,ge.value=setInterval((()=>{xe.value>0?xe.value=xe.value-1:(xe.value=0,clearInterval(ge.value),ge.value=null)}),1e3)})).catch((()=>{k.clear()}))}else k(T("entryPhone"));else k(T("entryEmail"))},Ae=()=>{2!=ne.value||""!=te.value?1!=ne.value||""!=te.value?""!=ie.value?(he.value=!0,1==ne.value?Ce():2==ne.value?ke():3==ne.value&&je()):k(T("请输入登录密码")):k(T("entryPhone")):k(T("entryEmail"))},we=async()=>{await be.getUserInfo(!0),k(T("bindSuccess")),he.value=!1,setTimeout((()=>{l.query.reset?S.go(-2):S.back()}),1e3)},ke=()=>{V({target:te.value,email:te.value,verifcode:de.value,password:ie.value,verifyCode:ue.value}).then((e=>{we()})).catch((e=>{console.log(e),he.value=!1}))},Ce=()=>{V({target:`${pe.value} ${te.value}`,phone:`${pe.value} ${te.value}`,verifcode:de.value,password:ie.value,verifyCode:ue.value}).then((e=>{we()})).catch((e=>{console.log(e),he.value=!1}))},Ve=()=>{s({}).then((e=>{se.value=e.google_auth_secret,ve.value=e.google_auth_url,console.log(e)}))},je=()=>{j({secret:se.value,code:ce.value}).then((e=>{e.google_auth_bind?we():k(err||T("bindFailed"))}))},Ee=async()=>{try{await ae(se.value),k(T("copySuccess"))}catch(e){console.error(e)}},Be=async()=>{ce.value=await navigator.clipboard.readText()},Se=(e,a,l)=>{ye.value=a,pe.value=l},Te=n(null),Ue=()=>{Te.value.open()};return r(ce,((e,a)=>{6===ce.value.length&&(re.value=!1)})),(e,l)=>{const t=E,i=c,o=I,n=$,u=U;return B(),v("div",a,[p(t,null,{title:g((()=>[f(b(le.value),1)])),_:1}),x("div",D,[y(" 手机邮箱验证 "),1==ne.value||2==ne.value?(B(),v("div",H,[x("div",P,[p(F,{label:2==ne.value?e.$t("email"):e.$t("phoneNum"),placeholderText:2==ne.value?e.$t("entryEmail"):e.$t("entryPhone"),modelValue:te.value,"onUpdate:modelValue":l[0]||(l[0]=e=>te.value=e),area:oe.value,onSelectArea:Ue,dialCode:pe.value,icon:ye.value},null,8,["label","placeholderText","modelValue","area","dialCode","icon"])]),x("p",R,b(e.$t("verificationCode")),1),x("div",O,[h(x("input",{class:"inputBackground textColor",type:"text",placeholder:e.$t("entryVerifyCode"),"onUpdate:modelValue":l[1]||(l[1]=e=>de.value=e)},null,8,J),[[m,de.value]]),3!=ne.value?(B(),v("span",{key:0,onClick:fe},[f(b(e.$t("sendVerifyCode")),1),xe.value?(B(),v(A,{key:0},[f(" ("+b(xe.value)+")s",1)],64)):y("v-if",!0)])):y("v-if",!0)]),x("div",X,[p(F,{label:e.$t("登录密码"),placeholderText:e.$t("请输入登录密码"),modelValue:ie.value,"onUpdate:modelValue":l[2]||(l[2]=e=>ie.value=e),typeText:"password",clearBtn:!1},null,8,["label","placeholderText","modelValue"])])])):y("v-if",!0),y(" 谷歌验证 "),3==ne.value?(B(),v("div",Y,[x("div",G,[x("div",Z,[p(w(q),{src:ve.value},{loading:g((()=>[p(i,{type:"spinner",size:"20"})])),_:1},8,["src"])]),x("div",M,[f(b(se.value)+" ",1),x("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKzSURBVHgBvVZdbtpAEP5214G+VOUI9ATlBqEnKDlB4CVV1JeitJHSKIqjCJCaEsRDFYVUIj1BuEHICUJPUN+gPDY23unuEsjaQLDz00+yZHt29tud2Z35GFKi9vV7AYIXGHiOJHLg0pMS3t7nzX4Sf5Zk0OHRSdHhYp2AkvrM3TO0F8qwvYi80ep07yVsNE7ylHW6ICoiDQgDPwjX3J1NzyZTESnzRT714x/rlBHXC8iG6vFun1kwFDIZ8bvePP1ok41Nc9Bone2TJDdOov61QaPe7vaHgW0weWVOiXOmw563bcTYgBEV7tYSw+G305Jg7CLiRGgHYsV1q5UhlqB2dOoyzvYX2SOEOmfIiEt7lRSisru9cY4UqDVPygyiO88WzWFG7EdCIqmalsxMysXqItt0h+ZEqkRbhvOdrY0KUsI+IHMXM3khh5dsww0PD/DEZBFCVT3eTV717tzq3R16KrIooXXfJHCFFEhKpuGMHVT+pPU3DAZIgZu/JvyJUmAIRyPkhXVeiWf/IAXsErYMhsZxkNjhsTCEN3gRqSBEwWs8Ewzhbcka3v3kRTwTHOu9j3G/AxNsFU+EerNzobuHmZfQnx6VkOjndBShqJsuHglTm/UmSJVL9ejrNiXc+/S+Byusgouu2+rm8BioRmB9eQFf6UWKNyGsWp/5jPS7eCDqrbNWrBG09VmZ6Yf1486lDqm1jJ7vy2rSu+a63Vz2VdCKVR7vy9aGOfkzEsNnK2ssIh1YScmFy1qzU15GpvOefRlcx8l8Hr6dzjbPUZc6yGgjnjgrhz6BfoVSmvLHOfIMzhsViTJmFZ0hsxvBQtVm6mvIXTC2joeAWN8Xo0q86yzVpVoucMSUwP3w1NiD3a35SiGRENbQ+eFMlJRAeoOxCpuEb6h2o0joSlLYS6rA/xv+AZfLLFBKDLSAAAAAAElFTkSuQmCC",alt:"",onClick:Ve})]),x("p",K,b(e.$t("saveKeyTips")),1),x("div",{class:"copy textColor",onClick:Ee},b(e.$t("copy")),1)]),x("div",Q,[x("div",null,b(e.$t("googleVerificationCode")),1),x("div",W,[x("div",{class:"colorMain",onClick:l[3]||(l[3]=e=>ce.value="")},b(e.$t("clear")),1),x("div",{class:"colorMain ml-30",onClick:Be},b(e.$t("paste")),1)])]),p(o,{value:ce.value,gutter:16,focused:re.value,onFocus:l[4]||(l[4]=e=>re.value=!0),mask:!1},null,8,["value","focused"]),p(n,{modelValue:ce.value,"onUpdate:modelValue":l[5]||(l[5]=e=>ce.value=e),show:re.value,onBlur:l[6]||(l[6]=e=>re.value=!1)},null,8,["modelValue","show"]),L,x("div",ee,[x("p",null,b(e.$t("precautions")),1),x("p",null,b(e.$t("precautionsTips1")),1),x("p",null,b(e.$t("precautionsTips2")),1)])])):y("v-if",!0),p(u,{class:"w-full",style:{"margin-top":"30px"},type:"primary",loading:he.value,onClick:Ae},{default:g((()=>[f(b(e.$t("confirm")),1)])),_:1},8,["loading"])]),p(_,{ref_key:"controlChildRef",ref:Te,title:e.$t("selectArea"),onGetName:Se},null,8,["title"])])}}},[["__scopeId","data-v-59a3607d"],["__file","/Users/wangjun/Downloads/mall-app-h5/src/views/bindVerify/index.vue"]]))}}}));

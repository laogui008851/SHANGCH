(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3869c32e"],{"05cd":function(e,t,s){var i=s("ec9a").f;e.exports=function(e,t,s){s in e||i(e,s,{configurable:!0,get:function(){return t[s]},set:function(e){t[s]=e}})}},"0d6a":function(e,t,s){s("2b45")},"1a89":function(e,t,s){var i=s("f0a7"),o=s("06d8"),a=s("6152"),r=s("1b1a"),n=s("6a5c"),l=s("f2de"),d=s("05cd"),c=s("6735"),u=s("4ac4"),m=s("a092"),f=s("b0b4"),p=s("c57c"),h=s("dfaa");e.exports=function(e,t,s,g){var v="stackTraceLimit",y=g?2:1,b=(e=e.split("."),e[e.length-1]),C=i.apply(null,e);if(C){var M=C.prototype;if(!h&&o(M,"cause")&&delete M.cause,!s)return C;e=i("Error");var $=t((function(e,t){return t=u(g?t:e,void 0),e=g?new C(e):new C,void 0!==t&&a(e,"message",t),f(e,$,e.stack,2),this&&r(M,this)&&c(e,this,$),y<arguments.length&&m(e,arguments[y]),e}));if($.prototype=M,"Error"!==b?n?n($,e):l($,e,{name:!0}):p&&v in C&&(d($,C,v),d($,C,"prepareStackTrace")),l($,C),!h)try{M.name!==b&&a(M,"name",b),M.constructor=$}catch(e){}return $}}},"21f4":function(e,t,s){var i=s("d118"),o=s("5aa2"),a=s("3aee");class r{static getRule(e,t,s={},i={}){var a,r=null!=(r=i.rulesMap)?r:this.rulesMap;i=null!=(i=i.transform)?i:this.transform;return Object.keys(r).includes(e)&&Object(o.isFunction)(r[e])?(({dynamic:a={}}=s),r={trigger:["blur","change"],...r[e](a),...Object(o.omit)(s,"dynamic")},t&&(r.message=t),i&&(r.transform=i),r):{}}}Object(i.a)(r,"rulesMap",{}),Object(i.a)(r,"transform",null);let n={required:()=>({required:!0,message:a.a.t("message.home.validatorRequire")}),validator:e=>({...e}),phone:()=>({pattern:/^[\d]{1,20}$/,message:a.a.t("message.home.validatorPhone")}),email:()=>({pattern:/^([A-Za-z0-9_\-\.\w{3,}])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,message:a.a.t("message.home.validatorEmail")}),password:()=>({pattern:/^[a-zA-Z0-9!@#$%^&*()_+{}\[\]:;'"\\|,.<>?~`\-=/]{6,12}$/,message:a.a.t("message.home.validatorPassword")}),sixNumber:()=>({pattern:/^\d{6}$/,message:a.a.t("message.home.validatorSixNumber")}),fourMoreNumber:()=>({pattern:/^[0-9A-Za-z]{4,32}$/,message:a.a.t("message.home.validatorFourMoreNumber")}),decimalExceedZero:()=>({pattern:/^(([1-9]\d+)|[1-9])(\.\d{1,2})?$/,message:a.a.t("message.home.充值金额不能小于1")}),decimalSix:()=>({pattern:/^\d+(\.\d{1,10})?$/,message:a.a.t("message.home.最多包含10位小数")}),ipAddress:()=>({pattern:/^((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})(\.((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})){3}$/,message:a.a.t("message.home.validatorIpRule")}),cionAddress:()=>({pattern:/[^\u4E00-\u9FA5]/g,message:a.a.t("message.home.pleaseCorrectAddress")}),chineseAndEnglishValidate:({cStart:e=1,cEnd:t=32})=>({pattern:new RegExp(`^[\\u4E00-\\u9FA5a-z]{${e},${t}}$`,"i"),message:a.a.t("message.home.validatorChineseAndEnglish",{cStart:e,cEnd:t})})};function l(e){return Object(o.isArray)(e)?(Object.assign(this,{type:"array"}),e):null!=(e=null==e||null==(e=e.toString())?void 0:e.trim())?e:""}class d extends r{static getRule(e,t,s={}){return r.getRule(e,t,s,{rulesMap:n,transform:l})}}Object(i.a)(d,"rulesMap",n),t.a={ruleUtils:d}},"2b45":function(e,t,s){},"4ac4":function(e,t,s){var i=s("1fd3");e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:i(e)}},"6c87":function(e,t,s){s.r(t),s("1a5c"),s("247d"),s("3e8e");var i=s("6eef");i={name:"EsAddress",components:{EsAddressDialog:s("fce1").a},data(){return{loading:!0,addAdressDialogVisible:!1,currentAddressInfo:null,isAddressEdit:!1,prov:"",itemCity:""}},computed:{...Object(i.c)("user",["addressList"])},methods:{...Object(i.b)("user",["requestAddressList","requestAddressEdit","requestAddressAdd","requestAddressDel"]),async setAddressDefalut(e,t){try{this.loading=!0,t.contacts=encodeURIComponent(t.contacts),await this.requestAddressEdit({...t,use:e})}finally{this.$refs.addressPup.forEach(e=>{e.showPopper=!1}),this.loading=!1}},async delAddress(e){try{this.loading=!0,await this.requestAddressDel({id:e.id})}finally{this.loading=!1}},editAddrss(e){this.isAddressEdit=!0,this.addAdressDialogVisible=!0,this.prov=e.province||"",this.itemCity=e.city||"",this.currentAddressInfo={...e}},addAddressHandle(){this.prov="",this.itemCity="",this.isAddressEdit=!1,this.addAdressDialogVisible=!0,this.currentAddressInfo=null},goBack(){this.$router.push("/userInfo/setup")}},async mounted(){try{this.loading=!0,await this.requestAddressList()}finally{this.loading=!1}}},s("0d6a"),s=s("cea0"),s=Object(s.a)(i,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"shipping-address"},[t("div",{staticClass:"page-header"},[t("div",{staticClass:"page-title",staticStyle:{cursor:"pointer"},on:{click:e.goBack}},[t("i",{staticClass:"el-icon-arrow-left"}),e._v(" "+e._s(e.$t("message.home.shippingAddress"))+" ")]),t("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.addAddressHandle}},[e._v(e._s(e.$t("message.home.addNewAddress")))])],1),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"page-content"},[e.addressList.length?t("div",{staticClass:"address_list"},e._l(e.addressList,(function(s){return t("div",{key:s.id,staticClass:"item"},[t("div",{staticClass:"info"},[t("div",{staticClass:"name-and-mobile"},[t("span",{staticClass:"name"},[e._v(e._s(s.contacts))]),t("span",{staticClass:"mobile"},[e._v("  +"+e._s(s.phone))])]),t("el-popover",{ref:"addressPup",refInFor:!0,attrs:{placement:"bottom",width:"250",trigger:"click"}},[t("i",{staticClass:"el-icon-more",attrs:{slot:"reference"},slot:"reference"}),t("ul",{staticClass:"address-menu"},[t("li",{on:{click:function(t){return e.editAddrss(s)}}},[e._v(e._s(e.$t("message.home.edit")))]),t("li",{on:{click:function(t){return e.setAddressDefalut(1,s)}}},[e._v(" "+e._s(e.$t("message.home.markDefaultAddress"))+" ")]),t("li",{on:{click:function(t){return e.delAddress(s)}}},[e._v(" "+e._s(e.$t("message.home.delete"))+" ")])])])],1),t("div",{staticClass:"address"},[e._v(" "+e._s(s.country)+" "+e._s(s.province)+" "+e._s(s.city)+" "+e._s(s.address)+" ")])])})),0):e._e(),e.addressList.length||e.loading?e._e():t("el-empty",{attrs:{description:e.$t("message.home.noData")}})],1),t("EsAddressDialog",{key:Math.random(),attrs:{data:e.currentAddressInfo,isEdit:e.isAddressEdit,prov:e.prov,itemCity:e.itemCity},model:{value:e.addAdressDialogVisible,callback:function(t){e.addAdressDialogVisible=t},expression:"addAdressDialogVisible"}})],1)}),[],!1,null,"03db3c57",null);t.default=s.exports},"72d1":function(e,t,s){s("e360")},"9c55":function(e,t,s){s=s("bdc6");var i=Error,o=s("".replace),a=(s=String(new i("zxcasd").stack),/\n\s*at [^:]*:[^\n]*/),r=a.test(s);e.exports=function(e,t){if(r&&"string"==typeof e&&!i.prepareStackTrace)for(;t--;)e=o(e,a,"");return e}},a092:function(e,t,s){var i=s("1069"),o=s("6152");e.exports=function(e,t){i(t)&&"cause"in t&&o(e,"cause",t.cause)}},b0b4:function(e,t,s){var i=s("6152"),o=s("9c55"),a=s("c53a"),r=Error.captureStackTrace;e.exports=function(e,t,s,n){a&&(r?r(e,t):i(e,"stack",o(s,n)))}},b853:function(e,t,s){function i(e,t){var s={};s[e]=l(e,t,u),a({global:!0,constructor:!0,arity:1,forced:u},s)}function o(e,t){var s;c&&c[e]&&((s={})[e]=l(d+"."+e,t,u),a({target:d,stat:!0,constructor:!0,arity:1,forced:u},s))}var a=s("1b8c"),r=s("9005"),n=s("84dd"),l=s("1a89"),d="WebAssembly",c=r[d],u=7!==new Error("e",{cause:7}).cause;i("Error",(function(e){return function(t){return n(e,this,arguments)}})),i("EvalError",(function(e){return function(t){return n(e,this,arguments)}})),i("RangeError",(function(e){return function(t){return n(e,this,arguments)}})),i("ReferenceError",(function(e){return function(t){return n(e,this,arguments)}})),i("SyntaxError",(function(e){return function(t){return n(e,this,arguments)}})),i("TypeError",(function(e){return function(t){return n(e,this,arguments)}})),i("URIError",(function(e){return function(t){return n(e,this,arguments)}})),o("CompileError",(function(e){return function(t){return n(e,this,arguments)}})),o("LinkError",(function(e){return function(t){return n(e,this,arguments)}})),o("RuntimeError",(function(e){return function(t){return n(e,this,arguments)}}))},c53a:function(e,t,s){var i=s("a4d1"),o=s("e3fa");e.exports=!i((function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",o(1,7)),7!==e.stack)}))},d118:function(e,t,s){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return e=((e,t)=>{if("object"!=i(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0===s)return("string"===t?String:Number)(e);if("object"!=i(s=s.call(e,t||"default")))return s;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"),"symbol"==i(e)?e:e+""}function a(e,t,s){return(t=o(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"a",(function(){return a})),s("b853")},e360:function(e,t,s){},fce1:function(e,t,s){s("247d"),s("8a4a");var i=s("6eef"),o=s("bbf1"),a=(o=s.n(o),s("21f4")),r=(s("73d2"),s("e5c4")),n=s("8c1b");o={name:"EsAddress",components:{VueCountryIntl:o.a},props:{show:{type:Boolean,default:!1},data:{type:Object,default:()=>{}},isEdit:{type:Boolean,default:!1},prov:{type:String,default:""},itemCity:{type:String,default:""}},model:{prop:"show",event:"update"},data(){return{changeCounty:!1,dialogVisible:!1,infoModel:{contacts:"",email:"",phone:"",postcode:"",country:"",province:"",city:"",address:"",use:1,areaCode:n.a},isProvince:!0,isCity:!0,editC:!1,countryList:[],cities:[],provinces:[],value:"",rules:{contacts:[a.a.ruleUtils.getRule("required",""+this.$t("message.home.pleaseInput")+this.$t("message.home.consigneeName"))],email:[a.a.ruleUtils.getRule("required",""+this.$t("message.home.pleaseInput")+this.$t("message.home.orderEmail")),a.a.ruleUtils.getRule("email")],phone:[a.a.ruleUtils.getRule("required",""+this.$t("message.home.pleaseSetMobileNumber")),a.a.ruleUtils.getRule("phone")],areaCode:[a.a.ruleUtils.getRule("required",""+this.$t("message.home.pleaseInput")+this.$t("message.home.pleaseSetAreaCode"))],country:[a.a.ruleUtils.getRule("required",""+this.$t("message.home.pleaseInput")+this.$t("message.home.nation"))],province:[a.a.ruleUtils.getRule("required",""+this.$t("message.home.pleaseInput")+this.$t("message.home.state"))],city:[a.a.ruleUtils.getRule("required",""+this.$t("message.home.pleaseInput")+this.$t("message.home.city"))],postcode:[a.a.ruleUtils.getRule("required",""+this.$t("message.home.pleaseInput")+this.$t("message.home.postCode")),a.a.ruleUtils.getRule("fourMoreNumber")],address:[a.a.ruleUtils.getRule("required",""+this.$t("message.home.pleaseInput")+this.$t("message.home.address"))]},loading:!1}},watch:{dialogVisible(e,t){e!==t&&this.$emit("update",e)},show(e,t){if(e!==t&&(this.dialogVisible=e),!e)for(var s in this.infoModel)this.infoModel[s]="use"===s?0:"areaCode"===s?n.a:""},data:{handler(e,t){var s;e&&Object.keys(e)&&(e.phone?(s=e.phone.split(" "),this.infoModel={...e,phone:s[1],areaCode:s[0]}):this.infoModel={...e})},immediate:!0},"infoModel.country":{handler(e,t){this.infoModel.province="",this.getProvinceList(e)}},"infoModel.province":{handler(e,t){0<this.provinces.length&&(this.infoModel.city=""),this.infoModel.province&&this.getCityList(e)}}},created(){},mounted(){this.dialogVisible=this.show,this.infoModel||this.getCountry(),this.editC=this.isEdit},methods:{...Object(i.b)("user",["requestAddressAdd","requestAddressEdit"]),async getCountry(){this.changeCounty=!0,this.editC=!1,this.isCity=!1;var e=await Object(r.s)();this.countryList=(null==(e=e.data)?void 0:e.data)||[]},getCountryList(){0==this.countryList.length&&this.getCountry()},async getProvinceList(e){this.infoModel.city="";e=await Object(r.t)({countryId:e});this.provinces=(null==(e=e.data)?void 0:e.data)||[],this.cities=[],this.isProvince=!0,this.isCity=!0,0==this.provinces.length&&(this.isProvince=!1,this.isCity=!1)},async getCityList(e){e&&(e=await Object(r.r)({stateId:e}),this.cities=(null==(e=e.data)?void 0:e.data)||[],this.isCity=!0),0==this.cities.length&&(this.isCity=!1)},add(){this.$refs.addressForm.validate(async e=>{if(this.infoModel.contacts=encodeURIComponent(this.infoModel.contacts),e)try{this.loading=!0;var t,s,i,o,a,r,n,l,d,c,u,m,f,p,h={...this.infoModel,countryId:null!=(t=null!=(s=null==(i=this.countryList.find(e=>e.id==this.infoModel.country))?void 0:i.id)?s:this.infoModel.countryId)?t:0,country:null!=(o=null!=(a=null==(r=this.countryList.find(e=>e.id==this.infoModel.country))?void 0:r.countryName)?a:this.infoModel.country)?o:"",province:null!=(n=null==(l=this.provinces.find(e=>e.id===this.infoModel.province))?void 0:l.stateName)?n:"",provinceId:null!=(d=null==(c=this.provinces.find(e=>e.id===this.infoModel.province))?void 0:c.id)?d:0,cityId:null!=(u=null==(m=this.cities.find(e=>e.id==this.infoModel.city))?void 0:m.id)?u:0,city:null!=(f=null==(p=this.cities.find(e=>e.id==this.infoModel.city))?void 0:p.cityName)?f:"",phone:this.infoModel.areaCode+" "+this.infoModel.phone};""==h.province&&delete h.province,""==h.city&&delete h.city,this.isEdit?await this.requestAddressEdit(h):await this.requestAddressAdd(h),this.$message({type:"success",message:this.$t("message.home.operationSuccess")}),this.dialogVisible=!1}finally{this.loading=!1}})}}},s("72d1"),i=s("cea0"),s=Object(i.a)(o,(function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{"custom-class":"es-dialog",visible:e.dialogVisible,center:!0,"close-on-press-escape":!1,"close-on-click-modal":!1,"append-to-body":!0,"destroy-on-close":!0,width:"600px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[t("span",[e._v(e._s(e.$t("message.home.addAddress"))+"/"+e._s(e.$t("message.home.modifyAddress")))])]),t("div",{staticClass:"add-address-content"},[t("el-form",{ref:"addressForm",attrs:{model:e.infoModel,rules:e.rules}},[t("el-form-item",{attrs:{prop:"contacts"}},[t("el-input",{attrs:{placeholder:e.$t("message.home.consigneeName"),maxlength:64},model:{value:e.infoModel.contacts,callback:function(t){e.$set(e.infoModel,"contacts",t)},expression:"infoModel.contacts"}})],1),t("el-form-item",{attrs:{prop:"email"}},[t("el-input",{attrs:{placeholder:e.$t("message.home.orderEmail"),maxlength:64},model:{value:e.infoModel.email,callback:function(t){e.$set(e.infoModel,"email",t)},expression:"infoModel.email"}})],1),t("el-form-item",{attrs:{prop:"phone"}},[t("div",{staticClass:"form-phone"},[t("el-input",{attrs:{placeholder:e.$t("message.home.pleaseSetMobileNumber"),maxlength:20},model:{value:e.infoModel.phone,callback:function(t){e.$set(e.infoModel,"phone",t)},expression:"infoModel.phone"}}),t("VueCountryIntl",{attrs:{schema:"popover",searchInputPlaceholder:e.$t("message.home.pleaseSetAreaCode"),noDataText:"No data found"},model:{value:e.infoModel.areaCode,callback:function(t){e.$set(e.infoModel,"areaCode",t)},expression:"infoModel.areaCode"}},[t("div",{staticClass:"area-code flex-between",attrs:{slot:"reference"},slot:"reference"},[t("span",[e._v("+"+e._s(e.infoModel.areaCode||""))]),t("i",{staticClass:"el-icon-caret-bottom"})])])],1)]),t("div",{staticClass:"check_address"},[t("el-form-item",{attrs:{prop:"country"}},[t("el-select",{attrs:{placeholder:e.$t("message.home.nation"),filterable:""},on:{focus:function(t){return e.getCountryList()}},model:{value:e.infoModel.country,callback:function(t){e.$set(e.infoModel,"country",t)},expression:"infoModel.country"}},e._l(e.countryList,(function(s){return t("el-option",{key:s.id,attrs:{value:s.id,label:s.countryName}},[t("span",[e._v(e._s(s.countryName))])])})),1)],1),t("el-form-item",[t("div",{staticClass:"prov-city"},[e.prov&&e.editC?t("div",[e._v(e._s(e.prov))]):e._e(),e.itemCity&&e.editC?t("div",[e._v(e._s(e.itemCity))]):e._e()])]),!e.editC&&e.isProvince?t("el-form-item",{attrs:{prop:"province"}},[t("el-select",{attrs:{placeholder:e.$t("message.home.state"),filterable:""},model:{value:e.infoModel.province,callback:function(t){e.$set(e.infoModel,"province",t)},expression:"infoModel.province"}},e._l(e.provinces,(function(s){return t("el-option",{key:s.id,attrs:{label:s.stateName,value:s.id}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(s.stateName))])])})),1)],1):e._e(),!e.editC&&e.isCity?t("el-form-item",{attrs:{prop:"city"}},[t("el-select",{attrs:{placeholder:e.$t("message.home.city"),filterable:""},model:{value:e.infoModel.city,callback:function(t){e.$set(e.infoModel,"city",t)},expression:"infoModel.city"}},e._l(e.cities,(function(s){return t("el-option",{key:s.id,attrs:{label:s.cityName,value:s.id}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(s.cityName))])])})),1)],1):e._e()],1),t("el-form-item",{attrs:{prop:"postcode"}},[t("el-input",{attrs:{placeholder:e.$t("message.home.postCode"),maxlength:32},model:{value:e.infoModel.postcode,callback:function(t){e.$set(e.infoModel,"postcode",t)},expression:"infoModel.postcode"}})],1),t("el-form-item",{attrs:{prop:"address"}},[t("el-input",{attrs:{placeholder:e.$t("message.home.address"),type:"textarea",rows:4,maxlength:255},model:{value:e.infoModel.address,callback:function(t){e.$set(e.infoModel,"address",t)},expression:"infoModel.address"}})],1),t("el-form-item",[t("div",{staticClass:"flex-between"},[t("span",[e._v(e._s(e.$t("message.home.desc")))]),t("el-switch",{attrs:{"active-color":"var(--color-main)","inactive-color":"#ECECEC","active-value":1,"inactive-value":0},model:{value:e.infoModel.use,callback:function(t){e.$set(e.infoModel,"use",t)},expression:"infoModel.use"}})],1)]),t("el-form-item",[t("div",{staticClass:"submit-btn flex-center"},[t("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.add}},[e._v(" "+e._s(e.$t("message.home.btnSure"))+" ")])],1)])],1)],1)])}),[],!1,null,null,null);t.a=s.exports}}]);
import{_ as z,d as Y,u as F,ai as B,r as g,S as W,cL as J,ac as N,b4 as M,al as O,I as G,c as A,s as K,w as Z,q as D,a as r,e as H,t as c,F as Q,p as X,h as j,T as R,b1 as q,o as d,f as $,cM as ee,an as se,cN as te,cl as ae,b7 as ne,b8 as a}from"./index-9fb53779.js";import{m as oe}from"./config-5322613d.js";const re=Y({name:"MessageList",setup(){const{t:s,locale:f}=F(),w=B(),L=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAtCAYAAAA6GuKaAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAdVSURBVHgB5VldiFxnGX7e75wzZ2Z2drubTTabbZM0NoGUhlTQi6CiFisoRQhKiqJSBHvdm0K9UCklIL0R9EKK4E/ACqUgSK2CUoVetVFrkKiFNLVbE5Ls7mRmZ3dnzsz5+XzeM5lNMtmZPWd22l70gWFmznw/z/d+78/zfSMYA6y15uI17PYNpoyHyciinAhcBEDBIOwImuJhtVZH7bdn0Hj6aUmwAwh2gPP/tfNTU/iiTfAJ38NhI3afY7BLRCa5FB9WrBUEXNRqHKMaxXI5TnDeCH5fjfD6g/OygRGQm/Tysp1sWjzou/imMfis69i7Cy58/uT2BpO+Ua298c5XkiDqxFjvRHjHEflVFOPlhVm8zYV2kBG5SC9W7QPc7m85xn6DpPe6zuhbpQsh+aQTyT9jizOh4MzBaall6ZtpzsW6nZEQX/UcPFH27WHXwJEdOdZNpOQjxM1QznIrnlzYhddo9aE+v+3U7yzbfbTosyXPniq6KI6LbD8Skm91pNaM8ExrGT87elTWBrUdSuHikj1SdHC65Nuv+M74rDsIXeJYDSL5cWTww0MzUt+q3UAa/yNhcfBcxbcPMdDeY7o3oe7SCmFJ/Hv1CD86Nifr/W3MVh2rVTsFB89MkLD3PhJW6G6WChAG+pPTDr7NdOn2t7mDNBtJy+KpcsGeZEd5XxnfgM7JGJrm/N+/tIJPbvX7bbhUtSfoDi+R9G4zAmMuGmGUoMOUoFvtMor9ggMzwmDq4/WmvGabeGT/frm+JWktHB1jfzNZwsOuyTeBkm23I9TX2mhrAk66FUW3yuNgkxMFTPDlmHwD07fbQYjvXJ/GT47dKEC3jRAIHqY/nchLWNFk9Cxd30jfY9ZqXYS+lLwuYqXWQm01QJzkkx2+Y31H7GOVKu7rPdukd7lq93Mnv86drCAn2nQFJRVFdmi7Bndhbb2TLiYrdKforsc9wSn0k46B+1nxPm9GcIvVRpBaNwsaawF9PjtphYYEDfrlN+m++n2TIh9+xnOY6nIiIlnd/uzt1V1C5EFqbccu0AU+rd9T0n9hLjQJPueM4MsxSSQ2n+WiKL+cdo3MsNdDmpJTmoeXca9x+fogknJGiLGu4+Do2zUeNPRBbHCcYriEEaD51+QsQe4IW6ozMObucQS7ur0tPmKM9TACPC0efvauDgn7xRGmImuejOYci0pKmhljgR98jAA18vSkT+tJhraCu6Z8Wmw0S7P7FBPPRNqbYTRJ4iN7dIE5addMeVviFVZErYyjChrVUpyikCooBr9L5rITPVcpF1JX0ZzdZN2FvTmTlvG7KkWUy95IGuQW0umoKWmyX9OKiwFSNStUGO2ZLaeCqVdslKSKJmcMqcmKtA31WEqaw1/nUV8z/kh+fSvUbwsMcw31cYM6phm3JewGouBCHEsbY4LuYU8w2ZyFZ+CYVseVFcdDI7U0Bd/F2EOLH3OXcYW6QkBZ2nMLLdU9suoUhtlCg1SrgwZtwTPpjuQiDZUAWA5i1FPSYQvnnIKt82CzN+tYWoo14Daandv0cxao7xeZqysMTHWlLAtQRUsx+Z839qKausehQxLQ9GczCjVq5g6urayjSjnaCqJchBW6SM0ySysbWKXqy9KfNtrg5p19VCTezBY0/R86iQRZJlTtrO879Vd1p3qjzffhKvHGbdQlNn9Jv2+SFou/0tLntlt0GMapshsXusE6vI2KwiSWVw/Py5J+3yS9f07eCiO8wCCKhg2ggZSlZGfFdv6s62nHuEY9+uves9uKiV/EC0Fk3hxmbQ2cPbMTKJe83BmgHx7Hmp0udfP6APCKOI5CeX41wt97z+68QqjZx8qefU7v7TAE3RNLxKCMmO7C1GVubnP/qrvTSKrUuspQS3qJGUQ/D1q7jtdoy7thgEcOzMv53vM7bm+kiReDknyBHnCKx6+BJlBN7PLoPsFXLzd3GC162tZs0F2ATQkLmWoZ1/ysOsRxnG1Fk/ZnTm7xZPaDg7cQ3pL0wgJa717F6abgSKWAjzkZqrFqZG2n+Xdc0PXzFvXFtWv4ef9vA9e7uGQ/VfDwS97n3efuSEblg1o45K6tB+Z3hSIen6vI1f42A+kc2IPXWZmf2Gjhapz/HDoyNP2vt82fHR9PbUVYMZA0M0N4cDf+GFk5ud6WN8JEOnZ86fkO6NjNEEGzLb+IHTy+b1L+Pahttr8vrtgHvBK+y4xykvcPxXGf2rUgUg2sdGL5acni2dlZaQxrn3n6v1225Xkfp1zeGxc9e5SJwN1JmlbLqtcxO2y0Y3lFYpy+3Ma/Pn4389c2yD3t4rJdYHX6Gi3+KCvjcbW8nlOzDqRktSyz+jaodV5h8XieF59/OrKNdXdEWnHBWt8s4wD/njvmusmXkJgT3IE53m4WuIAi18BEnMaLnjzTNM4/SIPQokmSV+JEXmWLl3la+sc9U6gxfnJFy1i888IF67sz+Ciz9P10mXtZW2Y5cIVWVfm2zhi4wtP+IqvCuYVJvEWSET5s+D9iVSwrDKY0+AAAAABJRU5ErkJggg==",self.location),S=new URL("/wap/png/name-b2bb3866.png",self.location),y=g([]),_=g(!0),v=g(0),i=async t=>{const n=[];for(let o=0;o<t.length;o++){const e={...t[o]},l=new Date().getTime(),u=M(e.updatetime,"YYYY-MM-DD HH:mm"),I=new Date(u).getTime(),m=u.slice(u.indexOf(" ")+1),p=(l-I)/1e3;let E="";p<60?E=s("\u521A\u521A"):p<60*60*24?E=m:E=u,e.showTime=E,e.count=e.unreadmsg>99?99:e.unreadmsg,T.value?(e.showName=ae(e.username,!1,!0),t[o].useravatar&&!isNaN(Number(t[o].useravatar))?await ne(Object.assign({"../../../assets/image/userAvatar/1.png":()=>a(()=>import("./1-843e9a86.js"),[]),"../../../assets/image/userAvatar/10.png":()=>a(()=>import("./10-68b151fa.js"),[]),"../../../assets/image/userAvatar/11.png":()=>a(()=>import("./11-6bb76e30.js"),[]),"../../../assets/image/userAvatar/12.png":()=>a(()=>import("./12-5d77566e.js"),[]),"../../../assets/image/userAvatar/13.png":()=>a(()=>import("./13-14b88d4e.js"),[]),"../../../assets/image/userAvatar/14.png":()=>a(()=>import("./14-13f93f47.js"),[]),"../../../assets/image/userAvatar/15.png":()=>a(()=>import("./15-c2ec18db.js"),[]),"../../../assets/image/userAvatar/16.png":()=>a(()=>import("./16-cee370eb.js"),[]),"../../../assets/image/userAvatar/17.png":()=>a(()=>import("./17-4b8e6b97.js"),[]),"../../../assets/image/userAvatar/18.png":()=>a(()=>import("./18-a4f23918.js"),[]),"../../../assets/image/userAvatar/19.png":()=>a(()=>import("./19-78b0d2ff.js"),[]),"../../../assets/image/userAvatar/2.png":()=>a(()=>import("./2-d0167802.js"),[]),"../../../assets/image/userAvatar/20.png":()=>a(()=>import("./20-70164051.js"),[]),"../../../assets/image/userAvatar/3.png":()=>a(()=>import("./3-5a82f83d.js"),[]),"../../../assets/image/userAvatar/4.png":()=>a(()=>import("./4-61a76692.js"),[]),"../../../assets/image/userAvatar/5.png":()=>a(()=>import("./5-1b85492f.js"),[]),"../../../assets/image/userAvatar/6.png":()=>a(()=>import("./6-9e630442.js"),[]),"../../../assets/image/userAvatar/7.png":()=>a(()=>import("./7-0cbda3a0.js"),[]),"../../../assets/image/userAvatar/8.png":()=>a(()=>import("./8-101124c4.js"),[]),"../../../assets/image/userAvatar/9.png":()=>a(()=>import("./9-a871dcec.js"),[]),"../../../assets/image/userAvatar/default.png":()=>a(()=>import("./default-13d95ab4.js"),[])}),`../../../assets/image/userAvatar/${t[o].useravatar}.png`).then(U=>{e.avatarImg=U.default,n.push(e)}):(e.avatarImg="",n.push(e))):(e.showName=e.username,e.avatarImg=t[o].avatar||"",n.push(e))}return n},P=()=>{_.value&&R.loading({duration:0}),ee({loginType:T.value?"shop":"user"}).then(async t=>{const n=t||[];y.value=await i(n),N(()=>{_.value=!1})}).catch(()=>{_.value=!1})},C=t=>{O({path:"/messageCenter",query:{partyId:t.partyid,username:t.showName}})},V=(t,n)=>{const e=(t.varInfo?JSON.parse(t.varInfo):[]).find(l=>l.code===n);return e?e.value:""},x=(t,n)=>{const e=(t.varInfo?JSON.parse(t.varInfo):[]).find(l=>l.code===n);return e?e.value:"0"},h=g({content:"",count:0,time:""}),k=()=>{se({type:3}).then(n=>{const o=n.count||0;h.value.count=o>99?"99+":o}),te({pageSize:1,lastLocation:0,type:3,status:0,module:0}).then(n=>{if((n||[]).length){const e=n[0],l=e.varInfo?JSON.parse(e.varInfo):[],u=oe[e.bizType],I=l.find(p=>p.code===u.key);let m="";if(["inbox_recharge_success","inbox_withdraw_success"].includes(e.bizType)){const p=e.bizType==="inbox_recharge_success"?"rechargeSuccessTips":"withdrawalSuccessTips";m=s(p,{orderAmount:x(e,"orderAmount")})}else["inbox_store_audit_fail","inbox_store_audit_success"].includes(e.bizType)?m=e.bizType==="inbox_store_audit_fail"?s("storeAuthenticationFailedTips",{shop_name:V(e,"shop_name"),reason:V(e,"reason")}):s("storeAuthenticationPassedTips",{shop_name:V(e,"shop_name")}):u.key?(m=s(u.txt)+(I?I.value:"0"),u.txt1&&(m+=s(u.txt1))):m=s(u.txt);h.value.content=m,h.value.time=e.sendTime}})};W(_,t=>{!t&&!v.value&&(v.value=setInterval(()=>{P()},5e3))}),J(()=>{v.value&&clearInterval(v.value)});const b=g(!1),T=g(!0);return N(async()=>{const{token:t,nohead:n,lang:o}=w.query,e=j();o&&(f.value=o,localStorage.setItem("lang",o)),t&&(b.value=Boolean(n),R.loading({duration:0}),await e.getUserInfo(!0,t)),T.value=!0,P(),k()}),{t:s,isShop:T,shopDefault:L,userDefault:S,pageLoading:_,listData:y,sysMsgInfo:h,headHide:b,goToDetails:C,formatZoneDate:M,openPage:O}}}),ie={class:"page-main-content"},ue={key:1,style:{height:"46px"}},ce={class:"list-content"},me={class:"avatar sys"},_e={class:"flex info-content"},le={key:0,class:"num"},de={class:"flex txt-content"},ve={class:"txt"},pe={class:"time"},ge=["onClick"],Ae={class:"avatar"},fe=["src"],he={class:"flex info-content"},Te={key:0,class:"num"},Ie={class:"flex txt-content"},Ee={class:"txt"},De={class:"time"};function ye(s,f,w,L,S,y){const _=q,v=G;return d(),A("div",ie,[s.headHide?D("v-if",!0):(d(),K(_,{key:0,fixed:!0},{title:Z(()=>[$(c(s.$t("\u6D88\u606F")),1)]),_:1})),s.headHide?D("v-if",!0):(d(),A("div",ue)),r("div",ce,[r("div",{class:"item-list",onClick:f[0]||(f[0]=i=>s.openPage("/message/system"))},[r("div",me,[H(v,{name:"bell",class:"icon"})]),r("div",_e,[r("h3",null,c(s.t("\u7CFB\u7EDF\u6D88\u606F")),1),s.sysMsgInfo.count?(d(),A("p",le,c(s.sysMsgInfo.count),1)):D("v-if",!0)]),r("div",de,[r("p",ve,c(s.sysMsgInfo.content||"-"),1),r("p",pe,c(s.formatZoneDate(s.sysMsgInfo.time,"YYYY-MM-DD HH:mm")),1)])]),(d(!0),A(Q,null,X(s.listData,i=>(d(),A("div",{key:i.id,class:"item-list",onClick:P=>s.goToDetails(i)},[r("div",Ae,[r("img",{src:i.avatarImg||(s.isShop?s.userDefault.href:s.shopDefault.href),alt:""},null,8,fe)]),r("div",he,[r("h3",null,c(i.showName||"-"),1),i.count?(d(),A("p",Te,c(i.count),1)):D("v-if",!0)]),r("div",Ie,[r("p",Ee,c(i.content||"-"),1),r("p",De,c(i.showTime),1)])],8,ge))),128))])])}const we=z(re,[["render",ye],["__scopeId","data-v-47006325"],["__file","/Users/wangjun/Downloads/mall-app-h5/src/views/message/list/index.vue"]]);export{we as default};

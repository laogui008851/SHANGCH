import{_ as V,d as C,u as N,g as P,r as v,c as a,e as k,w as L,b1 as D,o as n,f as O,t as u,b as s,F as z,p as R,a as d,n as $,q as x,s as B,P as E,Q as U,cN as F,cO as j,al as q,cP as J}from"./index-9fb53779.js";import{P as Q}from"./index-dc05bc00.js";import{L as G}from"./index-4db31f13.js";import{E as K}from"./index-1457b1a8.js";import{m as c}from"./config-5322613d.js";import"./use-id-1cc1e85b.js";const W=h=>(E("data-v-8d741b7f"),h=h(),U(),h),X={class:"page-main-content"},Y=W(()=>d("div",{style:{height:"46px"}},null,-1)),Z={key:0,class:"list-content"},ee=["onClick"],se={class:"title-content"},te={class:"title"},ne={key:0,class:"txt"},ae=["innerHTML"],oe=["innerHTML"],le=["innerHTML"],ie=["innerHTML"],re=["innerHTML"],ce={key:0},ue={key:1,class:"txt"},de=C({name:"MessageSystem"}),pe=Object.assign(de,{setup(h){const{t:o}=N(),w=P(),M=new URL("/wap/png/name-20d65991.png",self.location),_=v([]),y=v(!1),p=v(!0),m=v(!1),f=v({pageSize:20,lastLocation:0}),S=()=>{const t={...f.value,type:3,status:0,module:0};F(t).then(i=>{const l=i||[];l.forEach(r=>{r.timeStr=j(r.sendTime,!0)}),_.value=f.value.lastLocation===0?l:[..._.value,...l],l.length&&(f.value.lastLocation=l[l.length-1].location),p.value=!1,y.value=!1,l.length<f.value.pageSize&&(m.value=!0)}).catch(()=>{m.value=!0,p.value=!1,y.value=!1})},A=()=>{m.value=!1,p.value=!0,f.value.lastLocation=0,S()},I=t=>{q({path:"/message/details",query:{id:t.id}}),t.status!==2&&J({ids:t.id}).then(()=>{t.status=2})},T=(t,i)=>{const r=(t.varInfo?JSON.parse(t.varInfo):[]).find(g=>g.code===i);return r?r.value:"0"},b=(t,i)=>{const r=(t.varInfo?JSON.parse(t.varInfo):[]).find(g=>g.code===i);return r?r.value:""};return(t,i)=>{const l=D,r=K,g=G,H=Q;return n(),a("div",X,[k(l,{fixed:!0},{title:L(()=>[O(u(t.$t("\u7CFB\u7EDF\u6D88\u606F")),1)]),_:1}),Y,k(H,{modelValue:y.value,"onUpdate:modelValue":i[1]||(i[1]=e=>y.value=e),"loading-text":t.$t("\u52A0\u8F7D\u4E2D"),"loosing-text":t.$t("\u91CA\u653E\u4EE5\u5237\u65B0"),"pulling-text":t.$t("\u4E0B\u62C9\u4EE5\u5237\u65B0"),onRefresh:A},{default:L(()=>[k(g,{loading:p.value,"onUpdate:loading":i[0]||(i[0]=e=>p.value=e),finished:m.value,"loading-text":s(o)("loading"),"finished-text":s(o)("product.3"),onLoad:S},{default:L(()=>[_.value.length?(n(),a("div",Z,[(n(!0),a(z,null,R(_.value,e=>(n(),a("div",{key:e.id,class:"item-list",onClick:_e=>I(e)},[d("div",se,[d("div",te,[e.status===1?(n(),a("div",{key:0,class:$(["tips",{"is-ar":s(w)}])},null,2)):x("v-if",!0),d("p",null,u(s(o)(s(c)[e.bizType].title)),1)]),d("p",null,u(e.timeStr),1)]),s(c)[e.bizType].key?(n(),a("p",ne,[s(c)[e.bizType].key==="creditScore"?(n(),a("span",{key:0,innerHTML:s(o)("systemMsgScore",{creditScore:T(e,s(c)[e.bizType].key)})},null,8,ae)):e.bizType==="inbox_recharge_success"?(n(),a("span",{key:1,innerHTML:s(o)("rechargeSuccessTips",{orderAmount:T(e,"orderAmount")})},null,8,oe)):e.bizType==="inbox_withdraw_success"?(n(),a("span",{key:2,innerHTML:s(o)("withdrawalSuccessTips",{orderAmount:T(e,"orderAmount")})},null,8,le)):e.bizType==="inbox_store_audit_fail"?(n(),a("span",{key:3,innerHTML:s(o)("storeAuthenticationFailedTips",{shop_name:b(e,"shop_name"),reason:b(e,"reason")})},null,8,ie)):e.bizType==="inbox_store_audit_success"?(n(),a("span",{key:4,innerHTML:s(o)("storeAuthenticationPassedTips",{shop_name:b(e,"shop_name")})},null,8,re)):(n(),a(z,{key:5},[d("span",null,u(s(o)(s(c)[e.bizType].txt)),1),d("span",null,u(T(e,s(c)[e.bizType].key)),1),s(c)[e.bizType].txt1?(n(),a("span",ce,u(s(o)(s(c)[e.bizType].txt1)),1)):x("v-if",!0)],64))])):(n(),a("p",ue,u(s(o)(s(c)[e.bizType].txt)),1))],8,ee))),128))])):x("v-if",!0),!_.value.length&&!p.value?(n(),B(r,{key:1,image:s(M).href},null,8,["image"])):x("v-if",!0)]),_:1},8,["loading","finished","loading-text","finished-text"])]),_:1},8,["modelValue","loading-text","loosing-text","pulling-text"])])}}}),Te=V(pe,[["__scopeId","data-v-8d741b7f"],["__file","/Users/wangjun/Downloads/mall-app-h5/src/views/message/system/index.vue"]]);export{Te as default};

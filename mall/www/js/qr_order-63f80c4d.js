import{_ as Q,g as W,c5 as H,h as J,u as X,ai as Y,r as n,k as x,m as Z,T as h,ca as ee,cb as se,S as te,c as p,e as f,w as I,a as e,F as oe,p as ae,b as a,n as O,t as s,f as y,q as N,aW as P,b1 as le,o as v,aG as c,P as ne,Q as re,cc as ue}from"./index-b92e7abb.js";import{B as ie}from"./index-2daf6026.js";import{A as ce}from"./index-07a8fa62.js";import{P as de,N as _e}from"./index-b73fdc3e.js";const pe=g=>(ne("data-v-7f0433a8"),g=g(),re(),g),ve=pe(()=>e("div",{style:{height:"46px"}},null,-1)),me={class:"listitem"},he={class:"pic"},fe=["src"],ge={class:"name"},ye={class:"title"},we={class:"col"},$e={class:"title money"},be={class:"line"},Ie={class:"line-item"},Ne={class:"count"},Pe={class:"line-item"},Se={class:"count"},ke={key:0,class:"price-content"},De={class:"line-item"},Le={class:"count"},qe={class:"line-item"},Ce={class:"count"},Ve={class:"line-item"},Be={class:"count"},xe={class:"line-item"},Oe={class:"count"},Te={class:"line-item"},Ae={class:"count"},Ee={style:{height:"22rem"}},Fe={key:1,class:"btn"},Ue={__name:"qr_order",setup(g){const S=W(),T=H(),A=J(),{t:m}=X(),k=Y();let i=n(!0),D=n(0),E=n(0),F=n(0),U=n(0),w=n([]),L=n(0),q=n(0);const d=n("");let _=n(!1);const $=n(!0),j=x(()=>{var t;return(t=A.userInfo)==null?void 0:t.safeword}),z=()=>{j.value?(_.value=!0,i.value=!0):(h(m("\u8BF7\u8BBE\u7F6E\u8D44\u91D1\u5BC6\u7801")),setTimeout(()=>{router.push({path:"/fundsPasswordSettings"})},1500))};Z(()=>{C()});const C=()=>{R()},o=n({}),R=async()=>{$.value=!0;const t=k.query.id;h.loading({duration:0,message:m("loading"),forbidClick:!0}),await ee({orderId:t}).then(l=>{w.value=l.pageList,w.value.forEach(u=>{D.value+=u.systemPrice,E.value+=u.goodsNum,L.value+=u.fees,q.value+=u.tax,F.value+=u.profit}),U.value=D.value+L.value+q.value}),await se({orderId:t}).then(l=>{o.value=l.orderInfo,$.value=!1,h.clear()}).catch(()=>{h.clear()})},K=()=>{const l={orderId:k.query.id,safeword:d.value};ue(l).then(u=>{C(),T.decrement(),document.dispatchEvent(new CustomEvent("reloadOrderList")),setTimeout(()=>{router.push({path:"/passsuess",query:{id:l.orderId}})},1e3)})};te(()=>d.value,t=>{t.length===6&&(h.loading(""),K(),_.value=!1,d.value="")});const V=x(()=>{c((o.sellerDiscountPrice?o.sellerDiscountPrice:o.systemPrice)/1+o.fees/1+o.tax/1);const{sellerDiscountPrice:t,systemPrice:l,fees:u,tax:b}=o.value;return c(Number(t||l)+Number(u)+Number(b))});return(t,l)=>{const u=le,b=de,B=_e,G=ce,M=ie;return v(),p("div",null,[f(u,{fixed:""},{title:I(()=>[y(s(t.$t("\u91C7\u8D2D\u786E\u8BA4")),1)]),_:1}),ve,e("div",{class:O(["list",{"is-ar":a(S)}])},[(v(!0),p(oe,null,ae(a(w),r=>(v(),p("div",me,[e("div",he,[e("img",{style:{"object-fit":"contain"},src:r.goodsIcon},null,8,fe)]),e("div",ge,[e("p",ye,s(r.goodsName),1),e("p",we,s(t.$t("\u91C7\u8D2D\u6570\u91CF")),1),e("p",$e,"$"+s(a(c)(r.systemPrice)),1),e("span",null,"x"+s(r.goodsNum),1)])]))),256))],2),Object.keys(o.value).length>0?(v(),p("div",{key:0,class:O(["line-content",{"is-ar":a(S)}])},[e("div",be,[e("div",Ie,[e("p",null,s(t.$t("\u4E70\u5BB6\u4ED8\u6B3E")),1),e("p",Ne,"$"+s(a(c)(o.value.prizeReal)),1)]),e("div",Pe,[e("p",null,s(t.$t("\u91C7\u8D2D\u91D1\u989D")),1),e("p",Se,"$"+s(a(c)(o.value.systemPrice)),1)]),o.value.sellerDiscountPrice?(v(),p("div",ke,[y(s(a(m)("\u4F18\u60E0\u4EF7")),1),e("span",null,"$"+s(a(c)(o.value.sellerDiscountPrice)),1),y(", "+s(a(m)("\u91C7\u8D2D\u4F18\u60E0")),1),e("span",null,s(Number(o.value.sellerDiscount)*100)+"%",1)])):N("v-if",!0),e("div",De,[e("p",null,s(t.$t("\u91C7\u8D2D\u6570\u91CF")),1),e("p",Le,s(o.value.goodsCount),1)]),e("div",qe,[e("p",null,s(t.$t("\u5229\u6DA6")),1),e("p",Ce,"$"+s(a(c)(o.value.profit)),1)]),e("div",Ve,[e("p",null,s(t.$t("\u8FD0\u8D39")),1),e("p",Be,"$"+s(a(c)(o.value.fees)),1)]),e("div",xe,[e("p",null,s(t.$t("\u7A0E")),1),e("p",Oe,"$"+s(a(c)(o.value.tax)),1)]),e("div",Te,[e("p",null,s(t.$t("\u5408\u8BA1")),1),e("p",Ae,"$"+s(a(V)),1)])])],2)):N("v-if",!0),f(G,{show:a(_),"onUpdate:show":l[3]||(l[3]=r=>P(_)?_.value=r:_=r),title:a(m)("\u8BF7\u8F93\u5165\u4EA4\u6613\u5BC6\u7801")},{default:I(()=>[e("div",Ee,[f(b,{length:6,value:d.value,focused:a(i),onFocus:l[0]||(l[0]=r=>P(i)?i.value=!0:i=!0)},null,8,["value","focused"]),f(B,{modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=r=>d.value=r),show:a(i),onBlur:l[2]||(l[2]=r=>P(i)?i.value=!1:i=!1)},null,8,["modelValue","show"])])]),_:1},8,["show","title"]),!$.value&&o.value.purchStatus/1!==1&&o.value.status/1!==-1&&o.value.status/1!==0&&o.value.status/1!==6?(v(),p("div",Fe,[f(M,{type:"primary",size:"large",onClick:z},{default:I(()=>[y(s(`${t.$t("\u7ACB\u5373\u652F\u4ED8")} $${a(V)}`),1)]),_:1})])):N("v-if",!0)])}}},Ge=Q(Ue,[["__scopeId","data-v-7f0433a8"],["__file","/Users/wangjun/Downloads/mall-app-h5/src/views/order/qr_order.vue"]]);export{Ge as default};

"use strict";(self["webpackChunkbk_pc"]=self["webpackChunkbk_pc"]||[]).push([[974],{89:function(e,l){l.Z=(e,l)=>{const a=e.__vccOpts||e;for(const[t,o]of l)a[t]=o;return a}},3974:function(e,l,a){a.r(l),a.d(l,{default:function(){return B}});a(7658);var t=a(3396),o=a(7139),u=a(4870),n=a(2748),d=a(6243),i=a(2483),s=a(2655),r=a(7178),c=a(814),m=a(1073),p=a(4311),v=a(5658);const g={class:"commodity-library"},h={class:"font-18"},f={class:"mt-15 select-wrapper"},w={class:"font-14"},y={style:{padding:"5px"}},b={style:{padding:"5px"}},_={class:"my-30"},k={class:"result"},$={class:"font-14"},W={style:{display:"flex","align-items":"center","justify-content":"center",overflow:"hidden",height:"80px"}},C={class:"image-slot"},x={style:{overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical"}},S=["onClick"],z={class:"flex"},V={class:"flex align-center flex-col mr-15"},I={key:0,class:"flex align-center flex-col"},U={key:0,class:"flex justify-center mt-40"},H={class:"font-16"},D={class:"mt-40"},T={class:"font-16"},j={class:"dialog-footer"};var N={__name:"CommodityLibrary",setup(e){const{t:l}=(0,v.QT)(),a=(0,i.tv)(),N=(0,u.iH)(null),Z=(0,u.iH)(!0),F=(0,u.iH)("en"),B=(0,u.iH)({commodityId:"",commodityName:"",categoryId:"",state:"",isShelf:"",updateStatus:"",secondaryCategoryId:""}),O=(0,u.iH)([{value:"",label:l("全部")},{value:"0",label:l("未锁定")},{value:"1",label:l("已锁定")}]),Y=(e,l)=>{a.push({path:e,query:{id:l.id}})},q=()=>{Object.keys(B.value).forEach((e=>{B.value[e]=""})),oe()},E=(0,u.iH)(1),L=(0,u.iH)(10),M=(0,u.iH)(),P=()=>{oe()},G=()=>{oe()},K=(0,u.iH)(!1),Q=(0,u.iH)(""),A=(0,u.iH)(""),R=()=>{console.log("close")},J=()=>{K.value=!1},X=[{value:"1",label:l("上架")},{value:"0",label:l("下架")}],ee=(0,u.iH)(!1),le=(0,u.iH)({elements:[]}),ae=()=>{oe()},te=(0,u.iH)(!1);(0,t.bv)((()=>{N.value.getProductCategories(),oe()}));const oe=()=>{Z.value=!0,te.value=!0;const e={...B.value,id:B.value.commodityId,name:B.value.commodityName,isShelf:B.value.isShelf,categoryId:B.value.categoryId,pageSize:L.value,pageNum:E.value,updateStatus:B.value.updateStatus};e.categoryId=B.value.categoryId?B.value.categoryId[0]:void 0,e.secondaryCategoryId=B.value.categoryId&&B.value.categoryId.length>1?B.value.categoryId[1]:void 0,ee.value=!0,(0,p.Z)({method:"post",url:`${m.O9}/systemGoods/list.action`,params:e}).then((e=>{ee.value=!1,null!==e.data.data&&(le.value=e.data.data,setTimeout((()=>{N.value.kinds.length>0&&le.value.elements.forEach((e=>{if(e.categoryId){const l=N.value.kinds.find((l=>l.categoryId===e.categoryId));l&&(e.categoryName=l.name,l.subList.length>0&&(console.log(e),l.subList.forEach((l=>{l.id===e.secondaryCategoryId&&(e.secondCategoryName=l.name)}))))}})),M.value=le.value.totalElements}),300)),setTimeout((()=>{te.value=!1}),1e3),Z.value=!1}))},ue=((0,u.iH)(!1),()=>{a.push({path:"/edit-commodity",query:{type:"add"}})}),ne=e=>{a.push({path:"/edit-commodity",query:{type:"edit",id:e}})},de=e=>{console.log(e);e.isShelf;const a=new FormData;a.append("isShelf",e.isShelf),a.append("id",e.id),(0,p.Z)({method:"post",url:`${m.O9}/systemGoods/updateShelf.action`,data:a}).then((a=>{e.isShelf/1===1?(0,r.z8)({type:"success",message:l("上架成功")}):(0,r.z8)({type:"success",message:l("下架成功")})}))},ie=e=>{const a=parseInt(e.updateStatus)?"未锁定":"已锁定";s.T.confirm(l(`你确定要修改状态为${a}吗?`),l("警告"),{confirmButtonText:l("确认"),cancelButtonText:l("取消"),type:"warning"}).then((()=>{Z.value=!0;const a=e.updateStatus?0:1,t=new FormData;t.append("updateStatus",a),t.append("id",e.id),(0,p.Z)({url:`${m.O9}/systemGoods/updateUpdateStatus.action`,method:"post",data:t}).then((t=>{console.log(t.data);const o=le.value.elements.findIndex((l=>l.id===e.id));le.value.elements[o].updateStatus=a,(0,r.z8)({type:"success",message:l("修改成功")}),Z.value=!1}))})).catch((()=>{(0,r.z8)({type:"info",message:l("取消修改")})}))};return(e,l)=>{const a=(0,t.up)("el-input"),i=(0,t.up)("el-form-item"),s=(0,t.up)("el-option"),r=(0,t.up)("el-select"),m=(0,t.up)("el-button"),p=(0,t.up)("el-form"),v=(0,t.up)("el-table-column"),oe=(0,t.up)("el-icon"),se=(0,t.up)("el-image"),re=(0,t.up)("el-switch"),ce=(0,t.up)("el-tag"),me=(0,t.up)("el-table"),pe=(0,t.up)("el-pagination"),ve=(0,t.up)("el-config-provider"),ge=(0,t.up)("el-dialog"),he=(0,t.Q2)("loading");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",g,[(0,t._)("div",h,(0,o.zw)(e.$t("商品列表")),1),(0,t._)("div",f,[(0,t._)("div",w,(0,o.zw)(e.$t("查询条件")),1),(0,t.Wm)(p,{class:"flex flex-wrap mt-10"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{class:"mr-50",label:`${e.$t("商品名称")}：`},{default:(0,t.w5)((()=>[(0,t.Wm)(a,{modelValue:B.value.commodityName,"onUpdate:modelValue":l[0]||(l[0]=e=>B.value.commodityName=e),placeholder:e.$t("商品名称")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,t.Wm)(i,{class:"mr-50",label:`${e.$t("商品ID")}：`},{default:(0,t.w5)((()=>[(0,t.Wm)(a,{modelValue:B.value.commodityId,"onUpdate:modelValue":l[1]||(l[1]=e=>B.value.commodityId=e),placeholder:e.$t("商品ID")},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,t.Wm)(i,{class:"mr-50",label:`${e.$t("商品分类")}：`},{default:(0,t.w5)((()=>[(0,t.Wm)((0,u.SU)(d.Z),{ref_key:"BCategoryRef",ref:N,modelValue:B.value.categoryId,"onUpdate:modelValue":l[2]||(l[2]=e=>B.value.categoryId=e),lang:F.value},null,8,["modelValue","lang"])])),_:1},8,["label"]),(0,t.Wm)(i,{class:"mr-50",label:`${e.$t("商品状态")}：`},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{modelValue:B.value.isShelf,"onUpdate:modelValue":l[3]||(l[3]=e=>B.value.isShelf=e),class:"m-2",placeholder:e.$t("商品状态")},{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.iD)(t.HY,null,(0,t.Ko)(X,(e=>(0,t.Wm)(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,t.Wm)(i,{class:"mr-50",label:`${e.$t("锁定状态")}：`},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{modelValue:B.value.updateStatus,"onUpdate:modelValue":l[4]||(l[4]=e=>B.value.updateStatus=e),class:"m-2",placeholder:e.$t("锁定状态")},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(O.value,(e=>((0,t.wg)(),(0,t.j4)(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"]),(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[(0,t._)("div",y,[(0,t.Wm)(m,{type:"primary",onClick:ae,loading:ee.value},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("查询")),1)])),_:1},8,["loading"])]),(0,t._)("div",b,[(0,t.Wm)(m,{type:"primary",onClick:q},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("重置")),1)])),_:1})])])),_:1})])),_:1})]),(0,t._)("div",_,[(0,t.Wm)(m,{type:"primary",onClick:ue},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("新增商品")),1)])),_:1})]),(0,t._)("div",k,[(0,t._)("div",$,(0,o.zw)(e.$t("查询结果")),1),(0,t.wy)(((0,t.wg)(),(0,t.j4)(me,{class:"mt-15","max-height":"800",data:le.value.elements,border:"",style:{width:"100%"}},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{prop:"id",label:e.$t("商品ID"),width:"130"},null,8,["label"]),(0,t.Wm)(v,{label:e.$t("封面图"),width:"200"},{default:(0,t.w5)((e=>[(0,t._)("div",W,[(0,t.Wm)(se,{style:{width:"100px",height:"100%"},src:e.row.imgUrl1,fit:"cover"},{error:(0,t.w5)((()=>[(0,t._)("div",C,[(0,t.Wm)(oe,null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,u.SU)(n.tap))])),_:1})])])),_:2},1032,["src"])])])),_:1},8,["label"]),(0,t.Wm)(v,{prop:"goodName",label:e.$t("商品名称")},{default:(0,t.w5)((e=>[(0,t._)("div",x,(0,o.zw)(e.row.goodName),1)])),_:1},8,["label"]),(0,t.Wm)(v,{prop:"categoryName",label:e.$t("商品分类"),width:"200","class-name":"category"},null,8,["label"]),(0,t.Wm)(v,{prop:"secondCategoryName",label:"二级分类",width:"100","class-name":"category"}),(0,t.Wm)(v,{prop:"systemPrice",label:e.$t("进货价格"),width:"180"},{default:(0,t.w5)((e=>[(0,t._)("div",null,"$"+(0,o.zw)(e.row.systemPrice.toFixed(2)),1)])),_:1},8,["label"]),(0,t.Wm)(v,{prop:"putOnShelves",label:e.$t("是否上架"),width:"100"},{default:(0,t.w5)((e=>[(0,t.Wm)(re,{"active-value":1,"inactive-value":0,disabled:te.value,modelValue:e.row.isShelf,"onUpdate:modelValue":l=>e.row.isShelf=l,onChange:l=>de(e.row)},null,8,["disabled","modelValue","onUpdate:modelValue","onChange"])])),_:1},8,["label"]),(0,t.Wm)(v,{label:e.$t("解锁状态"),width:"84"},{default:(0,t.w5)((l=>[(0,t._)("div",{class:"flex justify-center",style:{cursor:"pointer"},onClick:e=>ie(l.row)},[l.row.updateStatus?((0,t.wg)(),(0,t.j4)(ce,{key:0,size:"large"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("已锁定")),1)])),_:1})):((0,t.wg)(),(0,t.j4)(ce,{key:1,size:"large",type:"danger"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("未锁定")),1)])),_:1}))],8,S)])),_:1},8,["label"]),(0,t.Wm)(v,{label:e.$t("排序"),width:"80"},null,8,["label"]),(0,t.Wm)(v,{label:e.$t("销量"),width:"100"},null,8,["label"]),(0,t.Wm)(v,{label:e.$t("操作"),width:"250"},{default:(0,t.w5)((l=>[(0,t._)("div",z,[(0,t._)("div",V,[(0,t.Wm)(m,{onClick:e=>Y("/comment",l.row)},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("评价库")),1)])),_:2},1032,["onClick"]),(0,t.Wm)(m,{class:"mt-10",onClick:e=>Y("/member-comments",l.row)},{default:(0,t.w5)((()=>[(0,t.Uk)("会员评价 ")])),_:2},1032,["onClick"])]),l.row.updateStatus?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",I,[(0,t.Wm)(m,{type:"primary",onClick:e=>ne(l.row.id)},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("编辑")),1)])),_:2},1032,["onClick"])]))])])),_:1},8,["label"])])),_:1},8,["data"])),[[he,Z.value]])]),Object.keys(le.value).length>0?((0,t.wg)(),(0,t.iD)("div",U,[(0,t.Wm)(ve,{locale:(0,u.SU)(c.Z)},{default:(0,t.w5)((()=>[(0,t.Wm)(pe,{onSizeChange:G,"current-page":E.value,"onUpdate:current-page":l[5]||(l[5]=e=>E.value=e),"page-size":L.value,"onUpdate:page-size":l[6]||(l[6]=e=>L.value=e),"page-sizes":[10,20,30,50],background:"",layout:"total, prev, pager, next, jumper",total:M.value,onCurrentChange:P},null,8,["current-page","page-size","total"])])),_:1},8,["locale"])])):(0,t.kq)("",!0)]),(0,t.Wm)(ge,{modelValue:K.value,"onUpdate:modelValue":l[10]||(l[10]=e=>K.value=e),title:e.$t("导入链接"),width:"40%",onClose:R},{footer:(0,t.w5)((()=>[(0,t._)("span",j,[(0,t.Wm)(m,{onClick:l[9]||(l[9]=e=>K.value=!1),style:{"margin-right":"12px"}},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("关闭")),1)])),_:1}),(0,t.Wm)(m,{type:"primary",onClick:J},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$t("确认")),1)])),_:1})])])),default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t._)("div",H,(0,o.zw)(e.$t("商品类型")),1),(0,t.Wm)(r,{modelValue:Q.value,"onUpdate:modelValue":l[7]||(l[7]=e=>Q.value=e),class:"w-full mt-15",placeholder:"Select"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.options,(e=>((0,t.wg)(),(0,t.j4)(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,t._)("div",D,[(0,t._)("div",T,(0,o.zw)(e.$t("商品链接")),1),(0,t.Wm)(a,{class:"mt-15",modelValue:A.value,"onUpdate:modelValue":l[8]||(l[8]=e=>A.value=e),placeholder:e.$t("商品链接")},null,8,["modelValue","placeholder"])])])),_:1},8,["modelValue","title"])],64)}}},Z=a(89);const F=(0,Z.Z)(N,[["__scopeId","data-v-036f1d1a"]]);var B=F},6243:function(e,l,a){a.d(l,{Z:function(){return r}});a(541),a(7658);var t=a(3396),o=a(4870),u=a(4311),n=a(1073),d=a(5658),i={__name:"BCategory",props:{value:{type:Array,default:()=>[]},all:{type:Boolean,default:!1},lang:{type:String,default:"zh"}},emits:["input"],setup(e,{expose:l,emit:a}){const i=e,{t:s}=(0,d.QT)(),r=(0,o.iH)([]),c=(0,o.iH)([]),m=(0,o.iH)({}),p=()=>{(0,u.Z)({method:"get",url:`${n.vS}/wap/api/category!tree.action?lang=${i.lang}`}).then((e=>{r.value=e.data.data;let l=v(e.data.data);l.unshift({value:null,label:s("全部"),children:null}),c.value=l}))},v=e=>{let l=[];return e.forEach((e=>{let a={value:e.id,label:e.name,children:null};e?.subList?.length>0&&(a.children=v(e.subList),a.children.unshift({value:"0",label:s("全部"),children:null})),l.push(a)})),l},g=e=>{a("input",e)};return l({getProductCategories:p,kinds:r}),(l,a)=>{const o=(0,t.up)("el-cascader");return(0,t.wg)(),(0,t.j4)(o,{options:c.value,clearable:"",value:e.value,filterable:"",props:m.value,onChange:g},null,8,["options","value","props"])}}};const s=i;var r=s},814:function(e,l,a){a.d(l,{Z:function(){return t}});
/*! Element Plus v2.2.22 */
var t={name:"zh-cn",el:{colorpicker:{confirm:"确定",clear:"清空"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页",deprecationWarning:"你使用了一些已被废弃的用法，请参考 el-pagination 的官方文档"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!"},upload:{deleteTip:"按 delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"}}}}}]);
//# sourceMappingURL=974.9009ae4e.js.map